"use strict";(self.webpackChunksafeline_IOT=self.webpackChunksafeline_IOT||[]).push([[313],{93001:function(e,t,n){n(72791);var a=n(47356),r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center",style:{height:"100vh"},children:(0,r.jsx)(a.n,{size:100,thickness:120,speed:100,color:"#0000FF",secondaryColor:"rgba(0, 0, 0, 0.44)"})})}},83970:function(e,t,n){n.d(t,{Lk:function(){return F},tf:function(){return Q},S8:function(){return ge},q3:function(){return Se}});var a=n(72791),r=n(39593),i=n(57689),o=n(66757),c=n(80184),s=function(e){var t=localStorage.getItem("permissions");return(0,o.Z_)(t,e.pageAccess,e.pageAction)?(0,c.jsx)(e.component,{}):(0,c.jsx)(i.Fg,{to:"/error",replace:!0})},l=n(83001),d=a.lazy((function(){return n.e(969).then(n.bind(n,96969))})),u=a.lazy((function(){return n.e(853).then(n.bind(n,73853))})),m=a.lazy((function(){return n.e(863).then(n.bind(n,23863))})),f=[{path:"/",exact:!0,name:"Home"},{path:"/error",name:"Error",element:l.default},{path:"/user-management",name:"UserManagement",element:d},{path:"/devices-sensors/sensor-configration",name:"SensorConfigration",element:r.Z},{path:"/users",name:"Users",element:u},{path:"/alarm-thresholds",name:"AlramThreshold",element:m}],p=n(78983),h=n(18043),v=n(93001),g=n(99579),x=n(32152),j=n(36167),b=n(2646),S=n(99175),y=n(37295),k=n(41401),Z=n(96624),I=n(7297),w=n(80464),N=n(10918),A=n(81882),C=n(80242),E=n(96623),D=function(){var e=(0,h.U)().isLoading,t=(0,g.X)(),n=t.darkMode;t.setDarkMode;return(0,c.jsx)(c.Fragment,{children:e?(0,c.jsx)(v.Z,{}):(0,c.jsx)(p.KB,{id:"table_container",className:"table_container_light ".concat(n?"table_container_dark":""),style:{maxWidth:"unset"},lg:!0,children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(p.LQ,{color:"primary"}),children:(0,c.jsxs)(i.Z5,{children:[f.map((function(e,t){return e.element&&(0,c.jsx)(i.AW,{path:e.path,exact:e.exact,name:e.name,element:(0,c.jsx)(e.element,{})},t)})),(0,c.jsx)(i.AW,{path:"/",element:(0,c.jsx)(i.Fg,{to:"dashboard",replace:!0})}),(0,c.jsx)(i.AW,{path:"/dashboard",element:(0,c.jsx)(s,{component:x.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/organizations",element:(0,c.jsx)(s,{component:j.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/department",element:(0,c.jsx)(s,{component:S.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/facilities",element:(0,c.jsx)(s,{component:b.default,pageAccess:o.vw,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/devices",element:(0,c.jsx)(s,{component:y.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/Facilities-staff",element:(0,c.jsx)(s,{component:k.default,pageAccess:o.vw,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/Devices-staff",element:(0,c.jsx)(s,{component:I.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/Department-staff",element:(0,c.jsx)(s,{component:Z.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/organization-sensors",element:(0,c.jsx)(s,{component:A.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/devices-sensors",element:(0,c.jsx)(s,{component:C.default,pageAccess:o.t4,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/gateway",element:(0,c.jsx)(s,{component:w.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/notification-alerts",element:(0,c.jsx)(s,{component:N.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,c.jsx)(i.AW,{path:"/sensor/graph",element:(0,c.jsx)(s,{component:E.default,pageAccess:o.t4,pageAction:[o.H2]})})]})})})})},F=a.memo(D),O=n(29439),M=n(59434),z=n(24846),_=n(50612),H=n(52036),L=n(10982),R=n(93647),q=function(e){var t=e.ModalOpen,n=e.uploadedImageUrl;var a=JSON.parse(localStorage.getItem("permissions")),r=(0,o.Z_)(a,o.BA,o.H2),s=(0,o.Z_)(a,o.vw,o.H2),l=((0,o.Z_)(a,o.JK,o.H2),(0,o.Z_)(a,o.iH,o.H2),(0,g.X)()),d=l.darkMode,u=(l.setDarkMode,localStorage.getItem("organizationLogo")),m=(0,i.s0)();return(0,c.jsxs)(p.w5,{variant:"nav-item",children:[(0,c.jsx)(p.SQ,{placement:"bottom-end",className:"py-0",caret:!1,children:n&&(0,c.jsx)(p.cU,{src:n,size:"md"})||u&&"undefined"!==u&&(0,c.jsx)(p.cU,{src:u,size:"md"})||(0,c.jsx)(p.cU,{src:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABWvSURBVHgB7V15cFXXef8kJBaBWM1qjNgEBlMMmGba2E4mTSZ1m3RkMBBjFzoZp5NkWjtN+kfsxK7dwY3T/lG3caa1my6TtDVmMSBPwtidpG0a6IapoNisBowBywgkJBlLLBLK73f9vpejy33v3X2R3m/mvnPvfffec+75vvNtZ7kVMgBx+PDh2ilTptRXVFTMr6ysnHP9+vVxOD0BxzP6+vpGYZ//jcD+0NwtV7FdxnYU157HPa3Y70B6DsfHcW1TZ2fn+enTp7fKAEOFZBznz5+fOnTo0CUg1EIQ6pMgKok7E39VuX0Grndz2TVsJ7EdwvW7ent79w4ZMuTA6NGjL0iGkTkGeO+990bW1tbOu3bt2m+CEPeA4ItxerQEgEsGcEIb7t2PMvwnGGLz+PHj/18yhswwwMWLF5eioleh1TWg0udifxjPI3V1v53I5n0BGMB8RjeSE5BEr2J/05gxY/ZIBpBqBvjggw+mXb16dTV08ZdAsDk4VW0SqxTxCxHWfl8YDGBDD/LYh3Qb1NMPampqzkpKkUoGQGtfgpb+MCpxBQ7HSnZtFXJaO95jI7a/HTduXJOkDKmq2Pb29jvQGp9AZX0KaY34LJ+9hfMYUiS/DzFtpXqdSgBeY16n581985keJAczoorYjXs2wHD8maQEqWCAS5cuLYER9RR2PyMerXcnQhJKaKgQ6ejokPfff58qRbq7uwUGpCC/fveR8FVVVVJdXS0jR44UGJoyduxYgfi2zukz7Xn7QC/KtRsS7ptghF2SMBJlgHPnzk0eNmzYU6jMz6tRRxRrWWala8s2WyMJSyLj2dLa2moRXYmt15Ax7Hnw2E5UHqN8AutebrrpJoEIt5jBJ+HtoJ3wXTDdM2C2FkkIiTAAXrwWrf4BEObZXECm3/9uGcAEW/qFCxfk7NmzgqCNo6Gn0kKJrc+zSw77f2QYYvjw4TJ58mSZNm2aJSHCYAQ8gwGnJ1paWv6mvr7+isSM2Bkgp+efxe5dZv5u3TIliqY9PT0W0c+cOSNdXV1SzEsoRGg7c9jzUymjz6OqoESoq6sTiPF+TGJe7xa4n9KgCc/4QtyxhNgYAC84HMT/EipnAw5HiU+YDEARf+LEiXyLj8CdKwgSnBIBIWeZOXNm3k5QZnBSMU6wqbROXPensD2+JTEhlhpDuHYaWs0WEP9XcFgpAXHlyhV56623LD1P/R4n4RXa0pk/pcDcuXNlwoQJBa93G7/AdX3Yfor6Wg8D9LREjMhrDq3+15B8Hy91swR061iJeJ4cPXq0n543VUIcsKshgmrhlltusaSB3TDVMpr3F4Jhf5zEcx4Bc/1QIkSkNdbW1vYoDRzs1tyQsUtimRWJfgCL+DT44hb5bjF16lSZN29eXiWoOvBTVrxjF7ZH4X08JxEhkho8ffr0COixZ/DyX5EQwEo8deqUpe/VGGMrc9K1SUJbNt3FRYsWCcLA+cBSwOc+j76Fr+X6G0JF6LVH3x4v/jwK21Ds+V4IR+JT55sET5sEsMcQaBcsW7bMUg0sd0BGoF3wGlzPtUjbJUSEWoMIukyFUbQFFXEnj926doXA+999910O8HCM+KWJCezxA4IBpMWLF1tMQASIHlrGIZLX8awGRCqbJSQEl0850NKHT96oxLfDo19spXTzjhw5kvex7bo0bRLA3OeGTi05ePBg/pyqLj/AvRXYlsP+aWRdS0gIhQHeeeedaRD7O7C73DyvFeHVCCLBGc5l5anYVwZSSWBKBCe4vS5KsOyMTlKFEWaMwOdWAQZaDgNzB0dCSQgIzABwy8bBQGmUD4nfj8p+CcDrKfZp7euxE4oxVdLSwXQVyQCUBnZX0OfGh/wyGtwWdHBNkoAIxAC09pGwr/sOcbAn3LZ+O6PQ3aP4N0O19n03BPYjfcKCmS8Z+fjx41Zqxg+CbMCdULkv4FkjJAACMQCMkT9H8mm+r1dOdgJfjL13rCwVl2mDX6nGABYaTEnX1cvz6WkhIPaMBIBvBoBIe4RDtSRET4IVQ3HJUG/afPwgUMMPtlI+iBUS2PC+woCb+IQvBgDXfRbECcR5JlSscdAGxb+eGyhQSUbis9cy7HdjtBV19wnxAc8MgK5XTq54Di9RE1CH5aEtgi0kjWLfhB+7wrRfqAao5gqJeZ82Tg3q7Z8YhxGP8MwA0PvfRzJTQgYrBa5NYi5b1FDG5vgFSjl70CgETMWzGYQb7uUmTwwAQ+YbKPjHJWSwMkh8jtUbqDADQC0tLVY3MhGiOuCDfhXq+YtebnLNADD6bkfy9VxEypWlWsry13MaMBlIhp8TVGQzyMXubEWAmIB9q0Qd/glHXbktkysGwIOHgoO/h8KPNgnkRw86gRVCN8llWVy7SX5dtqihDG9GOMMCnjkS27N4bq2b610xALiV7t4yCREaDCHgxgSKk2cR+s5RAM+9G17BWjfXlqxxdu/igRzHN0TPhRWJ0wrguH37wMuBjkuXLlnxjqhUHurxWTeh4pKTMIYPH/6YBJx9WwgqAun/m4R3ywRemKXYtfYYfRygGqDnw4GlETEBXcM/RvrlYhcVlQAQ/Ry6/XvFrvFrsOiIHrpFly9fTk3Lj8sI1cAXEaIRaN8+z1lXxcpRSgI8LR6manmB2gADLezrBir5KAEixjDU7ZNIVxS6oCBxwZ0fw813SQn4JZzJAGnT+3EwI/PQ7u4o80PdfpZu4dixY/c6/V9QBSBQ8bgYhl9U0EoYTFDm1+7hiFGFPJ4o9KcjA0A0LUVyp0QIFYPmLN3BAn132j8x4ZNcc8HpD0cGQMG+UPHh/PxIkdY+/6gRQT9AKXAq3iNOf9zAAK2trdORPCAxwAwGDSYkwfTwuu7lkjs3nLefqK6uXodkjMQAEn/IkCGpZgK7axX0Or2W4Lt7yTtg/mO53pL95A0MAO5cKTHMGdTWr2Pms4BijOqFiTXkrdPH3D4zYP4VuRFc/ctiHqCD4iN40BKJARoIYiQszfA5QEPcwM27h5k/zs/mcnvmuX4MAI78nHgM/LgVe/ZrNfjDJVgGUycQoXVABojTA2KvLup8lXnOXvP3SMygGCQTDCZoC+UyMwnkfS9XW9XjPAOge5JLrs6WmGDOoeeqXIMtFsD3D2udIY+YiwY3L18O+UWB1iDxrJD96ih9ce6PGTOm37mBDhX/nD6egAfEFdI/owcmA0Qa+bPD7ADiLFrtIRwMTKBMTw8oifdFPedVvcUAzc3NE0GQxRIjTMOPizGOGjVqUEkArifkxWMIOf/FOrnUogLE0SIk4yUh0BDksmtE2oJCfr0cp/80pfhXqecmaBRG/jbU8hsL3LEYABEp16NIo8KkSZNKRsayCjtTT5w40fJ8kgyFI98FTC0G4CBCSRi0iIsts5ZlmPYO9T7XFjQlQhJAvp9iqor41qRFL22C6dOnJ9FTFjnMd2LrpwFo/y9uoCz1TCvPnDnDZufb/w9TR7FiuMJWmhBGKFbfl0zOtQSjCi+7vTZ3zSwYgrWVMEg4dDjxHhlWEm2AmTNnWulACg9rvwdFv9n6E8YQGN/1KFvlUkkRKAGoCgaSCiDx6erOmjVL0gSUa34lWlug8G9YIqrCmEJNKTBQwsMa4JozZ46MGDEiVW4uaD+nsre3d4qkDIwL3HrrrVbFpS0u4BZmaJvfF+B3BlI4BG4cJUAks36CgBXHQEl9fb1kFer66UriTgtIpwDjaWmlzvnW1nPzzTdbVrMiCyrB7ORisOe2227r9y2BlL3DLZUo0ETupbFy2WrYeihCk4JXN1fFPMO9S5cutWwZE8oEEYR3PY1JzF1TSwkwT1IKVhaZgKqAy7CnGSbxafEvWLDAStPcw8lgEGeNpHZQnlYq+83nz59viVIuJJV0eZygLZs6n8RXf9/NuoClps/7udYNOPejor29/XpFAMvEzLjUY7xcW+heLrPGpeN1Vk2SRpUSRFP2aC5cuNBi2IygjwzQlxVXS5mAiyu8+eabVpqkZa15U8zPnj1bZsyYkVgfv19UdHR0XEbqe1SmXfS4FVFBK4lzCk+ePGl9Mk5XF4ubGXRkDz8RowM80/glkyK4Qga4KB9+oNkX4lIBhZ7HbwW+/fbb/b4gVogRTBet2H/2++2inhtHMLHFM8Bj9ltkbGhbO1XAHrzQcsko1KXhOkPNzc3WGnzmeoNmV2wpY8y83rxHrXumbOl0S9mxQ6PU/C9rwPvtYS/gJckwtGXyQ8/c2OHCJdi48CRtBHNxZpOgbnxlfT7dORp4bO1s+fYWn1Xg3VroBp6SjMMkCAMwjB6yR5FrD1EycEk2rkXIY0oH8zOv5jNIbHZF04pnAIcMRbdOiW7mYx/anlG0UgK0Sgrg1T6wV75JELqIJDKPSUx2MZMxyACUCFyWhhuZQUO2HKrFa9ljx42tnvfo18LtZbKL/SS9kQDorMKLtCc9+MKNGNVPr+m1bKn6bSGutsUFl7jRKFQi8381DM3OGNOgY8r77OfMfMgcOpGDkoF2ADfu60BWs6cvQ0bguSoU9LgkDDfeg7pXJDDFOpeWJeFVrJvDrkxCawvWfJzEtjKT6cNro+D1lCi6pBvtC0IlhqoKVRd8FpkuIyOajtMLWIaX3isJopD41HUEVY9zIwM4VbDZegu1QLs7p+cUduPQLhX0nHmfeQ0ZgoxAlcONzOE3DBwH0HAWVnBgIHRgGwpTcFxg2P67+VwnPcoWTaLTt+fHo8zl1NIsWk0pxI0SgfMd6EHQrjCvKxaviAk9yHuKlXtnZ+dRHSbshCgZwHwm9Tl9ebpwunxsluYL2iWLEpnE5wAXupE698G0aRJigmOIYs6ryhX2LSSxDr8xK4jf1OOnVNjaKfJNXWwSP0uWttnCaZAyZM2NUoEuKiVDwnbCIf5U5Qr7ExT2NyQGmAYaAzUM47LF27+goZa4SfAsuVl224HgMT8UcejQIYsZ6urqLPWQxJQ4lGsXU5UAB4tdHGbFa4sg4flhaCV8oWuzBCdmLZRSxR04cMAyGtmTSBURJ0Dz163y8IdThWHBHpaIloU3MrU4/8SJExYTKAbLugB2mEYj7QMd9BID2sCI86GOLuRZFlY3RUJki0TQwDt27Jhl2WetZYcNDRqZsQZuDDZxNJEailHVE5777yD+J7hvWiGvSgjQl9GNL8rPpO3Zs8fqqRtsK4I5wSniqKpx//791oezaQybnVhhSkg8a7fu56kBX3snCnFFQgJfiPqd4v6NN97I+/KDcW1gL1A1uW/fPktq2m2HEHAZdNmsBxVGxiNhof4Pdm8TnzCtdnLwwYMHLZFvfg9osIt/t2BdMZLIGVJUCSHW35vw/xfpQV4C4MEfYGuUAoVxI4bMgE5TU1Ne35utPu3RvLSA9cROKqoEqlCnqKlPvGYe9FPIINTLSK45FcYMzjgVQvcZq6d7w84aJxeoLAXcg/VEScq4ARtTCFKAQ6k3mSf6MQB80v9DBifsdxWSAPawJ1s+9b1J/DKCg0xw5MgRK0wesF73Qfz/r3niBpMcGfw1Ek/yhYVityyHapP4jGyVxXw4UILTiCYTFPrErov65vD/bfaTNzAAeuK2IumwF8JJBeh/avCR+CmdBZt5qFdFCasdZaYrWcq9xjUdVVVV/2g/f8NdiE2fxcXbxQXUz2eAhx05ZUQLHZxCw5Dq1j7CqRhwzT/X1NScsZ+vLJDRd7CV/KgdM6Ze4nStsnUfPbSOqW5pGJof3CpW9/ivC63/75z+c2SAcePG7YNI+bGUAHu2jh49mi9AWexHD61jdqGzQ81lne9GTKHJ6Y+CigOinR+MLvhdM4oiGn06CaNM/Pigda1d6eY5B/TCKH+60J8FGSD3pckfOf3H1n7q1Kn8aNoy8ZMB6UAJXOzbi6DNrtra2v8o9IyipmPu69M3fNqT4/U4gscpEFRGvGDgjdPlC4CDLR4vdn9RBoAt0ATC/oNpaFDk6/z8rI7WGUhgvbPziI1Sj5VeaMDfRbfvrmL3l+ybRRflk9AhXRrPZ5cuMyu3+OShNNBeV9LICBLR7/9WqWeUZIDJkyefQwZfY6CB0ShmpLNtykgWZh8LvQJKgtw58MH1P4Lubyn1DFejM0DwjUh2cX0eDloYqOv6Zxls+YzH5LyyvQgZv+DmPlcMgP7oToR5/wBBHys4VBb/6YOOsoaK7gAz/G59fb2rwT2ux2fV1dXtRQTqcRC/PKQnpQAT9CFC+Gcw3ve7vcfTAD0Q/wVs/82MpIzUAbT56X333VfS8DPhiQHWrFnTPXTo0NWwCZqljFQBNHkb+n+9eITnIboNDQ3vwiP4bex2SRlpQRek8sNr1649LR7ha4w2xMy/gds2SBmpANzzx1avXv1D8YFAzvzWrVv/Apz3SNDnlOEbfbD4XwDxvyw+EWiWBjJ/DLqnUcqIHTlD/LW2trY/lAAI3HJffPHFyTAMt6FAH5UyYgGJj8b3OoJyv/7ggw9elAAIRXRv3LhxGuLOjTAO75CyOogafZC6JH7DunXrAntjoRGrsbFxGgq1A4ywHP5omQkiAup2T3V19b30xiQEhDZTkwVCH0EDuHNvOVAUGXZ3d3c3hEV8ItSpunAPm+GSfBpc+i/icW5BGUWBKu3bgYa1MgyxbyL0udo0SiAFVjBsLGWEAhh8z7W2tj64cuXKkt27XhGprt6yZcvDMAy/jd0aKcMzOJy7p6dnw/333/9tiQiRG2ubNm36LdgGfwnxNUvKcAXaUMBZSNLfQf/Lv0qEiMVa37x58wy81A8gDT4mZTexFK6D+P+FUPsaxPZDM/YKIVZiQCV8A4zwdWyp+1ppGsDZWNgeX758+fOzZs26LDEg9tb40ksv3Q4/9nvYXYatPLYsBxD+Z1CVX12xYkWs6zYnIo537tw5rKur64t46Q1QC4NaGqAOuiERv4oA2ovw79+XmJGoPmY/wrBhwx5FBfx+scWqByiu4p3/Hg3gySjcO7dIhUGGvoS7oRaeBiNwncKBrhZ64Nf/CAGzpxAz2ScJI1UW+bZt2z6OVvFNbHeBGUbIAAINPBD+J3DtNsC6f11SglS6ZC+//PIyVNZDMIoeQMXxI7xZdR0ZDucw7e3Q8d+BgZd4i7cj1RULRpiOylvHGDi2JZJb3DrtANNe42JbKPNfceU1BHPOSkqRmZa1ffv2j0B8fg5G0z1IZyNN1VfPQXDOoj6Gcu0g0VetWtUkGUAmRevWrVsXo5LXQEV8FOntqPR411rPAXl3opUfAPFfBVPuhGF3ZP369SWX1kkTMh+WfeWVV25CH/kvwZ28A+HTu3FqARiC/Q6hqgsQuRfbSRCcrfzHIPYh5Lcv7O7ZuDEg4/LwJiaAQJNAsKUwvuaAYJPkw28hTAABJ+L8PGw1OG8tzp8T393YuOARP6X7Dq5rQ6tuR2/ccWyH8bxjDz30UOyBmqjxc0Kli0jdECnSAAAAAElFTkSuQmCC",size:"md"})}),(0,c.jsx)(p.$H,{className:" pt-0 ".concat(d?"dropdown-dark":""),placement:"bottom-end",children:(0,c.jsxs)(p.$f,{children:[s&&!r&&(0,c.jsxs)("div",{onClick:function(){t()},children:[(0,c.jsx)(z.Z,{icon:L.M,className:"me-2",style:{fontSize:"30px",color:"black"}}),(0,c.jsx)("span",{style:{fontSize:"20px",color:"black"},children:"Settings"})]}),(0,c.jsxs)("div",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),localStorage.removeItem("permissions"),localStorage.removeItem("organizationLogo"),localStorage.removeItem("organizationName"),localStorage.removeItem("organizationid"),m("/login")},children:[(0,c.jsx)(z.Z,{icon:R.U,className:"me-2",style:{fontSize:"30px",color:"black"}}),(0,c.jsx)("span",{style:{fontSize:"20px",color:"black"},children:"Sign Out"})]})]})})]})},V=n(91933),T=n(17834),X=n(45013),B=n(46522),U=n(10781),P=n(96062),W=n(53469),Y=n(1413),G=n(18393),J=function(e){var t=e.closeModal,n=e.saveHandler,r=e.data,i=(0,h.U)().dispatch,o=((0,V.useMutation)(G.Vm).mutate,(0,a.useState)([])),s=(0,O.Z)(o,2),l=(s[0],s[1],(0,a.useState)(!1)),d=(0,O.Z)(l,2),u=d[0],m=(d[1],(0,a.useState)({organizationName:localStorage.getItem("organizationName"),file:null})),f=(0,O.Z)(m,2),v=f[0],x=f[1];(0,a.useEffect)((function(){r&&x((function(){return{firstname:r.firstname,lastname:r.lastname,email:r.email,address:r.address,phonenumber:r.phonenumber,roleid:r.roleid}}))}),[r]);var j=(0,g.X)(),b=j.darkMode;j.setDarkMode;return(0,c.jsxs)(p.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:u,onSubmit:function(e){e.currentTarget;e.preventDefault(),i({type:"SHOW_LOADER"}),n(v),t()},children:[(0,c.jsxs)(p.b7,{md:6,children:[(0,c.jsx)(p.L8,{id:"".concat(b?"heading-dark":""),htmlFor:"validationFirstname",children:"Upload Logo"}),(0,c.jsxs)(p.YR,{children:[(0,c.jsx)(p.wV,{}),(0,c.jsx)(p.jO,{type:"file",className:"input-light pt-0 ".concat(b?"input-dark":""),name:"file",onChange:function(e){var t=e.target.files[0]||null;x((0,Y.Z)((0,Y.Z)({},v),{},{file:t}))},feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,c.jsx)(p.b7,{xs:12,children:(0,c.jsx)(p.u5,{color:"primary",className:"float-end",id:"".concat(b?"button-dark":""),type:"submit",children:"Upload"})})]})},Q=function(){var e,t=(0,i.TH)(),n=(0,U.Z)((function(e){return e.addData})),r=JSON.parse(localStorage.getItem("permissions")),s=(0,g.X)().setDepartmentId,l=(0,h.U)().dispatch,d=(0,i.s0)(),u=function(){return l({type:"SHOW_LOADER"})},m=function(){return l({type:"HIDE_LOADER"})},f=(0,M.I0)(),v=(0,a.useState)([]),x=(0,O.Z)(v,2),j=x[0],b=x[1],S=(0,V.useMutation)(X.WH).mutate,y=(0,V.useMutation)(B.pF).mutate,k=(0,o.Z_)(r,o.BA,o.H2),Z=(0,o.Z_)(r,o.vw,o.H2),I=(0,o.Z_)(r,o.JK,o.H2),w=(0,o.Z_)(r,o.iH,o.H2),N=localStorage.getItem("email"),A="";k?A="SuperAdmin":Z?A="Organization Admin":I?A="Facility Admin":w&&(A="Department Admin");var C=(0,g.X)(),E=C.facilityData,D=C.setFacilityData,F=C.departmentsData,L=C.setDepartmentsData,R=(C.devicesData,C.setDevicesData),Y=(0,M.v9)((function(e){return e.sidebarShow})),G=(0,V.useMutation)(T.D2).mutate;var Q=(0,V.useMutation)(T.iU).mutate;function K(e){u(),Q(e,{onSuccess:function(e){m(),D(e.data)},onError:function(e){m()}})}var $=(0,V.useMutation)(P.oy).mutate;var ee=(0,V.useMutation)(P.a8).mutate;var te=(0,V.useMutation)(P.hd).mutate;var ne=(0,V.useMutation)(T.XH).mutate;function ae(e){u(),ne(e,{onSuccess:function(e){m(),L(e.data)},onError:function(e){m()}})}var re=(0,V.useMutation)(T.HH).mutate;var ie=(0,a.useState)(null),oe=(0,O.Z)(ie,2),ce=oe[0],se=oe[1],le=localStorage.getItem("organizationLogo"),de=(0,V.useMutation)(T.oL).mutate;function ue(e){u(),de(e,{onSuccess:function(e){m(),se(e),le&&"undefined"!==le&&function(e){u(),me(e,{onSuccess:function(e){m(),se(e.data.logo),console.log(e)},onError:function(e){m()}})}(e)},onError:function(e){m()}})}var me=(0,V.useMutation)(T.uj).mutate;(0,a.useEffect)((function(){u(),k?(G("",{onSuccess:function(e){m(),b(e),n(e.data)},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),d("/login")),m()}}),void 0===localStorage.getItem("OrganizationId")&&null===localStorage.getItem("OrganizationId")||K(localStorage.getItem("OrganizationId")),void 0===localStorage.getItem("facilityId")&&null===localStorage.getItem("facilityId")||ae(localStorage.getItem("facilityId"))):Z?(S("",{onSuccess:function(e){m(),D(e.data)},onError:function(e){}}),void 0===localStorage.getItem("facilityId")&&null===localStorage.getItem("facilityId")||ae(localStorage.getItem("facilityId"))):I?y("",{onSuccess:function(e){m(),L(e.data)},onError:function(e){}}):m()}),[]);var fe=(0,g.X)(),pe=fe.darkMode,he=fe.setDarkMode;var ve=(0,a.useState)(!1),ge=(0,O.Z)(ve,2),xe=ge[0],je=ge[1],be=function(){je(!1)};return(0,c.jsxs)(p.PO,{className:"mb-4 ".concat(pe?"header-dark":""),position:"sticky",children:[(0,c.jsx)(H.$,{title:"Settings",content:(0,c.jsx)(J,{closeModal:be,saveHandler:function(e){ue(e)},openModal:je}),isOpen:xe,onClose:be}),(0,c.jsxs)(p.KB,{fluid:!0,children:[(0,c.jsx)(p.X4,{className:"ps-1",onClick:function(){return f({type:"set",sidebarShow:!Y})},children:(0,c.jsx)(z.Z,{className:"  ".concat(pe?"icon-dark":""),icon:_.N,size:"lg"})}),(0,c.jsx)(p.qy,{className:"ml-3 mr-4",to:"/",children:(0,c.jsx)("a",{href:"#",children:(0,c.jsx)("img",{src:W,alt:"Logo",style:{width:"105px",height:"62px",backgroundColor:"transparent"}})})}),(0,c.jsxs)(p.g3,{className:"d-none d-md-flex me-auto gap-4",children:[k&&!["/organizations"].includes(t.pathname)&&(0,c.jsx)(p.U6,{children:(0,c.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Organization",onChange:function(e){s(""),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId");var t=e.target.value;D([]),L([]),localStorage.setItem("OrganizationId",t),"Select Organization"!==t&&(K(t),function(e){u(),re(e,{onSuccess:function(e){m(),L(e.data)},onError:function(e){m()}})}(t),function(e){u(),ee(e,{onSuccess:function(e){m(),R(e.data)},onError:function(e){m()}})}(t))},value:localStorage.getItem("OrganizationId"),children:[(0,c.jsx)("option",{children:"Select Organization"}),null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.map((function(e){return(0,c.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})}),Z&&!["/gateway","/organization-sensors","/Facilities","/organizations","/notification-alerts","/dashboard","/sensor/graph","/users"].includes(t.pathname)&&(0,c.jsx)(p.U6,{children:(0,c.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Facility",onChange:function(e){var t=e.target.value;localStorage.setItem("facilityId",t),localStorage.removeItem("departmentId"),L([]),"Select Facility"!==t&&(ae(t),function(e){u(),te(e,{onSuccess:function(e){m(),R(e.data)},onError:function(e){m()}})}(t))},value:localStorage.getItem("facilityId"),children:[(0,c.jsx)("option",{children:"Select Facility"}),null===E||void 0===E?void 0:E.map((function(e){return(0,c.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})}),I&&!["/gateway","/organization-sensors","/Facilities-staff","/Facilities","/department","/organizations","/notification-alerts","/dashboard","/sensor/graph","/users"].includes(t.pathname)&&(0,c.jsx)(p.U6,{children:(0,c.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Department",onChange:function(e){var t=e.target.value;"Select Department"!==t&&function(e){u(),$(e,{onSuccess:function(e){m(),R(e.data)},onError:function(e){m()}})}(t),localStorage.setItem("departmentId",t),s(t)},value:localStorage.getItem("departmentId"),children:[(0,c.jsx)("option",{children:"Select Department"}),null===F||void 0===F?void 0:F.map((function(e){return(0,c.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})}),(0,c.jsx)(p.U6,{children:(0,c.jsx)(p.u5,{id:"".concat(pe?"button-dark":""),onClick:function(){he(!pe)},children:"Change Mode"})})]}),(0,c.jsxs)(p.g3,{style:{display:"block"},children:[(0,c.jsx)("h5",{className:"m-0 ".concat(pe?"heading-dark01":"heading-light01"),children:A}),(0,c.jsx)("p",{className:"m-0 ".concat(pe?"heading-dark01":"heading-light01"),children:N})]}),(0,c.jsx)(p.g3,{className:"ms-3",children:(0,c.jsx)(q,{closeModal:be,ModalOpen:function(){je(!0)},uploadedImageUrl:ce})})]})]})},K=n(44925),$=n(11087),ee=["component","name","badge","icon"],te=["component","name","icon","to"],ne=function(e){var t=e.items,n=(0,i.TH)(),r=function(e,t,n){return(0,c.jsxs)(c.Fragment,{children:[t&&t,e&&e,n&&(0,c.jsx)(p.C_,{color:n.color,className:"ms-auto",children:n.text})]})},o=function(e,t){var n=e.component,i=e.name,o=e.badge,c=e.icon,s=(0,K.Z)(e,ee),l=n;return(0,a.createElement)(l,(0,Y.Z)((0,Y.Z)({},s.to&&!s.items&&{component:$.OL}),{},{key:t},s),r(i,c,o))},s=function e(t,a){var i,s=t.component,l=t.name,d=t.icon,u=t.to,m=(0,K.Z)(t,te),f=s;return(0,c.jsx)(f,(0,Y.Z)((0,Y.Z)({idx:String(a),toggler:r(l,d),visible:n.pathname.startsWith(u)},m),{},{children:null===(i=t.items)||void 0===i?void 0:i.map((function(t,n){return t.items?e(t,n):o(t,n)}))}),a)};return(0,c.jsx)(a.Fragment,{children:t&&t.map((function(e,t){return e.items?s(e,t):o(e,t)}))})},ae=n(34358),re=(n(82454),n(93433)),ie=n(93744),oe=n(31517),ce=n(54546),se=n(1278),le=n(54566),de=n(3050),ue=n(65863),me=n(46052),fe=n(43747),pe=(JSON.parse(localStorage.getItem("permissions")),[{component:p.U6,name:"Dashboard",to:"/dashboard",icon:(0,c.jsx)(z.Z,{icon:ie.n,customClassName:"nav-icon"}),permissions:["".concat(o.iH,"_").concat(o.H2)]},{component:p.dw,name:"Admin",icon:(0,c.jsx)(z.Z,{icon:oe.g,customClassName:"nav-icon"}),items:[{component:p.U6,name:"Organizations",to:"/organizations",icon:(0,c.jsx)(z.Z,{icon:ce.V,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]},{component:p.U6,name:"Facilities",to:"/Facilities",icon:(0,c.jsx)(z.Z,{icon:oe.g,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.vw,"_").concat(o.H2)]},{component:p.U6,name:"Department",to:"/department",icon:(0,c.jsx)(z.Z,{icon:se.e,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.JK,"_").concat(o.H2)]},{component:p.U6,name:"Equipments",to:"/devices",icon:(0,c.jsx)(z.Z,{icon:le.k,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.iH,"_").concat(o.H2)]}]},{component:p.U6,name:"Users",to:"/users",icon:(0,c.jsx)(z.Z,{icon:oe.g,customClassName:"nav-icon"}),permissions:["".concat(o.vw,"_").concat(o.H2)]},{component:p.dw,name:"Sensor Setup",icon:(0,c.jsx)(z.Z,{icon:de.o,customClassName:"nav-icon"}),items:[{component:p.U6,name:"Organization Sensors",to:"/organization-sensors",icon:(0,c.jsx)(z.Z,{icon:ue.c,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]},{component:p.U6,name:"Equipment Sensors",to:"/devices-sensors",icon:(0,c.jsx)(z.Z,{icon:me.Y,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.t4,"_").concat(o.H2)]},{component:p.U6,name:"GateWays",to:"/gateway",icon:(0,c.jsx)(z.Z,{icon:me.Y,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]}]},{component:p.dw,name:"Alerts",icon:(0,c.jsx)(z.Z,{icon:fe.F,customClassName:"nav-icon"}),permissions:["".concat(o.BA,"_").concat(o.H2)],items:[{component:p.U6,name:"Alarm Recipients",to:"/notification-alerts",icon:(0,c.jsx)(z.Z,{icon:ue.c,customClassName:"nav-icon ps-4"})}]}]),he=function(){var e=(0,a.useState)([]),t=(0,O.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)([]),c=(0,O.Z)(i,2),s=c[0],l=c[1];(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("permissions"))||[];r(e)}),[]);var d=(0,a.useMemo)((function(){return pe.map((function(e){if(!e.permissions||o.i2.apply(void 0,[n].concat((0,re.Z)(e.permissions)))){if(e.items){var t=e.items.filter((function(e){return!e.permissions||o.i2.apply(void 0,[n].concat((0,re.Z)(e.permissions)))}));return(0,Y.Z)((0,Y.Z)({},e),{},{items:t})}return e}return null})).filter(Boolean)}),[n,pe]);return(0,a.useEffect)((function(){l(d)}),[d]),s},ve=function(){var e=(0,M.I0)(),t=(0,M.v9)((function(e){return e.sidebarUnfoldable})),n=(0,M.v9)((function(e){return e.sidebarShow})),r=(0,g.X)(),i=r.darkMode,s=(r.setDarkMode,(0,V.useMutation)(T.LE).mutate),l=he();(0,a.useEffect)((function(){s("",{onSuccess:function(e){localStorage.setItem("permissions",JSON.stringify(e.permissions))},onError:function(e){console.log(e)}})}),[]);var d=JSON.parse(localStorage.getItem("permissions")),u=(0,o.Z_)(d,o.BA,o.H2),m=(0,o.Z_)(d,o.vw,o.H2);(0,o.Z_)(d,o.JK,o.H2),(0,o.Z_)(d,o.iH,o.H2);return(0,c.jsxs)(p.z3,{position:"fixed",unfoldable:t,visible:n,onVisibleChange:function(t){e({type:"set",sidebarShow:t})},className:"sidebar-light ".concat(i?"sidebar-dark":""),children:[(0,c.jsx)(p.Dl,{className:"d-none d-md-flex sidebar-light ".concat(i?"sidebar-dark":""),to:"/",children:(0,c.jsx)("div",{style:{fontSize:"25px"},children:m&&!u&&(0,c.jsx)("span",{children:localStorage.getItem("organizationName")})})}),(0,c.jsx)(p.Xk,{children:(0,c.jsx)(ae.Z,{children:(0,c.jsx)(ne,{items:l})})})]})},ge=a.memo(ve),xe=n(46429),je=n(27817),be=function(e){var t=e.children,n=e.href,a="https://coreui.io/react/docs/".concat(n);return(0,c.jsxs)("div",{className:"example",children:[(0,c.jsxs)(p.n2,{variant:"tabs",children:[(0,c.jsx)(p.U6,{children:(0,c.jsxs)(p.AQ,{href:"#",active:!0,children:[(0,c.jsx)(z.Z,{icon:xe.B,className:"me-2"}),"Preview"]})}),(0,c.jsx)(p.U6,{children:(0,c.jsxs)(p.AQ,{href:a,target:"_blank",children:[(0,c.jsx)(z.Z,{icon:je.I,className:"me-2"}),"Code"]})})]}),(0,c.jsx)(p.gr,{className:"rounded-bottom",children:(0,c.jsx)(p.IA,{className:"p-3 preview",visible:!0,children:t})})]})},Se=a.memo(be)},52036:function(e,t,n){n.d(t,{$:function(){return o}});var a=n(78983),r=(n(72791),n(99579)),i=n(80184),o=function(e){var t=e.title,n=e.content,o=e.onClose,c=e.isOpen,s=(0,r.X)(),l=s.darkMode;s.setDarkMode;return(0,i.jsxs)(a.Tk,{visible:c,onClose:o,children:[(0,i.jsx)(a.p0,{closeButton:!0,className:"modal-light ".concat(l?"modal-dark":""),children:(0,i.jsx)(a.fl,{id:"".concat(l?"heading-dark":""),children:t})}),(0,i.jsx)(a.sD,{className:"modal-light pt-0 ".concat(l?"modal-dark":""),children:n})]})}},13524:function(e,t,n){n.d(t,{_:function(){return a}});var a="http://ec2-13-233-60-110.ap-south-1.compute.amazonaws.com:8000/"},66757:function(e,t,n){n.d(t,{BA:function(){return r},H2:function(){return a},JK:function(){return o},Z_:function(){return l},i2:function(){return d},iH:function(){return c},t4:function(){return s},vw:function(){return i}});var a="view",r="organization",i="facility",o="department",c="device",s="sensor",l=function(e,t,n){return null===e||void 0===e?void 0:e.includes("".concat(t,"_").concat(n))},d=function(e,t){return null===e||void 0===e?void 0:e.includes("".concat(t))}},52178:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(80491),r=function(e){(0,a.u)(e)}},80491:function(e,t,n){n.d(t,{b:function(){return i},u:function(){return o}});var a=n(31243),r=n(13524),i=a.Z.create({baseURL:r._,timeout:5e4,headers:{"Content-Type":"application/json"}}),o=function(e){e?i.defaults.headers.common.Authorization="Bearer ".concat(e):delete i.defaults.headers.common.Authorization}},17834:function(e,t,n){n.d(t,{BF:function(){return g},D2:function(){return d},F4:function(){return v},Fi:function(){return l},HH:function(){return p},I8:function(){return m},LE:function(){return s},Mz:function(){return h},NA:function(){return b},XH:function(){return f},bU:function(){return c},iU:function(){return u},oL:function(){return x},uj:function(){return j}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("auth/login",{email:t.email,password:t.password});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("general");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("organization",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("organization");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("facility/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("organization/".concat(t.editData.customerid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department/by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("organization/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("auth/get-reset-token",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/auth/reset-password",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t.file),n.append("organizationName",t.organizationName),(0,i.A)(localStorage.getItem("token")),e.prev=4,e.next=7,o.b.post("organization/upload",n,{headers:{"Content-Type":"multipart/form-data"}});case 7:return r=e.sent,c=r.data,e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(4),console.error("Error uploading file:",e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=4,o.b.patch("organization/".concat(localStorage.getItem("organizationid")),{logo:t});case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(t.token),e.next=4,o.b.patch("alert/update-alert/".concat(t.id),{status:t.status});case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},46522:function(e,t,n){n.d(t,{BZ:function(){return l},If:function(){return s},pF:function(){return c},q3:function(){return d}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("department/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("department",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("department/".concat(t.editData.departmentid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},96062:function(e,t,n){n.d(t,{S6:function(){return p},V6:function(){return l},Xo:function(){return s},a8:function(){return m},hd:function(){return u},kr:function(){return h},n1:function(){return f},oy:function(){return d}});var a=n(74165),r=n(15861),i=n(91933),o=n(52178),c=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.get("device");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function l(){return(0,i.useQuery)(["repos"],s)}var d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.get("device/by-depId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.get("device/by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.get("device/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.delete("device/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.post("device",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,c.b.patch("device/".concat(t.editData.deviceid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},56019:function(e,t,n){n.d(t,{I$:function(){return v},IN:function(){return l},LP:function(){return f},OH:function(){return h},Qc:function(){return d},Tn:function(){return m},Zo:function(){return p},_t:function(){return g},bM:function(){return s},fb:function(){return c},zs:function(){return u}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("/sensor/get-sensors-by-deviceId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-depId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/unAssigned-from-device/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("sensor/assign-sensor",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/update-sensor/".concat(t.editData.sensorid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("SensorDeviceConfiguration/CreateSensorDeviceConfiguration",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-sensors-configuration/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.handler,t.id,(0,i.A)(localStorage.getItem("token")),e.next=4,o.b.patch("sensor/update-sensors-configuration",n);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},45013:function(e,t,n){n.d(t,{WH:function(){return c},dL:function(){return s},nO:function(){return d},sB:function(){return l}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("facility");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("facility/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("facility",{facility_type:t.facility_type,name:t.name,userid:t.userid,customerid:Number(t.customerid),email:t.email,contactphonenumber:t.contactphonenumber,contactname:t.contactname,timezone:t.timezone,currency:t.currency,address:t.address,street:t.street,city:t.city,postcode:+t.postcode,latitude:+t.latitude,longitude:+t.longitude,isfacilityadmin:!0});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("facility/".concat(t.editData.facilityid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},25741:function(e,t,n){n.d(t,{Kj:function(){return d},S9:function(){return l},aI:function(){return s},fY:function(){return c},iR:function(){return u},zw:function(){return m}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-assign-sensors");case 3:return t=e.sent,n=t.data,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-unassigned-sensors");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-all-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/unAssigned/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("sensor/assign-sensor",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("/sensor/update-sensor/".concat(t.handler.id),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18393:function(e,t,n){n.d(t,{Jd:function(){return b},Lg:function(){return h},M6:function(){return l},Rp:function(){return v},Vm:function(){return u},Vt:function(){return p},XZ:function(){return x},Xk:function(){return f},Z$:function(){return c},cn:function(){return m},dk:function(){return g},jm:function(){return d},lI:function(){return j},vx:function(){return s}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/unassigned-users");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/assigned-users");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/unassigned-users/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/assigned-users/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("roles");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("user/create",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("user/".concat(t.editData.userid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("facility/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("department/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("device/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteFacilityStaff?userid=".concat(t.userid,"&facilityid=").concat(t.facilityid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteDepartmentStaff?userid=".concat(t.userid,"&departmentid=").concat(t.departmentid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteDeviceStaff?userid=".concat(t.userid,"&deviceid=").concat(t.deviceid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10781:function(e,t,n){var a=(0,n(65847).ZP)((function(e){return{data:[],addData:function(t){return e((function(e){return{data:[t]}}))}}}));t.Z=a},96623:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=n(29439),r=n(36459),i=n(72791),o=n(78983),c=n(59513),s=n.n(c),l=n(13496),d=n(58290),u=n(80184);var m=function(e){e.sensorId;var t=e.sensorsData,n=e.loading,a=function(){if(!t)return{updatedOptions:{chart:{type:"area",height:350},xaxis:{categories:[]}},updatedSeries:[]};var e=t.sensorName,n=(new Date).toISOString().split("T")[0],a=t[n]||[];return{updatedOptions:{chart:{type:"area",height:350},xaxis:{categories:a.map((function(e){var t=new Date(e.reading_timestamp);return"".concat(t.getHours(),":").concat((t.getMinutes()<10?"0":"")+t.getMinutes())}))}},updatedSeries:[{name:e,data:a.map((function(e){return parseFloat(e.measure)}))}]}}(),r=a.updatedOptions,i=a.updatedSeries;return(0,u.jsx)("div",{className:"blue-top",children:(0,u.jsx)("div",{className:"main-container",children:n?(0,u.jsx)(d.Z,{active:!0,paragraph:{rows:3}}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("p",{style:{color:"black"},children:null===t||void 0===t?void 0:t.sensorName})}),(0,u.jsx)("div",{id:"chart",children:(0,u.jsx)(l.Z,{options:r,series:i,type:"area",height:350})})]})})})},f=n(99579),p=n(57689);function h(e){var t;(0,r.Z)(e);var n=(null===(t=(0,p.TH)().state)||void 0===t?void 0:t.sensorGraphData)||{},c=(0,i.useState)(new Date),l=(0,a.Z)(c,2),d=l[0],h=l[1],v=(0,i.useState)(new Date),g=(0,a.Z)(v,2),x=g[0],j=g[1],b=(0,p.s0)(),S=function(e){var t=e.value,n=e.onClick;return(0,u.jsx)("div",{className:"custom-input",children:(0,u.jsx)("input",{type:"text",value:t,onClick:n,placeholder:"Select a date"})})},y=(0,i.useState)(),k=(0,a.Z)(y,2),Z=(k[0],k[1]),I=(0,i.useState)(!0),w=(0,a.Z)(I,2),N=w[0],A=w[1],C=(0,i.useState)(),E=(0,a.Z)(C,2),D=E[0];E[1];(0,i.useEffect)((function(){d.toISOString(),x.toISOString();A(!1),Z({})}),[d,x]);var F=(0,f.X)(),O=F.darkMode;F.setDarkMode;return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{style:{flexDirection:"column",padding:{base:"10px",md:"20px"}},children:[(0,u.jsx)(o.u5,{w:"20",onClick:function(){b("/dashboard")},children:"Back"}),(0,u.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:(0,u.jsx)(o.rb,{className:"d-inline-flex p-2 docs-highlight",style:{display:"flex ",gap:"10px"},children:(0,u.jsxs)("div",{className:"DatePicker",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("p",{style:{fontWeight:"bold"},id:"".concat(O?"heading-dark":""),children:"Select a Start Date"})}),(0,u.jsx)(s(),{className:" form-select ".concat(O?"select-dark":""),selected:d,onChange:function(e){return h(e)},name:"startDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select start date",customInput:(0,u.jsx)(S,{})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("p",{style:{fontWeight:"bold"},id:"".concat(O?"heading-dark":""),children:"Select an End Date"})}),(0,u.jsx)(s(),{className:" form-select ".concat(O?"select-dark":""),selected:x,onChange:function(e){return j(e)},name:"endDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select end date",customInput:(0,u.jsx)(S,{})})]})]})})}),(0,u.jsx)("div",{children:(0,u.jsx)(m,{sensorId:D,sensorsData:n,loading:N})})]})})}},32152:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(4942),r=n(29439),i=n(72791),o=n(99579),c=n(66757),s=n(78983),l=(n(93076),n(83970),n(80184)),d=n(91933),u=n(42943),m=n(44854),f=n(81561),p=n(46178),h=n(54546),v=n(31517),g=n(54566),x=n(1278),j=n(3050),b=n(65863),S=n(24846),y=n(93433),k=n(1413),Z=n(13524),I=n(58290);var w=n.p+"static/media/battery.1affb5b487e65028f8caf95b8e5df642.svg",N=n(57689),A=n(31457),C=(0,i.memo)((function(e){var t=e.minValue,n=e.maxValue,a=e.currentValue,c=e.readingTime,s=e.awsId,d=e.devicename,u=(Math.min(Math.max(a,t),n),null===a?0:(a-t)/(n-t)),m=(0,o.X)().darkMode,f=(0,i.useState)(!0),p=(0,r.Z)(f,2),h=p[0],v=p[1],g=(0,i.useState)(0),x=(0,r.Z)(g,2),j=(x[0],x[1]);function b(e,t){var n=t.slice(0,23).replace(" ","T")+"Z";t=new Date(n),e=new Date(e);var a=!isNaN(t.getTime()),r=!isNaN(e.getTime());if(!a||!r)return(0,l.jsx)("span",{style:{color:"red"},children:"Offline"});var i=Math.floor((e-t)/1e3),o=i%60,c=Math.floor(i/60)%60,s=Math.floor(i/3600);return s>0?(0,l.jsx)("span",{style:{color:"red"},children:"".concat(s," ").concat(1!==s?"hours":"hour"," ago")}):c>0?(0,l.jsx)("span",{style:{color:"red"},children:"".concat(c," ").concat(1!==c?"minutes":"minute"," ago")}):(0,l.jsx)("span",{style:{color:"red"},children:"".concat(o," ").concat(1!==o?"seconds":"second"," ago")})}(0,i.useEffect)((function(){var e=setInterval((function(){h?(v(!1),j(b(new Date,c))):j((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[h,c]);var S=(0,i.useMemo)((function(){return(0,l.jsx)(A.Z,{id:"gauge-chart2",nrOfLevels:20,colors:["#2ECC71","#ca0035"],arcWidth:.3,percent:u,needleColor:"#BFC9CA",animate:!0,animDelay:1e3,animateDuration:2e3,style:{height:"auto",width:"auto"}})}),[u]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsxs)("div",{style:{marginRight:"00px"},children:[d,"-",s," "]}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{children:S}),(0,l.jsxs)("div",{className:"text",children:[(0,l.jsxs)("div",{className:"Min-Max  d-flex",style:{gap:"28px"},id:"".concat(m?"heading-dark":""),children:[(0,l.jsxs)("span",{children:[t," ",(0,l.jsx)("span",{children:"\u2103"})]}),(0,l.jsxs)("span",{children:[a," ",(0,l.jsx)("span",{children:"\u2103"})]}),(0,l.jsxs)("span",{children:[n," ",(0,l.jsx)("span",{children:"\u2103"})]})]}),(0,l.jsx)("div",{style:{marginTop:"3px",color:isNaN(a)?"red":"black"},children:b(new Date,c)})]})]})}));C.displayName="Gauge";var E=C,D=n(44925),F=n(74165),O=n(15861),M=n(52178),z=n(80491),_=["awsSensorId"],H=JSON.parse(localStorage.getItem("permissions")),L=((0,c.Z_)(H,c.BA,c.H2),(0,c.Z_)(H,c.vw,c.H2),(0,c.Z_)(H,c.JK,c.H2),(0,c.Z_)(H,c.iH,c.H2),function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,z.b.get("sensor/get-assign-sensors-widget/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,z.b.post("dashboard/find",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,z.b.post("aws/save-sensor-data",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t,n){var a,r;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=7;break}return(0,M.A)(localStorage.getItem("token")),e.next=4,z.b.post("sensor/checkpoint-report/".concat(t.id),t.payload);case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a,r,i;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.awsSensorId,a=(0,D.Z)(t,_),(0,M.A)(localStorage.getItem("token")),e.next=5,z.b.post("sensor/graph-report/".concat(n),a);case 5:return r=e.sent,i=r.data,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){e.setAlarms;var t,n=e.setoffline,a=e.setOk,u=e.setwarnings,m=(e.showAlarms,e.showoffline),f=e.showok,p=e.showwarnings,h=(0,d.useMutation)(L).mutate,v=(0,d.useMutation)(T).mutate,g=(0,i.useState)(),x=(0,r.Z)(g,2),j=(x[0],x[1]),b=(0,i.useState)([]),S=(0,r.Z)(b,2),A=S[0],C=S[1],D=(0,i.useState)(!1),F=(0,r.Z)(D,2),O=F[0],M=F[1],z=JSON.parse(localStorage.getItem("permissions")),_=(0,c.Z_)(z,c.BA,c.H2);(0,c.Z_)(z,c.vw,c.H2),(0,c.Z_)(z,c.JK,c.H2),(0,c.Z_)(z,c.iH,c.H2);function H(e){h(e,{onSuccess:function(e){j(e.data),C(e.data)},onError:function(e){}})}var R=function(e){var t=(new Date).toISOString();!function(e,t){v(e,{onSuccess:function(e){var n={sensorGraphData:e.data,item:t};Y("/sensor/graph",{state:n})},onError:function(e){}})}({sensorTypeId:e.sensorTypeId,awsSensorId:e.awsSensorId,startDate:t,endDate:t},e)};localStorage.getItem("OrganizationId");(0,i.useEffect)((function(){var e=function(){if(_){var e=localStorage.getItem("OrganizationId");null!==e&&void 0!==e&&"Select Organization"!==e&&(M(!0),H(e),M(!1))}else{var t=localStorage.getItem("organizationid");null!==t&&(M(!0),H(t),M(!1))}};e();var t=setInterval(e,3e5);return function(){return clearInterval(t)}}),[_]),(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");if(null!==e&&void 0!==e&&"Select Organization"!==e){var t=new EventSource("".concat(Z._,"sse/").concat(e));return t.onmessage=function(e){var t=JSON.parse(e.data);j((function(e){var n=e.map((function(e){return e.awsSensorId===t.aws_sensorid&&e.property===t.property?(0,k.Z)((0,k.Z)({},e),{},{value:t.value,readingDateTime:t.readingDateTime,batteryValue:t.batteryValue}):e}));return console.log(n),C(n),n}))},function(){t.close()}}}),[]);var q=0,V=0,X=0,B=[],U=[],P=[];null===A||void 0===A||A.forEach((function(e){null!==(null===e||void 0===e?void 0:e.value)&&((null===e||void 0===e?void 0:e.value)<(null===e||void 0===e?void 0:e.minValue)||(null===e||void 0===e?void 0:e.value)>(null===e||void 0===e?void 0:e.maxValue))?(q++,B.push(e)):null===(null===e||void 0===e?void 0:e.value)?(V++,U.push(e)):(X++,P.push(e))})),u(q),n(V),a(X);var W=A;W=p?B:m?U:f?P:A;var Y=(0,N.s0)(),G=(0,o.X)(),J=G.darkMode;G.setDarkMode;return(0,l.jsx)("div",{className:"card-top",style:{width:"100vw"},children:(0,l.jsx)(s.rb,{className:"sensor_Container my-5 justify-content-start",children:O?(0,l.jsxs)(l.Fragment,{children:[(0,y.Z)(Array(2)).map((function(e,t){return(0,l.jsx)(s.b7,{sm:"12",md:"6",lg:"3",className:" ".concat(J?"table_container_dark":"table_container_light"),children:(0,l.jsx)(s.xH,{children:(0,l.jsx)(s.sl,{children:(0,l.jsx)(I.Z,{active:!0,paragraph:{rows:3}})})})},t)})),(0,l.jsx)("div",{})]}):null===(t=W)||void 0===t?void 0:t.map((function(e,t){return(0,l.jsx)(s.b7,{sm:"12",className:" ".concat(J?"table_container_dark":"table_container_light"),style:{border:"1px solid rgba(163, 163, 163, 0.32)",borderRadius:"5px",padding:"0",width:"auto",height:"100%"},children:(0,l.jsxs)(s.xH,{style:{cursor:"pointer"},className:" ".concat(J?"table_container_dark":"table_container_light"),onClick:function(){return R(e)},children:[(0,l.jsxs)(s.bn,{className:"d-flex justify-content-between p-2 align-items-center",id:"".concat(J?"heading-dark":""),style:{height:"45px"},children:[(0,l.jsx)("p",{className:"m-0",children:null!==e&&void 0!==e&&e.sensorName?e.sensorName:e.sensorId}),(0,l.jsxs)(s.b7,{className:"battery",children:[(0,l.jsx)("img",{src:w,alt:"Battery",style:{width:"20px",height:"20px",marginLeft:"5px"}}),(0,l.jsx)("div",{style:{color:e.batteryValue<3.5?"red":"green"},id:"".concat(J?"heading-dark":""),children:e.batteryValue})]})]}),(0,l.jsx)(s.sl,{style:{backgroundColor:null===(null===e||void 0===e?void 0:e.value)?"rgb(157, 223, 228)":(null===e||void 0===e?void 0:e.value)<(null===e||void 0===e?void 0:e.minValue)||(null===e||void 0===e?void 0:e.value)>(null===e||void 0===e?void 0:e.maxValue)?"rgb(238, 141, 141)":"rgb(144, 238, 144 )"},children:(0,l.jsx)(E,{devicename:null===e||void 0===e?void 0:e.deviceName,awsId:null===e||void 0===e?void 0:e.awsSensorId,id:"".concat(J?"heading-dark":""),minValue:null===e||void 0===e?void 0:e.minValue,maxValue:null===e||void 0===e?void 0:e.maxValue,currentValue:isNaN(null===e||void 0===e?void 0:e.value)?0:null===e||void 0===e?void 0:e.value,readingTime:null!==(null===e||void 0===e?void 0:e.value)?null===e||void 0===e?void 0:e.readingDateTime:""})})]})},t)}))})})},B=n(59513),U=n.n(B),P=(n(68639),function(e){e.date,e.day;var t=e.data,n=(0,o.X)(),a=n.darkMode,c=(n.setDarkMode,(0,i.useState)(t||[])),s=(0,r.Z)(c,2),d=s[0],u=s[1];(0,i.useEffect)((function(){t&&u(t)}),[t]);var m=(0,y.Z)(new Set(d.map((function(e){return e.date})))),f=(0,y.Z)(new Set(d.flatMap((function(e){return e.readings.map((function(e){return e.interval}))})))),p=new Map;return d.forEach((function(e){var t=e.aws_id,n=e.sensorValue,a="".concat(t,"-").concat(n),r=p.get(a)||{awsId:t,sensorName:n,measures:[]};f.forEach((function(t){var n=e.readings.filter((function(e){return e.interval===t})).map((function(t){return{measure:t.measure,interval:t.interval,min:e.min,max:e.max}}));r.measures.push(n)})),p.set(a,r)})),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("table",{className:"w-100 hccp_report_table",children:[(0,l.jsxs)("thead",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{id:"".concat(a?"heading-dark":""),children:"Sensor Name"}),m.map((function(e){return(0,l.jsx)("th",{id:"".concat(a?"heading-dark":""),colSpan:f.length,children:e},e)}))]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{}),m.map((function(){return f.map((function(e){return(0,l.jsx)("th",{children:"".concat(e,":00")},e)}))}))]})]}),(0,l.jsx)("tbody",{children:(0,y.Z)(p.values()).map((function(e){var t=e.awsId,n=e.sensorName,r=e.measures;return(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{id:"".concat(a?"heading-dark":""),children:[n,"-",t]}),r.flat().map((function(e,a){var r=e.measure,i=(e.interval,e.min),o=e.max;return 0===parseFloat(r)?(0,l.jsx)("td",{style:{backgroundColor:"lightgrey",border:"3px solid #bababa",padding:"5px"},children:"n/a"},"".concat(t,"-").concat(n,"-").concat(a)):(0,l.jsx)("td",{style:{backgroundColor:parseFloat(r)>parseFloat(o)||parseFloat(r)<parseFloat(i)?"#FF0000":"#90EE90",border:"3px solid #bababa",padding:"5px"},children:r},"".concat(t,"-").concat(n,"-").concat(a))}))]},"".concat(t,"-").concat(n))}))}),";"]})})}),W=n(24270);var Y=function(){var e=JSON.parse(localStorage.getItem("permissions")),t=(0,c.Z_)(e,c.BA,c.H2),n=((0,c.Z_)(e,c.vw,c.H2),(0,c.Z_)(e,c.JK,c.H2),(0,c.Z_)(e,c.iH,c.H2),(0,i.useState)(new Date)),a=(0,r.Z)(n,2),u=a[0],m=a[1],f=(0,i.useState)(1),p=(0,r.Z)(f,2),h=p[0],v=p[1],g=(0,i.useState)([]),x=(0,r.Z)(g,2),j=x[0],b=x[1],S=(0,i.useState)([]),y=(0,r.Z)(S,2),Z=y[0],I=y[1],w=(0,i.useState)([]),N=(0,r.Z)(w,2),A=N[0],C=N[1],E=(u.toISOString(),(0,o.X)()),D=E.darkMode,F=(E.setDarkMode,(0,d.useMutation)(q).mutate),O=(0,d.useMutation)(V).mutate;function M(e,t){O({payload:e,id:t},{onSuccess:function(e){var t,n,a;b(null===(t=e.data)||void 0===t?void 0:t.checkPoints),C(null===(n=e.data)||void 0===n?void 0:n.intervals),I(null===(a=e.data)||void 0===a?void 0:a.sensors)},onError:function(e){}})}(0,i.useEffect)((function(){var e=function(){var e;F(e,{onSuccess:function(e){},onError:function(e){}})};e();var t=setInterval(e,3e5);return function(){return clearInterval(t)}}),[]),(0,i.useEffect)((function(){var e={days:h,startDate:u.toISOString(),sensorIds:[]};if(t){var n=localStorage.getItem("OrganizationId");null!==n&&void 0!==n&&"Select Organization"!==n&&M(e,n)}else M(e,localStorage.getItem("organizationid"))}),[u,h,t]);var z=(0,i.useState)([]),_=(0,r.Z)(z,2),H=_[0],L=_[1];return(0,l.jsxs)(s.xH,{className:"table_container_light ".concat(D?"table_container_dark":""),style:{marginTop:"2rem",borderRadius:"5px",padding:"25px",border:"1px solid rgba(163, 163, 163, 0.32)"},children:[(0,l.jsx)("h3",{id:"".concat(D?"heading-dark":""),children:"CheckPoint Report"}),(0,l.jsx)("form",{className:"d-flex",children:(0,l.jsxs)("div",{className:"d-flex gap-5 mt-2 ",children:[(0,l.jsxs)("div",{className:"Custom-Date items-center d-flex gap-2 w-50",children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),children:"Select a Date"}),(0,l.jsx)(U(),{className:"date form-select ".concat(D?"select-dark":""),selected:u,name:"startDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select a date",onChange:function(e){m(e),M({days:h,startDate:e.toISOString()})}})]}),(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),style:{marginRight:"20px",marginLeft:"30px"},children:"Select Sensors"}),(0,l.jsx)(W.ZP,{isMulti:!0,className:"form-select ".concat(D?"select-dark":""),value:H.map((function(e){var t;return{label:null===(t=Z.find((function(t){return t.sensorTypeId===e})))||void 0===t?void 0:t.sensorValue,value:e}})),options:Z.map((function(e){return{label:e.sensorValue,value:e.sensorTypeId}})),onChange:function(e){var t=e.map((function(e){return e.value}));L(t)},styles:{container:function(e){return(0,k.Z)((0,k.Z)({},e),{},{width:300})}}}),(0,l.jsx)("button",{onClick:function(e){e.preventDefault();var n={days:h,startDate:u.toISOString(),sensorIds:H};M(n,t?localStorage.getItem("OrganizationId"):localStorage.getItem("organizationid"))},style:{width:"100px",height:"45px",borderColor:"lightgray",borderBottomColor:"lightgray",borderRadius:"5px",boxShadow:"3px 3px  0 rgba(212, 211, 209, 0.9) ",marginLeft:"10px",marginTop:"0px"},children:"Submit"}),(0,l.jsxs)("div",{className:"d-flex",style:{marginRight:"0px"},children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),style:{marginRight:"20px",marginLeft:"30px"},children:"Days"}),(0,l.jsx)("select",{className:"form-select ".concat(D?"select-dark":""),value:h,style:{width:"80px"},onChange:function(e){var t=Number(e.target.value);v(t),M({days:t,startDate:u.toISOString()})},children:[1,2,3,4,5,6,7].map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))})]}),(0,l.jsx)("div",{className:"d-flex gap-2",style:{marginLeft:"5px"},children:null===Object||void 0===Object?void 0:Object.entries(A).map((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return(0,l.jsx)("button",{color:"primary",className:"float-end mr-3",style:{width:"50px",height:"45px",borderColor:"lightgray",borderBottomColor:"lightgray",borderRadius:"5px",boxShadow:"3px 3px  0 rgba(212, 211, 209, 0.9) "},onClick:function(e){return e.preventDefault()},children:n},n)}))})]})]})}),(0,l.jsx)("div",{className:"overflow-x-scroll w-100",children:(0,l.jsx)(P,{date:u,day:h,data:j})})]})},G=(n(96623),function(e){var t=e.name,n=e.count,a=e.icon,r=localStorage.getItem("OrganizationId"),i=(0,o.X)(),c=i.darkMode,s=(i.setDarkMode,(0,k.Z)((0,k.Z)({},r&&"Select Organization"!==r&&{width:"20%"}),{},{visibility:"visible"}));return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"item wow fadeInUpBig animated animated",style:s,id:"".concat(c?"count-dark":"count-light"),children:[(0,l.jsx)(S.Z,{icon:a,alt:"Count"}),(0,l.jsx)("h3",{id:"".concat(c?"heading-dark":""),children:n}),(0,l.jsx)("span",{}),(0,l.jsx)("p",{id:"".concat(c?"heading-dark":""),children:t})]})})}),J=n(18043);var Q=function(){var e=(0,J.U)().dispatch,t=((0,o.X)().departmentId,function(){return e({type:"HIDE_LOADER"})}),n=(0,d.useMutation)(R).mutate,y=JSON.parse(localStorage.getItem("permissions")),k=(0,c.Z_)(y,c.BA,c.H2),Z=(0,c.Z_)(y,c.vw,c.H2),I=(0,c.Z_)(y,c.JK,c.H2),w=((0,c.Z_)(y,c.iH,c.H2),(0,i.useState)(0)),N=(0,r.Z)(w,2),A=N[0],C=N[1],E=(0,i.useState)(0),D=(0,r.Z)(E,2),F=D[0],O=D[1],M=(0,i.useState)(0),z=(0,r.Z)(M,2),_=z[0],H=z[1],L=(0,i.useState)(0),q=(0,r.Z)(L,2),V=q[0],T=q[1],B=(0,i.useState)(0),U=(0,r.Z)(B,2),P=U[0],W=U[1],Q=(0,i.useState)(0),K=(0,r.Z)(Q,2),$=K[0],ee=K[1],te=localStorage.getItem("OrganizationId"),ne=localStorage.getItem("facilityId"),ae=localStorage.getItem("departmentId"),re=(0,o.X)(),ie=re.darkMode;re.setDarkMode;function oe(e,r){var i=(0,a.Z)({},r,Number(e));setTimeout((function(){n(i,{onSuccess:function(e){var n,a,r,i,o,c;C(null===(n=e.data.counts)||void 0===n?void 0:n.OrganizationCount),O(null===(a=e.data.counts)||void 0===a?void 0:a.FacilityCount),H(null===(r=e.data.counts)||void 0===r?void 0:r.DepartmentCount),T(null===(i=e.data.counts)||void 0===i?void 0:i.DeviceCount),W(null===(o=e.data.counts)||void 0===o?void 0:o.UnAssignedSensorCount),ee(null===(c=e.data.counts)||void 0===c?void 0:c.AssignedSensorCount),t()},onError:function(e){O(0),H(0),T(0),W(0),ee(0),t()}})}),0)}var ce=(0,i.useState)(0),se=(0,r.Z)(ce,2),le=se[0],de=se[1],ue=(0,i.useState)(0),me=(0,r.Z)(ue,2),fe=me[0],pe=me[1],he=(0,i.useState)(0),ve=(0,r.Z)(he,2),ge=ve[0],xe=ve[1],je=(0,i.useState)(0),be=(0,r.Z)(je,2),Se=be[0],ye=be[1],ke=(0,i.useState)(!1),Ze=(0,r.Z)(ke,2),Ie=Ze[0],we=Ze[1],Ne=(0,i.useState)(!1),Ae=(0,r.Z)(Ne,2),Ce=Ae[0],Ee=Ae[1],De=(0,i.useState)(!1),Fe=(0,r.Z)(De,2),Oe=Fe[0],Me=Fe[1],ze=(0,i.useState)(!1),_e=(0,r.Z)(ze,2),He=_e[0];_e[1];return(0,i.useEffect)((function(){var e,t;if(null!==ae&&void 0!==ae&&"Select Department"!==ae)e=ae,t="departmentid";else if(null!==ne&&void 0!==ne&&"Select Facility"!==ne)e=ne,t="facilityid";else if(null!==te&&void 0!==te){if("Select Organization"===te)return void oe();e=te,t="customerid"}void 0!==e&&void 0!==t?oe(e,t):oe()}),[ae,ne,te]),(0,l.jsxs)(l.Fragment,{children:[k?localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId")&&void 0!==localStorage.getItem("OrganizationId")||localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId")||localStorage.getItem("departmentId")&&"Select Department"!==localStorage.getItem("departmentId")?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{id:"".concat(ie?"heading-dark":""),children:"Conditions Summary"}),(0,l.jsx)("h6",{id:"".concat(ie?"heading-dark":""),children:"Keep track of your Sensor status"})]}),(0,l.jsxs)("div",{style:{marginTop:"30px",marginBottom:"30px",color:"black"},children:[(0,l.jsx)("h4",{id:"".concat(ie?"heading-dark":""),children:"Overview"}),(0,l.jsx)("button",{style:{borderRadius:"5px",padding:"5px"},onClick:function(){Me(!1),Ee(!1),we(!1)},children:"Clear Filter"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(s.rb,{className:"status_card_container",children:[(0,l.jsxs)(s.b7,{md:6,lg:3,className:"status_card",id:"status_card_red",onClick:function(){we(!0),Ee(!1),Me(!1)},children:[(0,l.jsx)(S.Z,{icon:u.D,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#FF0505"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#FF0505"},children:le}),(0,l.jsx)("p",{children:"Warning"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_yellow",children:[(0,l.jsx)(S.Z,{icon:m.R,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#DA582C"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#DA582C"},children:Se}),(0,l.jsx)("p",{children:"Alarm"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_green",onClick:function(){Me(!0),Ee(!1),we(!1)},children:[(0,l.jsx)(S.Z,{icon:f.F,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#32712F"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#32712F"},children:ge}),(0,l.jsx)("p",{children:"Ok"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_blue",onClick:function(){Ee(!0),we(!1),Me(!1)},children:[(0,l.jsx)(S.Z,{icon:p.s,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#349FC4"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#349FC4"},children:fe}),(0,l.jsx)("p",{children:"Offine"})]})]}),(0,l.jsx)(s.rb,{children:(0,l.jsx)(X,{setAlarms:ye,setoffline:pe,setOk:xe,setwarnings:de,showwarnings:Ie,showoffline:Ce,showok:Oe,showAlarms:He})})]}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y,{})})]})]}):null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{id:"".concat(ie?"heading-dark":""),children:"Conditions summary"}),(0,l.jsx)("h6",{id:"".concat(ie?"heading-dark":""),children:"Keep track of your Sensor status"})]}),(0,l.jsx)("div",{style:{marginTop:"30px",marginBottom:"30px",color:"black"},children:(0,l.jsx)("h4",{id:"".concat(ie?"heading-dark":""),children:"Overview"})}),(0,l.jsxs)(s.rb,{className:"status_card_container",children:[(0,l.jsxs)(s.b7,{md:6,lg:3,className:"status_card",id:"status_card_red",children:[(0,l.jsx)(S.Z,{icon:u.D,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#FF0505"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#FF0505"},children:le}),(0,l.jsx)("p",{children:"Warning"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_yellow",children:[(0,l.jsx)(S.Z,{icon:m.R,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#DA582C"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#DA582C"},children:Se}),(0,l.jsx)("p",{children:"Alram"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_green",children:[(0,l.jsx)(S.Z,{icon:f.F,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#32712F"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#32712F"},children:ge}),(0,l.jsx)("p",{children:"Ok"})]})]}),(0,l.jsxs)(s.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_blue",children:[(0,l.jsx)(S.Z,{icon:p.s,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(s.uS,{style:{color:"#349FC4"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#349FC4"},children:fe}),(0,l.jsx)("p",{children:"Offine"})]})]}),(0,l.jsx)(s.rb,{children:(0,l.jsx)(X,{setAlarms:ye,setoffline:pe,setOk:xe,setwarnings:de,showwarnings:Ie,showoffline:Ce,showok:Oe,showAlarms:He})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y,{})})})]}),(0,l.jsx)("div",{style:{color:"black",marginTop:"20px"},children:(0,l.jsx)(s.rb,{className:"my-3",style:{display:"flex",alignItems:"center",justifyContent:"space-around",flexDirection:"column",flexWrap:"wrap"},children:(0,l.jsxs)("div",{className:"projectFactsWrap",children:[k&&(!te||"Select Organization"===te)&&(0,l.jsx)(G,{name:"Organizations",icon:h.V,count:A}),Z&&(!ne||"Select Facility"===ne)&&(0,l.jsx)(G,{name:"Facilities",icon:v.g,count:F}),(0,l.jsx)(G,{name:"Devices ",icon:g.k,count:V}),I&&(!ae||"Select Department"===ae)&&(0,l.jsx)(G,{name:"Departments ",icon:x.e,count:_}),(0,l.jsx)(G,{name:"Assigned Sensors ",icon:j.o,count:$}),k&&(!te||"Select Organization"===te)&&(0,l.jsx)(G,{name:"UnAssigned Sensors ",icon:b.c,count:P})]})})})]})}},84254:function(e,t,n){var a=n(4942),r=n(1413),i=n(29439),o=n(72791),c=(n(39593),n(52036),n(78983)),s=n(24846),l=n(1278),d=n(66757),u=n(18043),m=(n(25741),n(56019)),f=n(96062),p=n(57689),h=n(99579),v=n(91933),g=n(80184);t.Z=function(e){var t,n,x=e.closeModal,j=e.saveHandler,b=e.data,S=(0,u.U)().dispatch,y=((0,f.V6)().data,(0,p.s0)(),(0,o.useState)([])),k=(0,i.Z)(y,2),Z=k[0],I=k[1],w=JSON.parse(localStorage.getItem("permissions")),N=(0,d.Z_)(w,d.BA,d.H2),A=((0,d.Z_)(w,d.vw,d.H2),(0,d.Z_)(w,d.JK,d.H2),(0,d.Z_)(w,d.iH,d.H2),(0,o.useState)(!1)),C=(0,i.Z)(A,2),E=(C[0],C[1],(0,o.useState)(!1)),D=(0,i.Z)(E,2),F=D[0],O=D[1],M=localStorage.getItem("OrganizationId"),z=localStorage.getItem("organizationid"),_=(0,o.useState)(),H=(0,i.Z)(_,2),L=H[0],R=H[1],q=(0,o.useState)({aws_sensorid:"",sensorname:"",deviceid:L,customerid:Number(M)}),V=(0,i.Z)(q,2),T=V[0],X=V[1];(0,o.useEffect)((function(){b&&X({customerid:b.customerid,aws_sensorid:b.aws_sensorid,sensorname:b.sensorname,deviceid:b.deviceid})}),[b]);var B=(0,v.useMutation)(m.bM),U=B.mutate,P=B.data,W=(0,v.useMutation)(f.Xo).mutate;var Y=(0,v.useMutation)(f.oy).mutate;var G=(0,v.useMutation)(f.a8).mutate;var J=(0,v.useMutation)(f.hd).mutate;(0,o.useEffect)((function(){N?U(M,{onSuccess:function(e){},onError:function(e){}}):N||U(z,{onSuccess:function(e){},onError:function(e){}})}),[]),(0,o.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),n=localStorage.getItem("departmentId");n&&"Select Department"!==n?Y(n,{onSuccess:function(e){I(e)},onError:function(e){}}):t&&"Select Facility"!==t?function(e){J(e,{onSuccess:function(e){I(e)},onError:function(e){}})}(t):e&&"Select Organization"!==e?function(e){G(e,{onSuccess:function(e){I(e)},onError:function(e){}})}(e):W("",{onSuccess:function(e){I(e)},onError:function(e){}})}),[localStorage.getItem("OrganizationId"),localStorage.getItem("facilityId"),localStorage.getItem("departmentId")]);var Q=function(e){var t=e.target,n=t.name,i=t.value,o=t.type,c=t.checked;X((0,r.Z)((0,r.Z)({},T),{},(0,a.Z)({},n,"checkbox"===o?c:i)))},K=(0,h.X)(),$=K.darkMode;K.setDarkMode;return(0,g.jsxs)(c.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:F,onSubmit:function(e){var t=e.currentTarget;T.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),O(!0),!0===t.checkValidity()&&(S({type:"SHOW_LOADER"}),j(T),e.preventDefault(),x())},children:[(0,g.jsxs)(c.b7,{md:12,children:[(0,g.jsx)(c.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationSensorId",children:"Sensor Id*"}),(0,g.jsxs)(c.LX,{"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid sensor id",name:"aws_sensorid",className:" form-select ".concat($?"select-dark":""),value:T.aws_sensorid,id:"validationSensorId",onChange:Q,disabled:!!b,children:[(0,g.jsx)("option",{children:"Select Sensors"}),null===P||void 0===P||null===(t=P.data)||void 0===t?void 0:t.map((function(e,t){return(0,g.jsx)("option",{value:e.aws_sensorid,children:e.aws_sensorid},t)}))]})]}),(0,g.jsxs)(c.b7,{md:12,children:[(0,g.jsx)(c.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationSensorname",children:"Sensor Name*"}),(0,g.jsxs)(c.YR,{children:[(0,g.jsx)(c.wV,{children:(0,g.jsx)(s.Z,{icon:l.e,alt:"typeSensorid"})}),(0,g.jsx)(c.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"sensorname",value:T.sensorname,onChange:Q,feedbackInvalid:" Sensor Name is required",id:"validationSensorname",required:!0})]})]}),(0,g.jsxs)(c.b7,{md:12,children:[(0,g.jsx)(c.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationDeviceSelection",children:"Equipment Selection*"}),(0,g.jsxs)(c.LX,{className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",name:"deviceSelection",value:L,feedbackInvalid:"Please select a valid Device Selection",id:"validationDeviceSelection",onChange:function(e){var t=parseInt(e.target.value,10)||0;R(t),X((0,r.Z)((0,r.Z)({},T),{},{deviceid:t}))},required:!0,children:[(0,g.jsx)("option",{children:"Select Equipment"}),null===Z||void 0===Z||null===(n=Z.data)||void 0===n?void 0:n.map((function(e){return(0,g.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})]}),(0,g.jsx)(c.b7,{xs:12,children:(0,g.jsx)(c.u5,{color:"primary",type:"submit",children:b?"Edit Device Sensor":"Add Device Sensor"})})]})}},39593:function(e,t,n){var a=n(4942),r=n(1413),i=n(44925),o=n(29439),c=n(72791),s=n(18043),l=n(99579),d=n(91933),u=n(78983),m=n(56019),f=n(57689),p=n(80184),h=["date_created","date_updated","is_deleted","updated_by","deviceId"];t.Z=function(e){var t=e.data,n=e.sensorData,v=(0,d.useMutation)(m.OH).mutate,g=(0,d.useMutation)(m._t).mutate,x=(0,c.useState)([]),j=(0,o.Z)(x,2),b=(j[0],j[1],(0,c.useState)(!1)),S=(0,o.Z)(b,2),y=S[0],k=(S[1],(0,c.useState)(!1)),Z=(0,o.Z)(k,2),I=Z[0],w=Z[1],N=(0,c.useState)(!1),A=(0,o.Z)(N,2),C=A[0],E=A[1],D=(0,c.useState)(!1),F=(0,o.Z)(D,2),O=F[0],M=F[1],z=(0,c.useState)(!1),_=(0,o.Z)(z,2),H=_[0],L=_[1],R=(0,s.U)().dispatch,q=(0,l.X)().setShowToast,V=function(){return R({type:"HIDE_LOADER"})},T=localStorage.getItem("sensorId"),X=localStorage.getItem("deviceid"),B=(0,c.useState)({property:"temp",name:"",minvalue:0,maxvalue:0,unit:"",description:"description",deviceId:Number(X),sensorId:Number(T),hidden:!1,is_active:!0}),U=(0,o.Z)(B,2),P=U[0],W=U[1],Y=(0,c.useState)({property:"temp2",name:"",maxvalue:0,minvalue:0,unit:"",description:"",deviceId:Number(X),sensorId:Number(T),hidden:!1,is_active:!0}),G=(0,o.Z)(Y,2),J=G[0],Q=G[1],K=(0,c.useState)({property:"co2",name:"",minvalue:0,maxvalue:0,unit:"",description:"",deviceId:Number(X),sensorId:Number(T),hidden:!1,is_active:!0}),$=(0,o.Z)(K,2),ee=$[0],te=$[1],ne=(0,c.useState)({property:"humidity",name:"",minvalue:0,maxvalue:0,unit:"",description:"",deviceId:Number(X),sensorId:Number(T),hidden:!1,is_active:!0}),ae=(0,o.Z)(ne,2),re=ae[0],ie=ae[1];(0,c.useEffect)((function(){if(t){var e={temp:"tempOne",temp2:"tempTwo",co2:"co2",humidity:"humidity"},n={name:"",minvalue:"",maxvalue:"",unit:"",description:"",deviceId:"",is_hidden:!1,is_active:!0};Object.keys(e).map((function(e){var a=t.find((function(t){return t.property===e}));if(a){a.date_created,a.date_updated,a.is_deleted,a.updated_by,a.deviceId;var o=(0,i.Z)(a,h);return(0,r.Z)((0,r.Z)({property:e},n),o)}return(0,r.Z)({property:e},n)})).forEach((function(t){var n=e[t.property];if(n)switch(n){case"tempOne":W(t);break;case"tempTwo":Q(t);break;case"co2":te(t);break;case"humidity":ie(t)}}))}}),[t]),(0,c.useEffect)((function(){t&&t.forEach((function(e){switch(e.property){case"temp":w(e.is_active);break;case"temp2":E(e.is_active);break;case"co2":M(e.is_active);break;case"humidity":L(e.is_active)}}))}),[t]);var oe=(0,c.useState)([]),ce=(0,o.Z)(oe,2),se=(ce[0],ce[1]),le=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var c="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(c)&&"minvalue"===n&&"maxvalue"===n||W((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,c))}))}else W((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},de=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var c="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(c)&&"minvalue"===n&&"maxvalue"===n||Q((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,c))}))}else Q((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},ue=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var c="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(c)&&"minvalue"===n&&"maxvalue"===n||te((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,c))}))}else te((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},me=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var c="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(c)&&"minvalue"===n&&"maxvalue"===n||ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,c))}))}else ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))};function fe(e){R({type:"SHOW_LOADER"}),setTimeout((function(){if(t){var a=n.sensorid;g({handler:e,id:a},{onSuccess:function(){V(),q((function(){return{show:!0,title:"Success",content:"Device Sensor Configuration Edited Successfully"}}))},onError:function(e){V(),q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})}else v(e,{onSuccess:function(){V(),q((function(){return{show:!0,title:"Success",content:"Device Sensor Configured Successfully"}}))},onError:function(e){V(),q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})}),0)}var pe=(0,f.s0)(),he=function(){pe("/devices-sensors")},ve=(0,l.X)(),ge=ve.darkMode;ve.setDarkMode;return(0,p.jsx)(u.xH,{className:"table_container_light p-5 ".concat(ge?"table_container_dark":""),children:(0,p.jsxs)(u.lx,{className:"row g-3 needs-validation",noValidate:!0,validated:y,onSubmit:function(e){e.preventDefault();var t=[],n=function(e){return(0,r.Z)((0,r.Z)({},e),{},{is_active:!0})};I&&t.push(n(P)),C&&t.push(n(J)),O&&t.push(n(ee)),H&&t.push(n(re)),se(t),fe(t),he()},children:[(0,p.jsx)(u.EC,{id:"tempOneCheckbox",label:"Temperature 1",className:"input-light   ".concat(ge?"input-dark":""),onChange:function(e){return t=e.target.checked,void w(t);var t},checked:I}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,p.jsx)(u.jO,{className:"input-light   ".concat(ge?"input-dark":""),type:"name",placeholder:"Enter Sensor Name",name:"name",value:P.name,onChange:le,feedbackInvalid:"Name is required",id:"temponeName",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:P.minvalue,onChange:le,feedbackInvalid:"Minimum value is required",id:"tempMin",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,p.jsx)(u.jO,{className:"input-light   ".concat(ge?"input-dark":""),type:"text",placeholder:"Enter Maximum Value",name:"maxvalue",value:P.maxvalue,onChange:le,feedbackInvalid:"Maximum Value is required",id:"tempMax",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,p.jsxs)(u.LX,{className:" form-select ".concat(ge?"select-dark":""),"aria-label":"Default select example",id:"tempunit",name:"unit",value:P.unit,onChange:le,feedbackInvalid:"unit is required",required:!0,children:[(0,p.jsx)("option",{children:"Open this select menu"}),(0,p.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,p.jsx)("option",{value:"C",children:"C*"}),(0,p.jsx)("option",{value:"F",children:"F-"})]})]}),(0,p.jsx)(u.b7,{xs:"auto",children:(0,p.jsx)(u.L8,{className:"input-light   ".concat(ge?"input-dark":""),id:"".concat(ge?"heading-dark":""),htmlFor:"validationTypeSensorId",label:"Hide on dashboard"})}),(0,p.jsxs)(u.lx,{children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,p.jsx)(u.PB,{className:"input-light   ".concat(ge?"input-dark":""),id:"temponedescribe",rows:3,name:"description",value:P.description,onChange:le,placeholder:"Describe Your Way"})]}),(0,p.jsx)(u.EC,{id:"tempTwoCheckbox",className:"input-light   ".concat(ge?"input-dark":""),label:"Temperature 2",onChange:function(e){return t=e.target.checked,void E(t);var t},checked:C}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Sensor Name",name:"name",value:J.name,onChange:de,feedbackInvalid:"Name is required",id:"temptwoName",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:J.minvalue,onChange:de,feedbackInvalid:"Minimum value is required",id:"validationMin",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,p.jsx)(u.jO,{className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:J.maxvalue,onChange:de,feedbackInvalid:"Maximum Value is required",id:"validationMax",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,p.jsxs)(u.LX,{"aria-label":"Default select example",id:"temptwounit",name:"unit",className:" form-select ".concat(ge?"select-dark":""),value:J.unit,onChange:de,feedbackInvalid:"unit is required",required:!0,children:[(0,p.jsx)("option",{children:"Open this select menu"}),(0,p.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,p.jsx)("option",{value:"C",children:"C*"}),(0,p.jsx)("option",{value:"F",children:"F-"})]})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,p.jsx)(u.EC,{className:"input-light   ".concat(ge?"input-dark":""),reverse:!0,id:"temptwoCheckbox1",name:"hidden",checked:J.hidden,onChange:de,label:"Hide on dashboard"})]}),(0,p.jsxs)(u.lx,{children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,p.jsx)(u.PB,{id:"temptwodescribe",className:"input-light   ".concat(ge?"input-dark":""),rows:3,name:"description",value:J.description,onChange:de,placeholder:"Describe Your Way"})]}),(0,p.jsx)(u.EC,{id:"co2Checkbox",className:"input-light   ".concat(ge?"input-dark":""),label:(0,p.jsxs)("span",{children:["CO",(0,p.jsx)("sub",{children:"2"})]}),onChange:function(e){return t=e.target.checked,void M(t);var t},checked:O}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Sensor Name",name:"name",value:ee.name,onChange:ue,feedbackInvalid:"Name is required",id:"co2Name",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:ee.minvalue,onChange:ue,feedbackInvalid:"Minimum value is required",id:"validationMin",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:ee.maxvalue,onChange:ue,feedbackInvalid:"Maximum Value is required",id:"validationMax",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,p.jsxs)(u.LX,{"aria-label":"Default select example",className:" form-select ".concat(ge?"select-dark":""),id:"co2unit",name:"unit",value:ee.unit,onChange:ue,feedbackInvalid:"unit is required",required:!0,children:[(0,p.jsx)("option",{children:"Open this select menu"}),(0,p.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,p.jsx)("option",{value:"C",children:"C*"}),(0,p.jsx)("option",{value:"F",children:"F-"})]})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,p.jsx)(u.EC,{reverse:!0,className:"input-light   ".concat(ge?"input-dark":""),id:"co2Checkbox1",name:"hidden",checked:ee.hidden,onChange:ue,label:"Hide on dashboard"})]}),(0,p.jsxs)(u.lx,{children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,p.jsx)(u.PB,{className:"input-light   ".concat(ge?"input-dark":""),id:"co2describe",rows:3,name:"description",value:ee.description,onChange:ue,placeholder:"Describe Your Way"})]}),(0,p.jsx)(u.EC,{id:"humidityCheckbox",className:"input-light   ".concat(ge?"input-dark":""),label:"Humidity",onChange:function(e){return t=e.target.checked,void L(t);var t},checked:H}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,p.jsx)(u.jO,{className:"input-light   ".concat(ge?"input-dark":""),type:"text",placeholder:"Enter Sensor Name",name:"name",value:re.name,onChange:me,feedbackInvalid:"Name is required",id:"humidityName",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:re.minvalue,onChange:me,feedbackInvalid:"Minimum value is required",id:"humidityMin",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,p.jsx)(u.jO,{type:"text",className:"input-light   ".concat(ge?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:re.maxvalue,onChange:me,feedbackInvalid:"Maximum Value is required",id:"humidityMax",required:!0})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,p.jsxs)(u.LX,{"aria-label":"Default select example",id:"humidityunit",name:"unit",className:" form-select ".concat(ge?"select-dark":""),value:re.unit,onChange:me,feedbackInvalid:"unit is required",required:!0,children:[(0,p.jsx)("option",{children:"Open this select menu"}),(0,p.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,p.jsx)("option",{value:"C",children:"C*"}),(0,p.jsx)("option",{value:"F",children:"F-"})]})]}),(0,p.jsxs)(u.b7,{xs:"auto",children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,p.jsx)(u.EC,{reverse:!0,className:"input-light   ".concat(ge?"input-dark":""),id:"humidityCheckbox1",name:"hidden",checked:re.hidden,onChange:me,label:"Hide on dashboard"})]}),(0,p.jsxs)(u.lx,{children:[(0,p.jsx)(u.L8,{id:"".concat(ge?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,p.jsx)(u.PB,{className:"input-light   ".concat(ge?"input-dark":""),id:"humiditydescribe",rows:3,name:"description",value:re.description,onChange:me,placeholder:"Describe Your Way"})]}),t?null:(0,p.jsx)(u.b7,{xs:"auto",children:(0,p.jsx)(u.u5,{variant:"outline",onClick:he,children:"Back"})}),(0,p.jsx)(u.b7,{xs:"auto",children:(0,p.jsx)(u.u5,{color:"primary",type:"submit",children:"Configure"})})]})})}},96624:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),c=n(57689),s=n(93001),l=n(52036),d=n(99579),u=n(18043),m=(n(17834),n(46522)),f=n(66757),p=n(74165),h=n(15861),v=n(52178),g=n(80491),x=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/find-admins?name=DepartmentAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.post("user/create/departmentAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.patch("user/staff/updateDepartmentStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.delete("user/staff/deleteDepartmentStaff?userid=".concat(t.userid,"&departmentid=").concat(t.departmentid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t,n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/find-user-staff?name=DepartmentUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/user-staff-by-facId/".concat(t,"?name=DepartmentUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/user-staff-by-depId/".concat(t,"?name=DepartmentUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/admins-by-facId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/admins-by-orgId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t){var n,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,g.b.get("user/admins-by-depId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=n(4942),C=n(1413),E=n(24846),D=n(51843),F=n(99412),O=n(31397),M=n(80184),z=function(e){var t=e.closeModal,n=e.saveHandler,s=e.data,l=(0,u.U)().dispatch,f=((0,c.s0)(),(0,i.useState)(!1)),p=(0,a.Z)(f,2),h=p[0],v=p[1],g=(0,o.useMutation)(m.pF).mutate,x=(0,i.useState)(),j=(0,a.Z)(x,2),b=j[0],S=j[1],y=(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",departmentid:"",is_admin:!1}),k=(0,a.Z)(y,2),Z=k[0],I=k[1];(0,i.useEffect)((function(){s&&I((function(){return{firstname:s.users.firstname,lastname:s.users.lastname,email:s.users.email,address:s.users.address,phonenumber:s.users.phonenumber,departmentid:s.departmentid,is_admin:!0,userid:s.userid}}))}),[s]);var w=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o="departmentid"===n?parseInt(a,10):a;I((0,C.Z)((0,C.Z)({},Z),{},(0,A.Z)({},n,"checkbox"===r?i:o)))};(0,i.useEffect)((function(){g("",{onSuccess:function(e){S(e.data)},onError:function(e){}})}),[]);var N=(0,d.X)(),z=N.darkMode;N.setDarkMode;return(0,M.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:h,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),v(!0),!0===a.checkValidity()&&(l({type:"SHOW_LOADER"}),n(Z),console.log(Z),t())},children:[(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Department Selection*"}),(0,M.jsxs)(r.LX,{name:"departmentid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationDepartment",value:Z.departmentid,onChange:w,className:" form-select ".concat(z?"select-dark":""),required:!0,disabled:!!s,children:[(0,M.jsx)("option",{children:"Select Department"}),null===b||void 0===b?void 0:b.map((function(e){return(0,M.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})]}),(0,M.jsxs)(r.b7,{md:6,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationFirstname",children:"First Name"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{}),(0,M.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"firstname",value:Z.firstname,onChange:w,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:6,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationLastname",children:"Last Name"}),(0,M.jsxs)(r.YR,{className:"has-validation",children:[(0,M.jsx)(r.wV,{}),(0,M.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"lastname",value:Z.lastname,onChange:w,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,M.jsxs)(r.YR,{className:"has-validation",children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:D.p,alt:"Email"})}),(0,M.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"email",value:Z.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;I((0,C.Z)((0,C.Z)({},Z),{},(0,A.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);v(c)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:F.i,alt:"Address"})}),(0,M.jsx)(r.jO,{className:"input-light pt-0 ".concat(z?"input-dark":""),type:"text",name:"address",value:Z.address,onChange:w,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:O.d,alt:"ContactNumber"})}),(0,M.jsx)(r.jO,{className:"input-light pt-0 ".concat(z?"input-dark":""),type:"text",name:"phonenumber",value:Z.phonenumber,onChange:w,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationFacilityName",children:"Is Admin"}),(0,M.jsx)(r.EC,{id:"flexCheckDefault",label:" ",checked:Z.is_admin,onChange:function(e){I((0,C.Z)((0,C.Z)({},Z),{},{is_admin:e.target.checked}))}})]}),(0,M.jsx)(r.b7,{xs:12,children:(0,M.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(z?"button-dark":""),type:"submit",children:s?"Edit Department Staff ":"Add Department Staff "})})]})},_=n(77868),H=[{key:"users.firstname",label:"Name"},{key:"departments.departmentname",label:"Department"},{key:"users.email",label:"Contact Email"},{key:"users.address",label:"Address"},{key:"users.phonenumber",label:"PhoneNumber"}],L=function(){var e=(0,u.U)().dispatch,t=(0,o.useMutation)(j).mutate,n=(0,o.useMutation)(b).mutate,p=function(){return e({type:"SHOW_LOADER"})},h=function(){return e({type:"HIDE_LOADER"})},v=(0,d.X)(),g=v.setShowToast,A=(v.departmentsData,v.setDepartmentsData,(0,o.useMutation)(m.pF).mutate,(0,i.useState)([])),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,o.useMutation)(x).mutate,O=(0,o.useMutation)(y).mutate,L=(0,i.useState)(!1),R=(0,a.Z)(L,2),q=R[0],V=R[1],T=(0,o.useMutation)(S),X=(0,i.useState)(),B=(0,a.Z)(X,2),U=B[0],P=B[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,i.useState)(!0),K=(0,a.Z)(Q,2),$=K[0],ee=(K[1],(0,i.useState)("Select Role")),te=(0,a.Z)(ee,2),ne=(te[0],te[1]),ae=(0,c.s0)(),re=JSON.parse(localStorage.getItem("permissions")),ie=(0,f.Z_)(re,f.BA,f.H2),oe=(0,f.Z_)(re,f.vw,f.H2),ce=(0,f.Z_)(re,f.JK,f.H2),se=((0,f.Z_)(re,f.iH,f.H2),function(){V(!1)});function le(){F("",{onSuccess:function(e){D(e.data),h()},onError:function(e){}})}var de=(0,o.useMutation)(I).mutate;function ue(e){de(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var me=(0,o.useMutation)(w).mutate;function fe(e){me(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var pe=(0,o.useMutation)(N).mutate;function he(e){pe(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var ve=(0,o.useMutation)(k).mutate;var ge=(0,o.useMutation)(k).mutate;var xe=(0,o.useMutation)(Z).mutate;function je(e){p(),setTimeout((function(){G?t(e,{onSuccess:function(){h(),g((function(){return{show:!0,title:"Success",content:"Department Staff Created Successfully"}})),le()},onError:function(e){h(),g((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):n({handler:e,editData:U},{onSuccess:function(){h(),g((function(){return{show:!0,title:"Success",content:"Department Staff Edited Successfully"}})),le()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),ae("/login")),h(),g((function(){return{show:!0,title:"Error",content:e.response.data,color:"#FF0000"}}))}})}),0)}var be=localStorage.getItem("OrganizationId"),Se=localStorage.getItem("facilityId"),ye=localStorage.getItem("departmentId");(0,i.useEffect)((function(){ie?void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&"Select Facility"!==Se&&!ye?ue(Se):be&&"Select Facility"===Se&&!ye?fe(be):be&&Se&&"Select Department"===ye?ue(Se):be&&Se&&"Select Department"!==ye&&he(ye):fe(be):le():oe?Se&&"Select Facility"!==Se?ye&&"Select Department"!==ye?"Select Department"!==ye&&he(ye):ue(Se):le():ce&&(ye&&"Select Department"!==ye?"Select Department"!==ye&&he(ye):le())}),[be,Se,ye]);var ke=(0,d.X)(),Ze=ke.darkMode;ke.setDarkMode;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(l.$,{title:G?"Add Department Satff":"Edit Department Staff",content:G?(0,M.jsx)(z,{closeModal:se,saveHandler:je}):(0,M.jsx)(z,{closeModal:se,saveHandler:je,data:U}),isOpen:q,onClose:se}),(0,M.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Ze?"table_container_dark":""),children:[(0,M.jsxs)(r.rb,{children:[(0,M.jsx)(r.b7,{children:(0,M.jsx)("h3",{id:"".concat(Ze?"heading-dark":""),className:"pb-2",children:"Departments Staff"})}),(0,M.jsx)(r.b7,{md:3,className:"float-end",children:(0,M.jsxs)("select",{size:"sm",className:" form-select ".concat(Ze?"select-dark":""),"aria-label":"Department",defaultValue:"Admins",onChange:function(e){var t=e.target.value;ne(t),"Admins"===t?void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&Se&&!ye?ue(Se):be&&Se&&ye&&he(ye):fe(be):le():"Users"===t&&(void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&Se&&!ye?function(e){ve(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}(Se):be&&Se&&ye&&function(e){xe(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}(ye):ge(be,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}}):O("",{onSuccess:function(e){D(e.data),h()},onError:function(e){}}))},children:[(0,M.jsx)("option",{children:"Select Role"}),(0,M.jsx)("option",{children:"Admins"}),(0,M.jsx)("option",{children:"Users"})]})}),(0,M.jsx)(r.b7,{children:(0,M.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),P(null),V(!0)},children:"Add Department Staff"})})]}),E?(0,M.jsx)(_.Z,{columns:H,data:E,openEditModal:function(e){J(!1),P(e),V(!0)},OnDeleteItem:function(e){p(),T.mutate(e,{onSuccess:function(){g((function(){return{show:!0,title:"Success",content:"Department Staff deleted Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?le():ue(localStorage.getItem("facilityId")),h()},onError:function(e){g((function(){return{show:!0,title:"Error",content:e.response.data.error}})),h()}}),h()},deldepstaffId:$}):(0,M.jsx)(s.Z,{})]})]})}},7297:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),c=n(93001),s=n(52036),l=n(18043),d=n(57689),u=n(96062),m=n(4942),f=n(1413),p=n(24846),h=n(51843),v=n(99412),g=n(31397),x=n(99579),j=n(80184),b=function(e){var t,n=e.closeModal,o=e.saveHandler,c=e.data,s=(0,l.U)().dispatch,b=((0,d.s0)(),(0,u.V6)().data),S=(0,i.useState)(!1),y=(0,a.Z)(S,2),k=y[0],Z=y[1],I=(0,i.useState)(),w=(0,a.Z)(I,2),N=(w[0],w[1],(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",deviceid:0,is_admin:!0})),A=(0,a.Z)(N,2),C=A[0],E=A[1];(0,i.useEffect)((function(){c&&E((function(){return{firstname:c.users.firstname,lastname:c.users.lastname,email:c.users.email,address:c.users.address,phonenumber:c.users.phonenumber,deviceid:c.users.deviceid,is_admin:!0,userid:c.userid}}))}),[c]);var D=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;"deviceid"===n&&(o=parseInt(a,10)||0),E((0,f.Z)((0,f.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:o)))},F=(0,x.X)(),O=F.darkMode;F.setDarkMode;return(0,j.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:k,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),Z(!0),!0===t.checkValidity()&&(s({type:"SHOW_LOADER"}),o(C),console.log(C),n())},children:[(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationDeviceSelection",children:"Equipment Selection*"}),(0,j.jsxs)(r.LX,{className:" form-select ".concat(O?"select-dark":""),"aria-describedby":"validationCustom04Feedback",name:"deviceid",value:C.deviceid,feedbackInvalid:"Please select a valid Device Selection",id:"validationDeviceSelection",onChange:D,required:!0,children:[(0,j.jsx)("option",{children:"Select Equipment"}),null===b||void 0===b||null===(t=b.data)||void 0===t?void 0:t.map((function(e){return(0,j.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})]}),(0,j.jsxs)(r.b7,{md:6,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationFirstname",children:"First Name"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{}),(0,j.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"firstname",value:C.firstname,onChange:D,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:6,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationLastname",children:"Last Name"}),(0,j.jsxs)(r.YR,{className:"has-validation",children:[(0,j.jsx)(r.wV,{}),(0,j.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"lastname",value:C.lastname,onChange:D,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,j.jsxs)(r.YR,{className:"has-validation",children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(p.Z,{icon:h.p,alt:"Email"})}),(0,j.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"email",value:C.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;E((0,f.Z)((0,f.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);Z(c)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(p.Z,{icon:v.i,alt:"Address"})}),(0,j.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"address",value:C.address,onChange:D,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(p.Z,{icon:g.d,alt:"phonenumber"})}),(0,j.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"phonenumber",value:C.phonenumber,onChange:D,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,j.jsx)(r.b7,{xs:12,children:(0,j.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(O?"button-dark":""),type:"submit",children:c?"Edit Device Staff ":"Add Device Staff "})})]})},S=n(74165),y=n(15861),k=n(52178),Z=n(80491),I=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(){var t,n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/find-admins?name=DeviceAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.post("user/create/deviceAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.patch("user/staff/updateDeviceStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.delete("user/staff/deleteDeviceStaff?userid=".concat(t.userid,"&deviceid=").concat(t.deviceid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(){var t,n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/find-user-staff?name=DeviceUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/user-staff-by-depId/".concat(t,"?name=DeviceUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-depId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-orgId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-facId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(66757),z=n(77868),_=[{key:"users.firstname",label:"Name"},{key:"users.email",label:"Email"},{key:"users.phonenumber",label:"Contact Number"},{key:"users.address",label:"Address"},{key:"devices.devicename",label:"Device"}],H=function(){var e=(0,l.U)().dispatch,t=localStorage.getItem("OrganizationId"),n=localStorage.getItem("facilityId"),m=localStorage.getItem("departmentId"),f=function(){return e({type:"SHOW_LOADER"})},p=function(){return e({type:"HIDE_LOADER"})},h=(0,x.X)(),v=h.setShowToast,g=h.devicesData,S=(h.setDevicesData,(0,i.useState)(!1)),y=(0,a.Z)(S,2),k=y[0],Z=y[1],H=(0,i.useState)(),L=(0,a.Z)(H,2),R=L[0],q=L[1],V=(0,i.useState)(!1),T=(0,a.Z)(V,2),X=T[0],B=T[1],U=(0,d.s0)(),P=(0,i.useState)([]),W=(0,a.Z)(P,2),Y=W[0],G=W[1],J=(0,o.useMutation)(I).mutate,Q=((0,o.useMutation)(C).mutate,(0,o.useMutation)(w).mutate),K=(0,o.useMutation)(N).mutate,$=(0,o.useMutation)(A),ee=(0,i.useState)(!0),te=(0,a.Z)(ee,2),ne=te[0],ae=(te[1],(0,i.useState)("Select Role")),re=(0,a.Z)(ae,2),ie=(re[0],re[1],JSON.parse(localStorage.getItem("permissions"))),oe=(0,M.Z_)(ie,M.BA,M.H2),ce=(0,M.Z_)(ie,M.vw,M.H2),se=(0,M.Z_)(ie,M.JK,M.H2),le=(0,M.Z_)(ie,M.iH,M.H2),de=function(){Z(!1)};(0,o.useMutation)(u.oy).mutate;function ue(){J("",{onSuccess:function(e){G(e.data),p()},onError:function(e){}})}var me=(0,o.useMutation)(D).mutate;function fe(e){me(e,{onSuccess:function(e){p(),G(e.data)},onError:function(e){p()}})}var pe=(0,o.useMutation)(F).mutate;function he(e){pe(e,{onSuccess:function(e){p(),G(e.data)},onError:function(e){p()}})}var ve=(0,o.useMutation)(O).mutate;function ge(e){ve(e,{onSuccess:function(e){p(),G(e.data)},onError:function(e){p()}})}(0,o.useMutation)(E).mutate;function xe(e){f(),setTimeout((function(){X?Q(e,{onSuccess:function(){p(),v((function(){return{show:!0,title:"Success",content:"Device Staff Created Successfully"}})),void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?ge(n):t&&n&&m&&fe(m):he(t):ue()},onError:function(e){p(),v((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):K({handler:e,editData:R},{onSuccess:function(){p(),v((function(){return{show:!0,title:"Success",content:"Device Staff Edited Successfully"}})),void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?ge(n):t&&n&&m&&fe(m):he(t):ue()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),U("/login")),p(),v((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){oe?void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?ge(n):t&&n&&m&&fe(m):he(t):ue():ce?n&&"Select Facility"!==n||m&&"Select Department"!==m?m&&n&&"Select Department"!==m?fe(m):(m&&n&&"Select Department"==m||n)&&ge(n):ue():se?m&&"Select Department"!==m?fe(m):ue():le&&ue()}),[oe,ce,se,le,t,n,m]);var je=(0,x.X)(),be=je.darkMode;je.setDarkMode;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.$,{title:X?"Add Equipment Staff":"Edit Equipment Staff",content:X?(0,j.jsx)(b,{closeModal:de,saveHandler:xe}):(0,j.jsx)(b,{closeModal:de,saveHandler:xe,data:R}),isOpen:k,onClose:de}),(0,j.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(be?"table_container_dark":""),children:[(0,j.jsxs)(r.rb,{children:[(0,j.jsx)(r.b7,{children:(0,j.jsx)("h3",{className:"pb-2",id:"".concat(be?"heading-dark":""),children:"Equipment Staff"})}),(0,j.jsx)(r.b7,{children:(0,j.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){B(!0),q(null),Z(!0)},children:"Add Equipment Staff"})})]}),g?(0,j.jsx)(z.Z,{columns:_,data:Y,OnDeleteItem:function(e){f(),$.mutate(e,{onSuccess:function(){v((function(){return{show:!0,title:"Success",content:"Device Staff deleted Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?ue():ue(localStorage.getItem("departmentId")),p()},onError:function(e){v((function(){return{show:!0,title:"Error",content:e.response.data.error}})),p()}}),p()},openEditModal:function(e){B(!1),q(e),Z(!0)},deldevstaffId:ne}):(0,j.jsx)(c.Z,{})]})]})}},41401:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),c=n(52036),s=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(74165),f=n(15861),p=n(52178),h=n(80491),v=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(){var t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/find-admins?name=FacilityAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/admins-by-orgId/".concat(t,"?name=FacilityAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/admins-by-facId/".concat(t,"?name=FacilityAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.post("user/create/facilityAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.patch("user/staff/updateFacilityStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.delete("user/staff/deleteFacilityStaff?userid=".concat(t.userid,"&facilityid=").concat(t.facilityid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(){var t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/find-user-staff?name=FacilityUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/user-staff-by-orgId/".concat(t,"?name=FacilityUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/user-staff-by-facId/".concat(t,"?name=FacilityUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=n(66757),w=n(4942),N=n(1413),A=n(24846),C=n(51843),E=n(99412),D=n(31397),F=n(45013),O=n(80184),M=function(e){var t=e.closeModal,n=e.saveHandler,o=e.data,c=(0,s.U)().dispatch,m=((0,u.s0)(),(0,i.useState)([])),f=(0,a.Z)(m,2),p=f[0],h=f[1],v=(0,l.useMutation)(F.WH).mutate,g=(0,i.useState)(!1),x=(0,a.Z)(g,2),j=x[0],b=x[1],S=(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",facilityid:"",is_admin:!1}),y=(0,a.Z)(S,2),k=y[0],Z=y[1];(0,i.useEffect)((function(){o&&Z((function(){return{firstname:o.users.firstname,lastname:o.users.lastname,email:o.users.email,address:o.users.address,phonenumber:o.users.phonenumber,facilityid:o.facilityid,is_admin:!0,userid:o.userid}}))}),[o]);var I=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;"facilityid"===n&&(o=parseInt(a,10)||0),Z((0,N.Z)((0,N.Z)({},k),{},(0,w.Z)({},n,"checkbox"===r?i:o)))};var M=(0,d.X)(),z=M.darkMode;M.setDarkMode;return(0,i.useEffect)((function(){v("",{onSuccess:function(e){h(e.data)},onError:function(e){}})}),[]),(0,O.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:j,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),b(!0),!0===a.checkValidity()&&(c({type:"SHOW_LOADER"}),n(k),console.log(k),t())},children:[(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility*"}),(0,O.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacility",className:" form-select ".concat(z?"select-dark":""),value:k.facilityid,onChange:I,required:!0,children:[(0,O.jsx)("option",{children:"Select Facility"}),null===p||void 0===p?void 0:p.map((function(e){return(0,O.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),(0,O.jsxs)(r.b7,{md:6,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationFirstName",children:"First Name"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{}),(0,O.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"firstname",value:k.firstname,onChange:I,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:6,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationLastName",children:"Last Name"}),(0,O.jsxs)(r.YR,{className:"has-validation",children:[(0,O.jsx)(r.wV,{}),(0,O.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"lastname",value:k.lastname,onChange:I,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,O.jsxs)(r.YR,{className:"has-validation",children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:C.p,alt:"Email"})}),(0,O.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(z?"input-dark":""),name:"email",value:k.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;Z((0,N.Z)((0,N.Z)({},k),{},(0,w.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);b(c)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0,disabled:!!o})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:E.i,alt:"Address"})}),(0,O.jsx)(r.jO,{className:"input-light pt-0 ".concat(z?"input-dark":""),type:"text",name:"address",value:k.address,onChange:I,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:D.d,alt:"ContactNumber"})}),(0,O.jsx)(r.jO,{className:"input-light pt-0 ".concat(z?"input-dark":""),type:"text",name:"phonenumber",value:k.phonenumber,onChange:I,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationFacilityName",children:"Is Admin"}),(0,O.jsx)(r.EC,{id:"flexCheckDefault",label:" ",checked:k.is_admin,onChange:function(e){Z((0,N.Z)((0,N.Z)({},k),{},{is_admin:e.target.checked}))}})]}),(0,O.jsx)(r.b7,{xs:12,children:(0,O.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(z?"button-dark":""),type:"submit",children:o?"Edit Facility Staff ":"Add Facility Staff "})})]})},z=n(77868),_=[{key:"users.firstname",label:"Name"},{key:"users.email",label:"Email"},{key:"users.phonenumber",label:"Contact Number"},{key:"users.address",label:"Address"},{key:"facilities.name",label:"Facility"}],H=function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),n=(0,s.U)().dispatch,m=function(){return n({type:"SHOW_LOADER"})},f=function(){return n({type:"HIDE_LOADER"})},p=(0,l.useMutation)(j).mutate,h=JSON.parse(localStorage.getItem("permissions")),w=(0,I.Z_)(h,I.BA,I.H2),N=(0,I.Z_)(h,I.vw,I.H2),A=((0,I.Z_)(h,I.JK,I.H2),(0,I.Z_)(h,I.iH,I.H2),(0,l.useMutation)(b).mutate),C=(0,i.useState)([]),E=(0,a.Z)(C,2),D=E[0],F=E[1],H=(0,l.useMutation)(v).mutate,L=(0,l.useMutation)(y).mutate,R=(0,i.useState)(!1),q=(0,a.Z)(R,2),V=q[0],T=q[1],X=(0,i.useState)(),B=(0,a.Z)(X,2),U=B[0],P=B[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,d.X)().setShowToast,K=(0,l.useMutation)(S),$=(0,i.useState)(!0),ee=(0,a.Z)($,2),te=ee[0],ne=(ee[1],(0,i.useState)("Select Role")),ae=(0,a.Z)(ne,2),re=(ae[0],ae[1]),ie=(0,d.X)(),oe=ie.darkMode,ce=(ie.setDarkMode,(0,l.useMutation)(g).mutate),se=(0,l.useMutation)(k).mutate,le=(0,l.useMutation)(x).mutate,de=(0,l.useMutation)(Z).mutate;function ue(e){ce(e,{onSuccess:function(e){f(),F(e.data)},onError:function(e){f()}})}function me(e){le(e,{onSuccess:function(e){f(),F(e.data)},onError:function(e){f()}})}var fe=(0,u.s0)(),pe=function(){T(!1)};function he(){H("",{onSuccess:function(e){f(),F(e.data)},onError:function(e){}})}function ve(e){m(),setTimeout((function(){G?p(e,{onSuccess:function(){f(),Q((function(){return{show:!0,title:"Success",content:"Facility Staff Created Successfully"}})),he()},onError:function(e){f(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):A({handler:e,editData:U},{onSuccess:function(){f(),Q((function(){return{show:!0,title:"Success",content:"Facility Staff Edited Successfully"}})),he()},onError:function(e){f(),Q((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}return(0,i.useEffect)((function(){w?void 0!==e&&null!==e&&"Select Organization"!==e||void 0!==t&&null!==t&&"Select Facility"!==t?e&&t&&"Select Facility"!==t?me(t):(e&&t&&"Select Facility"===t||e)&&ue(e):he():N&&(t&&"Select Facility"!==t?me(t):he())}),[e,t]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(c.$,{title:G?"Add Facility Staff":"Edit Facility Staff",content:G?(0,O.jsx)(M,{closeModal:pe,saveHandler:ve}):(0,O.jsx)(M,{closeModal:pe,saveHandler:ve,data:U}),isOpen:V,onClose:pe}),(0,O.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(oe?"table_container_dark":""),children:[(0,O.jsxs)(r.rb,{children:[(0,O.jsx)(r.b7,{children:(0,O.jsx)("h3",{className:"pb-2",id:"".concat(oe?"heading-dark":""),children:"Facility Staff"})}),(0,O.jsx)(r.b7,{md:3,className:"float-end",children:(0,O.jsxs)("select",{size:"sm",className:" form-select ".concat(oe?"select-dark":""),"aria-label":"Department",defaultValue:"Admins",onChange:function(n){var a=n.target.value;if(re(a),"Admins"===a)void 0!==e&&null!==e&&"Select Organization"!==e||void 0!==t&&null!==t&&"Select Facility"!==t?e&&t?me(t):e&&ue(e):he();else if("Users"===a){var r=localStorage.getItem("OrganizationId"),i=localStorage.getItem("facilityId");void 0!==r&&null!==r&&"Select Organization"!==r||void 0!==i&&null!==i&&"Select Facility"!==i?r&&i?de(i,{onSuccess:function(e){f(),F(e.data)},onError:function(e){f()}}):r&&function(e){se(e,{onSuccess:function(e){f(),F(e.data)},onError:function(e){f()}})}(r):(f(),L("",{onSuccess:function(e){F(e.data)},onError:function(e){}}))}},children:[(0,O.jsx)("option",{children:"Select Role"}),(0,O.jsx)("option",{children:"Admins"}),(0,O.jsx)("option",{children:"Users"})]})}),(0,O.jsx)(r.b7,{children:(0,O.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),P(null),T(!0)},children:"Add Facility Staff"})})]}),D?(0,O.jsx)(z.Z,{columns:_,OnDeleteItem:function(e){m(),K.mutate(e,{onSuccess:function(){Q((function(){return{show:!0,title:"Success",content:"Facility Staff deleted Successfully"}})),he(),f()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),fe("/login")),Q((function(){return{show:!0,title:"Error",content:e.response.data.error}})),f()}}),f()},data:D,openEditModal:function(e){J(!1),P(e),T(!0)},delfacstaffId:te}):(0,O.jsx)(o.Z,{})]})]})}},99175:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),c=n(57689),s=n(93001),l=n(52036),d=n(99579),u=n(18043),m=n(17834),f=n(46522),p=n(66757),h=n(4942),v=n(1413),g=n(24846),x=n(1278),j=n(25244),b=n(10781),S=n(18393),y=n(45013),k=n(80184),Z=function(e){var t,n,c,s=e.closeModal,l=e.saveHandler,f=e.data,Z=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),I=localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId"),w=(0,b.Z)((function(e){return e.data})),N=(0,u.U)().dispatch,A=(0,i.useState)(),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,i.useState)(!1),O=(0,a.Z)(F,2),M=O[0],z=O[1],_=JSON.parse(localStorage.getItem("permissions")),H=(0,o.useMutation)(y.WH).mutate,L=(0,o.useMutation)(S.Z$).mutate,R=(0,p.Z_)(_,p.BA,p.H2),q=(0,p.Z_)(_,p.vw,p.H2),V=((0,p.Z_)(_,p.JK,p.H2),(0,i.useState)({departmentname:"",description:"",customerid:Z?Number(localStorage.getItem("OrganizationId")):0,facilityid:I?Number(localStorage.getItem("facilityId")):0,userid:0})),T=(0,a.Z)(V,2),X=T[0],B=T[1];(0,i.useEffect)((function(){f&&(J(null===f||void 0===f?void 0:f.customerid),B((function(){return{departmentname:null===f||void 0===f?void 0:f.departmentname,description:null===f||void 0===f?void 0:f.description,customerid:null===f||void 0===f?void 0:f.customerid,facilityid:null===f||void 0===f?void 0:f.facilityid,userid:null===f||void 0===f?void 0:f.userid}})))}),[f]);var U=(0,i.useState)([]),P=(0,a.Z)(U,2),W=P[0],Y=P[1],G=(0,o.useMutation)(m.iU).mutate;function J(e){null!==e&&G(e,{onSuccess:function(e){D(e)},onError:function(e){}})}var Q=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;console.log(e.target.value);var o="customerid"!==n&&"facilityid"!==n&&"userid"!==n||a==="Selected ".concat(n.charAt(0).toUpperCase()+n.slice(1))?a:parseInt(a,10);B((0,v.Z)((0,v.Z)({},X),{},(0,h.Z)({},n,"checkbox"===r?i:o))),"customerid"===n&&J(a)};(0,i.useEffect)((function(){L("",{onSuccess:function(e){Y(e)},onError:function(e){}}),q&&H("",{onSuccess:function(e){D(e)},onError:function(e){}})}),[q]);var K=(0,d.X)(),$=K.darkMode;K.setDarkMode;return(0,k.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:M,onSubmit:function(e){var t=e.currentTarget;X.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),z(!0),!0===t.checkValidity()&&(N({type:"SHOW_LOADER"}),l(X),e.preventDefault(),s())},children:[!Z&&R&&(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,k.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:X.customerid,onChange:Q,required:!0,disabled:!!f,children:[(0,k.jsx)("option",{children:"Select Organization"}),null===(t=w[0])||void 0===t?void 0:t.map((function(e){return(0,k.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),!I&&q&&(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility*"}),(0,k.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacility",className:" form-select ".concat($?"select-dark":""),value:X.facilityid,onChange:Q,required:!0,disabled:!!f,children:[(0,k.jsx)("option",{children:"Select Facility"}),null===E||void 0===E||null===(n=E.data)||void 0===n?void 0:n.map((function(e){return(0,k.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationDepartmentName",children:"Department Name*"}),(0,k.jsxs)(r.YR,{children:[(0,k.jsx)(r.wV,{children:(0,k.jsx)(g.Z,{icon:x.e,alt:"Name"})}),(0,k.jsx)(r.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"departmentname",value:X.departmentname,onChange:Q,feedbackInvalid:"Department Name is required",id:"validationDepartmentName",required:!0})]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,k.jsxs)(r.LX,{name:"userid",className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:X.userid,onChange:Q,required:!0,disabled:!!f,children:[(0,k.jsx)("option",{children:"Select User"}),null===W||void 0===W||null===(c=W.data)||void 0===c?void 0:c.map((function(e){return(0,k.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"description",children:"Description*"}),(0,k.jsxs)(r.YR,{children:[(0,k.jsx)(r.wV,{children:(0,k.jsx)(g.Z,{icon:j.f,alt:"description"})}),(0,k.jsx)(r.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"description",value:X.description,onChange:Q,feedbackInvalid:"Description is required",id:"validationDescription",required:!0})]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Active"}),(0,k.jsx)(r.EC,{id:"flexCheckDefault",label:" "})]}),(0,k.jsx)(r.b7,{xs:12,children:(0,k.jsx)(r.u5,{color:"primary",type:"submit",children:f?"Edit Department":"Add Department"})})]})},I=n(77868),w=[{key:"departmentname",label:"Department Name"},{key:"email",label:"Contact Email"},{key:"description",label:"Description"}],N=function(){var e=(0,u.U)().dispatch,t=(0,o.useMutation)(f.BZ).mutate,n=(0,o.useMutation)(f.q3).mutate,h=function(){return e({type:"SHOW_LOADER"})},v=function(){return e({type:"HIDE_LOADER"})},g=(0,d.X)(),x=g.setShowToast,j=g.departmentsData,b=g.setDepartmentsData,S=(0,o.useMutation)(f.pF).mutate,y=(0,i.useState)(!1),N=(0,a.Z)(y,2),A=N[0],C=N[1],E=(0,o.useMutation)(f.If),D=(0,i.useState)(),F=(0,a.Z)(D,2),O=F[0],M=F[1],z=(0,i.useState)(!1),_=(0,a.Z)(z,2),H=_[0],L=_[1],R=(0,i.useState)(!0),q=(0,a.Z)(R,2),V=q[0],T=(q[1],(0,c.s0)()),X=JSON.parse(localStorage.getItem("permissions")),B=((0,p.Z_)(X,p.BA,p.H2),(0,p.Z_)(X,p.vw,p.H2)),U=((0,p.Z_)(X,p.JK,p.H2),(0,p.Z_)(X,p.iH,p.H2),function(){C(!1)});function P(){S("",{onSuccess:function(e){b(e.data)},onError:function(e){}})}var W=(0,o.useMutation)(m.XH).mutate;function Y(e){h(),W(e,{onSuccess:function(e){v(),b(e.data)},onError:function(e){v()}})}var G=(0,o.useMutation)(m.HH).mutate;function J(e){h(),setTimeout((function(){H?t(e,{onSuccess:function(){v(),x((function(){return{show:!0,title:"Success",content:"Department Created Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?P():Y(localStorage.getItem("facilityId"))},onError:function(e){v(),x((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):n({handler:e,editData:O},{onSuccess:function(){v(),x((function(){return{show:!0,title:"Success",content:"Department Edited Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?P():Y(localStorage.getItem("facilityId"))},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),T("/login")),v(),x((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId");if(void 0!==e&&"Select Organization"!==e&&null!==e||void 0!==t&&null!==t)if(B&&"Select Facility"===t)P();else{if("Select Facility"!==t)return;G(e,{onSuccess:function(e){v(),b(e.data)},onError:function(e){v()}})}else P()}),[localStorage.getItem("facilityId"),localStorage.getItem("OrganizationId")]);var Q=(0,d.X)(),K=Q.darkMode;Q.setDarkMode;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.$,{title:H?"Add Department":"Edit Department",content:H?(0,k.jsx)(Z,{closeModal:U,saveHandler:J}):(0,k.jsx)(Z,{closeModal:U,saveHandler:J,data:O}),isOpen:A,onClose:U}),(0,k.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(K?"table_container_dark":""),children:[(0,k.jsxs)(r.rb,{children:[(0,k.jsx)(r.b7,{children:(0,k.jsx)("h3",{id:"".concat(K?"heading-dark":""),className:"pb-2",children:"Departments"})}),(0,k.jsx)(r.b7,{children:(0,k.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){L(!0),M(null),C(!0)},children:"Add Department"})})]}),j?(0,k.jsx)(I.Z,{columns:w,data:j,openEditModal:function(e){L(!1),M(e),C(!0)},OnDeleteItem:function(e){h(),E.mutate(e,{onSuccess:function(){x((function(){return{show:!0,title:"Success",content:"Department deleted Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?P():Y(localStorage.getItem("facilityId")),v()},onError:function(e){x((function(){return{show:!0,title:"Error",content:e.response.data}})),v()}}),v()},deldepId:V}):(0,k.jsx)(s.Z,{})]})]})}},37295:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),c=n(93001),s=n(52036),l=n(18043),d=n(57689),u=n(96062),m=n(4942),f=n(1413),p=n(24846),h=n(1278),v=n(94170),g=n(10781),x=n(17834),j=n(46522),b=n(99579),S=n(66757),y=n(45013),k=n(18393),Z=n(80184),I=function(e){var t,n,c,s,d=e.closeModal,u=e.saveHandler,I=e.data,w=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),N=localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId"),A=localStorage.getItem("departmentId")&&"Select Department"!==localStorage.getItem("departmentId"),C=(0,g.Z)((function(e){return e.data})),E=JSON.parse(localStorage.getItem("permissions")),D=(0,i.useState)(!1),F=(0,a.Z)(D,2),O=F[0],M=F[1],z=(0,i.useState)(),_=(0,a.Z)(z,2),H=_[0],L=_[1],R=(0,i.useState)(),q=(0,a.Z)(R,2),V=q[0],T=q[1],X=(0,i.useState)([]),B=(0,a.Z)(X,2),U=B[0],P=B[1],W=(0,l.U)().dispatch,Y=(0,o.useMutation)(y.WH).mutate,G=(0,o.useMutation)(j.pF).mutate,J=(0,o.useMutation)(k.Z$).mutate,Q=(0,S.Z_)(E,S.BA,S.H2),K=(0,S.Z_)(E,S.vw,S.H2),$=(0,S.Z_)(E,S.JK,S.H2),ee=(0,i.useState)({devicename:"",manufacturer:"",facilityid:w?Number(localStorage.getItem("facilityId")):0,departmentid:w?Number(localStorage.getItem("departmentId")):0,customerid:w?Number(localStorage.getItem("OrganizationId")):0,delaytime:0,userid:0}),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1];(0,i.useEffect)((function(){I&&ae((function(){return{devicename:null===I||void 0===I?void 0:I.devicename,manufacturer:null===I||void 0===I?void 0:I.manufacturer,facilityid:null===I||void 0===I?void 0:I.facilityid,departmentid:null===I||void 0===I?void 0:I.departmentid,customerid:null===I||void 0===I?void 0:I.customerid,delaytime:null===I||void 0===I?void 0:I.delaytime,userid:null===I||void 0===I?void 0:I.userid}}))}),[I]);var re=(0,o.useMutation)(x.iU).mutate;var ie=(0,o.useMutation)(x.XH).mutate;var oe=function(e){console.log(e.target.value);var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;console.log(e.target.value);var o,c="delaytime"!==n&&"customerid"!==n&&"facilityid"!==n&&"departmentid"!==n&&"userid"!==n||a==="Selected ".concat(n.charAt(0).toUpperCase()+n.slice(1))?a:parseInt(a,10);ae((0,f.Z)((0,f.Z)({},ne),{},(0,m.Z)({},n,"checkbox"===r?i:c))),"customerid"===n?null!==(o=a)&&re(o,{onSuccess:function(e){L(e)},onError:function(e){}}):"facilityid"===n&&function(e){ie(e,{onSuccess:function(e){T(e)},onError:function(e){}})}(a)};(0,i.useEffect)((function(){J("",{onSuccess:function(e){P(e)},onError:function(e){}}),K?Y("",{onSuccess:function(e){L(e)},onError:function(e){}}):$&&G("",{onSuccess:function(e){T(e)},onError:function(e){}})}),[K]);var ce=(0,b.X)(),se=ce.darkMode;ce.setDarkMode;return(0,Z.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:O,onSubmit:function(e){var t=e.currentTarget;ne.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),M(!0),!0===t.checkValidity()&&(W({type:"SHOW_LOADER"}),u(ne),e.preventDefault(),d())},children:[!w&&Q&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,Z.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(se?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:ne.customerid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Organization"}),null===(t=C[0])||void 0===t?void 0:t.map((function(e){return(0,Z.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),!N&&K&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Facility*"}),(0,Z.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacilities",className:" form-select ".concat(se?"select-dark":""),value:ne.facilityid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Facility"}),null===H||void 0===H||null===(n=H.data)||void 0===n?void 0:n.map((function(e){return(0,Z.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),!A&&$&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Department Selection*"}),(0,Z.jsxs)(r.LX,{name:"departmentid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationDepartment",value:ne.departmentid,onChange:oe,className:" form-select ".concat(se?"select-dark":""),required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Department"}),null===V||void 0===V||null===(c=V.data)||void 0===c?void 0:c.map((function(e){return(0,Z.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,Z.jsxs)(r.LX,{name:"userid",className:" form-select ".concat(se?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:ne.userid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select User"}),null===U||void 0===U||null===(s=U.data)||void 0===s?void 0:s.map((function(e){return(0,Z.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationDevicesName",children:"Equipment Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(p.Z,{icon:h.e,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(se?"input-dark":""),type:"text",name:"devicename",value:ne.devicename,onChange:oe,feedbackInvalid:"Device Name is required",id:"validationDeviceName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Manufacturer Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(p.Z,{icon:v.F,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(se?"input-dark":""),type:"text",name:"manufacturer",value:ne.manufacturer,onChange:oe,feedbackInvalid:"Manufacturer Name is required",id:"validationManufacturerName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(se?"heading-dark":""),htmlFor:"validationDevicesName",children:"Time Delay in Minutes"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(p.Z,{icon:h.e,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(se?"input-dark":""),type:"number",name:"delaytime",value:ne.delaytime,onChange:oe,feedbackInvalid:"Time Delay is required",id:"validationDeviceName",required:!0})]})]}),(0,Z.jsx)(r.b7,{xs:12,children:(0,Z.jsx)(r.u5,{color:"primary",type:"submit",children:I?"Edit Device":"Add Device"})})]})},w=n(77868),N=[{key:"devicename",label:"Equipment Name"},{key:"manufacturer",label:"Manufacturer"}],A=function(){var e=(0,l.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},m=(0,b.X)(),f=m.setShowToast,p=m.devicesData,h=m.setDevicesData,v=(0,i.useState)(!1),g=(0,a.Z)(v,2),x=g[0],j=g[1],S=(0,i.useState)(),y=(0,a.Z)(S,2),k=y[0],A=y[1],C=(0,i.useState)(!1),E=(0,a.Z)(C,2),D=E[0],F=E[1],O=(0,d.s0)(),M=(0,o.useMutation)(u.Xo).mutate,z=(0,o.useMutation)(u.S6).mutate,_=(0,o.useMutation)(u.kr).mutate,H=(0,o.useMutation)(u.n1),L=(0,i.useState)(!0),R=(0,a.Z)(L,2),q=R[0],V=(R[1],function(){j(!1)}),T=(0,o.useMutation)(u.oy).mutate;function X(e){T(e,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}})}var B=(0,o.useMutation)(u.a8).mutate;var U=(0,o.useMutation)(u.hd).mutate;function P(){M("",{onSuccess:function(e){h(e.data)},onError:function(e){}})}function W(e){t(),setTimeout((function(){D?z(e,{onSuccess:function(){n(),f((function(){return{show:!0,title:"Success",content:"Device Created Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?P():X(localStorage.getItem("departmentId"))},onError:function(e){n(),f((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):_({handler:e,editData:k},{onSuccess:function(){n(),f((function(){return{show:!0,title:"Success",content:"Device Edited Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?P():X(localStorage.getItem("departmentId"))},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),O("/login")),n(),f((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),a=localStorage.getItem("departmentId");a&&"Select Department"!==a?X(a):t&&"Select Facility"!==t?U(t,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}}):e&&"Select Organization"!==e?function(e){B(e,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}})}(e):P()}),[localStorage.getItem("OrganizationId"),localStorage.getItem("facilityId"),localStorage.getItem("departmentId")]);var Y=(0,b.X)(),G=Y.darkMode;Y.setDarkMode;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(s.$,{title:D?"Add Equipment":"Edit Equipment",content:D?(0,Z.jsx)(I,{closeModal:V,saveHandler:W}):(0,Z.jsx)(I,{closeModal:V,saveHandler:W,data:k}),isOpen:x,onClose:V}),(0,Z.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(G?"table_container_dark":""),children:[(0,Z.jsxs)(r.rb,{children:[(0,Z.jsx)(r.b7,{children:(0,Z.jsx)("h3",{className:"pb-2",id:"".concat(G?"heading-dark":""),children:"Equipment"})}),(0,Z.jsx)(r.b7,{children:(0,Z.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){F(!0),A(null),j(!0)},children:"Add Equipment"})})]}),p?(0,Z.jsx)(w.Z,{columns:N,data:p,OnDeleteItem:function(e){t(),H.mutate(e,{onSuccess:function(){f((function(){return{show:!0,title:"Success",content:"Device deleted Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?P():X(localStorage.getItem("departmentId")),n()},onError:function(e){f((function(){return{show:!0,title:"Error",content:e.response.data}})),n()}}),n()},openEditModal:function(e){F(!1),A(e),j(!0)},deldevId:q}):(0,Z.jsx)(c.Z,{})]})]})}},2646:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),c=n(52036),s=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(45013),f=n(4942),p=n(1413),h=n(24846),v=n(38861),g=n(54546),x=n(31397),j=n(1278),b=n(25244),S=n(10781),y=n(18393),k=n(66757),Z=n(80184),I=function(e){var t,n,o=e.closeModal,c=e.saveHandler,u=e.data,m=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),I=(0,S.Z)((function(e){return e.data})),w=(0,s.U)().dispatch,N=(0,i.useState)(!1),A=(0,a.Z)(N,2),C=A[0],E=A[1],D=JSON.parse(localStorage.getItem("permissions")),F=(0,l.useMutation)(y.Z$).mutate,O=(0,i.useState)([]),M=(0,a.Z)(O,2),z=M[0],_=M[1],H=(0,k.Z_)(D,k.BA,k.H2),L=((0,k.Z_)(D,k.vw,k.H2),(0,k.Z_)(D,k.JK,k.H2),(0,i.useState)({name:"",facility_type:"",customerid:m?Number(localStorage.getItem("OrganizationId")):0,timezone:"",currency:"",contactname:"",contactphonenumber:"",address:"",city:"",street:"",postcode:0,latitude:0,longitude:0,isfacilityadmin:!0,userid:0})),R=(0,a.Z)(L,2),q=R[0],V=R[1];(0,i.useEffect)((function(){F("",{onSuccess:function(e){_(e)},onError:function(e){}}),u&&V((function(){return{name:null===u||void 0===u?void 0:u.name,facility_type:null===u||void 0===u?void 0:u.facility_type,customerid:Number(null===u||void 0===u?void 0:u.customerid),timezone:null===u||void 0===u?void 0:u.timezone,currency:null===u||void 0===u?void 0:u.currency,contactname:null===u||void 0===u?void 0:u.contactname,contactphonenumber:null===u||void 0===u?void 0:u.contactphonenumber,address:null===u||void 0===u?void 0:u.address,city:null===u||void 0===u?void 0:u.city,street:null===u||void 0===u?void 0:u.street,postcode:+(null===u||void 0===u?void 0:u.postcode),latitude:+(null===u||void 0===u?void 0:u.latitude),longitude:+(null===u||void 0===u?void 0:u.longitude),isfacilityadmin:!0,userid:null===u||void 0===u?void 0:u.userid}}))}),[u]);var T=function(e){var t=e.target,n=t.name,a=t.value,r=t.type;t.checked;if(""!==a){var i="latitude"!==n&&"longitude"!==n||"checkbox"===r?a:parseFloat(a),o="postcode"===n&&"checkbox"!==r?parseInt(a,10):a;isNaN(i)&&"latitude"===n&&"longitude"===n||isNaN(o)&&"postcode"===n||V((function(e){return(0,p.Z)((0,p.Z)({},e),{},(0,f.Z)({},n,"postcode"===n?o:i))}))}else V((0,p.Z)((0,p.Z)({},q),{},(0,f.Z)({},n,a)))};var X=(0,d.X)(),B=X.darkMode;X.setDarkMode;return(0,Z.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:C,onSubmit:function(e){var t=e.currentTarget;q.organizationContact;if(e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),E(!0),!0===t.checkValidity()){var n=(0,p.Z)((0,p.Z)({},q),{},{userid:Number(q.userid)});w({type:"SHOW_LOADER"}),c(n),e.preventDefault(),o()}},children:[!m&&H&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,Z.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(B?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:q.customerid,onChange:T,required:!0,disabled:!!u,children:[(0,Z.jsx)("option",{children:"Select Organization"}),null===(t=I[0])||void 0===t?void 0:t.map((function(e){return(0,Z.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:v.H,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"text",name:"name",value:q.name,onChange:T,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility Type*"}),(0,Z.jsxs)(r.LX,{name:"facility_type",className:" form-select ".concat(B?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility type.",id:"validationFacilityType",value:q.facility_type,onChange:T,required:!0,children:[(0,Z.jsx)("option",{children:"Select Facility Type"}),(0,Z.jsx)("option",{value:"Mixed Dashboard",children:"Mixed Dashboard"}),(0,Z.jsx)("option",{value:"Energy Dashboard",children:"Energy Dashboard"}),(0,Z.jsx)("option",{value:"Condition Dashboard",children:"Condition Dashboard"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Time Zone*"}),(0,Z.jsxs)(r.LX,{name:"timezone",className:" form-select ".concat(B?"select-dark":""),value:q.timezone,onChange:T,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid time zone.",id:"validationTimeZone",required:!0,children:[(0,Z.jsx)("option",{children:"Select Timezone"}),(0,Z.jsx)("option",{value:"Asia/Colombo",children:"Asia/Colombo"}),(0,Z.jsx)("option",{value:"Asia/Dhaka",children:"Asia/Dhaka"}),(0,Z.jsx)("option",{value:"Asia/Dubai",children:"Asia/Dubai"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Currency*"}),(0,Z.jsxs)(r.LX,{name:"currency",className:" form-select ".concat(B?"select-dark":""),value:q.currency,onChange:T,"aria-describedby":"validationCurrency",feedbackInvalid:"Please select a valid currency.",id:"validationCurrency",required:!0,children:[(0,Z.jsx)("option",{children:"Select Currency"}),(0,Z.jsx)("option",{value:"USD",children:"USD"}),(0,Z.jsx)("option",{value:"EUR",children:"EUR"}),(0,Z.jsx)("option",{value:"ZAR",children:"ZAR"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomCity",children:"Site Manager"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:g.V,alt:"contactname"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"text",name:"contactname",value:q.contactname,onChange:T,"aria-describedby":"validationSiteManager",feedbackInvalid:"Site Manager required.",id:"validationSiteManager",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomStreet",children:"Contact Number*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:x.d,alt:"Contact"})}),(0,Z.jsx)(r.jO,{type:"tel",className:"input-light pt-0 ".concat(B?"input-dark":""),name:"contactphonenumber",placeholder:"+92xxxx",value:q.contactphonenumber,onChange:T,"aria-describedby":"validationContactNumber",feedbackInvalid:"Phone Number is required.",id:"validationContactNumber",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,Z.jsxs)(r.LX,{name:"userid",className:" form-select ".concat(B?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:q.userid,onChange:T,required:!0,disabled:!!u,children:[(0,Z.jsx)("option",{children:"Select User"}),null===z||void 0===z||null===(n=z.data)||void 0===n?void 0:n.map((function(e){return(0,Z.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:j.e,alt:"Address"})}),(0,Z.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(B?"input-dark":""),name:"address",value:q.address,onChange:T,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationAddress",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomCity",children:"Street*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:g.V,alt:"Street"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"text",name:"street",value:q.street,onChange:T,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Street is required.",id:"validationStreet",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomStreet",children:"City*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:b.f,alt:"City"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"text",name:"city",value:q.city,onChange:T,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"City is required.",id:"validationCity",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Postcode"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"number",name:"postcode",value:q.postcode,onChange:T,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Postcode is required",id:"validationPostcode",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Latitude*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(B?"input-dark":""),name:"latitude",value:q.latitude,onChange:T,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"latitude is required",id:"validationLatitude",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(B?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Longitude*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(B?"input-dark":""),type:"number",name:"longitude",value:q.longitude,onChange:T,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"longitude is required",id:"validationLongitude",required:!0})]})]}),(0,Z.jsx)(r.b7,{xs:12,children:(0,Z.jsx)(r.u5,{color:"primary",type:"submit",children:u?"Edit Facility":"Add Facility"})})]})},w=n(77868),N=n(17834),A=[{key:"name",label:"Facility Name"},{key:"facility_type",label:"Facility Type"},{key:"email",label:"Contact Email"},{key:"contactphonenumber",label:"Contact Number"},{key:"address",label:"Address"},{key:"street",label:"Street"},{key:"city",label:"City"},{key:"postcode",label:"Postcode"}],C=function(){var e=(0,s.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},f=(0,l.useMutation)(m.sB).mutate,p=(0,l.useMutation)(m.nO).mutate,h=(0,d.X)(),v=h.facilityData,g=h.setFacilityData,x=(0,l.useMutation)(m.WH).mutate,j=(0,i.useState)(!1),b=(0,a.Z)(j,2),S=b[0],y=b[1],k=(0,i.useState)(),C=(0,a.Z)(k,2),E=C[0],D=C[1],F=(0,i.useState)(!1),O=(0,a.Z)(F,2),M=O[0],z=O[1],_=(0,d.X)().setShowToast,H=(0,l.useMutation)(m.dL),L=(0,i.useState)(!0),R=(0,a.Z)(L,2),q=R[0],V=(R[1],(0,u.s0)()),T=function(){y(!1)};function X(){x("",{onSuccess:function(e){g(e.data)},onError:function(e){}})}var B=(0,l.useMutation)(N.iU).mutate;function U(e){B(e,{onSuccess:function(e){n(),g(e.data)},onError:function(e){n()}})}function P(e){t(),setTimeout((function(){M?f(e,{onSuccess:function(){n(),_((function(){return{show:!0,title:"Success",content:"Facility Created Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?X():U(localStorage.getItem("OrganizationId"))},onError:function(e){n(),_((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):p({handler:e,editData:E},{onSuccess:function(){n(),_((function(){return{show:!0,title:"Success",content:"Facility Edited Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?X():U(localStorage.getItem("OrganizationId"))},onError:function(e){n(),_((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){void 0!==localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId")&&null!==localStorage.getItem("OrganizationId")||X()}),[localStorage.getItem("OrganizationId")]);var W=(0,d.X)(),Y=W.darkMode;W.setDarkMode;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.$,{title:M?"Add Facility":"Edit Facility",content:M?(0,Z.jsx)(I,{closeModal:T,saveHandler:P}):(0,Z.jsx)(I,{closeModal:T,saveHandler:P,data:E}),isOpen:S,onClose:T}),(0,Z.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Y?"table_container_dark":""),children:[(0,Z.jsxs)(r.rb,{children:[(0,Z.jsx)(r.b7,{children:(0,Z.jsx)("h3",{className:"pb-2",id:"".concat(Y?"heading-dark":""),children:"Facilities"})}),(0,Z.jsx)(r.b7,{children:(0,Z.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){z(!0),D(null),y(!0)},children:"Add Facilities"})})]}),v?(0,Z.jsx)(w.Z,{columns:A,OnDeleteItem:function(e){t(),H.mutate(e,{onSuccess:function(){_((function(){return{show:!0,title:"Success",content:"Facility deleted Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?X():U(localStorage.getItem("OrganizationId")),n()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),V("/login")),_((function(){return{show:!0,title:"Error",content:e.response.data.error}})),n()}}),n()},data:v,openEditModal:function(e){z(!1),D(e),y(!0)},delfacId:q}):(0,Z.jsx)(o.Z,{})]})]})}},80464:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),c=n(52036),s=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(4942),f=n(1413),p=n(24846),h=n(38861),v=n(61698),g=n(10781),x=n(80184),j=function(e){var t,n=e.closeModal,o=e.saveHandler,c=e.data,l=(0,s.U)().dispatch,u=(0,g.Z)((function(e){return e.data})),j=(0,i.useState)(!1),b=(0,a.Z)(j,2),S=b[0],y=b[1],k=(0,i.useState)({gateway_id:"",gateway_note:"",customerid:Number(localStorage.getItem("OrganizationId")),location:"",carrier:""}),Z=(0,a.Z)(k,2),I=Z[0],w=Z[1];(0,i.useEffect)((function(){c&&w((function(){return{gateway_id:c.gateway_id,gateway_note:c.gateway_note,customerid:c.customerid,location:c.location,carrier:c.carrier}}))}),[c]);var N=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o="customerid"===n?parseInt(a,10):a;w((0,f.Z)((0,f.Z)({},I),{},(0,m.Z)({},n,"checkbox"===r?i:o)))},A=(0,d.X)(),C=A.darkMode;A.setDarkMode;return(0,x.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:S,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),y(!0),!0===t.checkValidity()&&(l({type:"SHOW_LOADER"}),o(I),console.log(I),n())},children:[(0,x.jsxs)(r.b7,{md:12,children:[(0,x.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,x.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(C?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:I.customerid,onChange:N,required:!0,disabled:!!c,children:[(0,x.jsx)("option",{children:"Select Organization"}),null===(t=u[0])||void 0===t?void 0:t.map((function(e){return(0,x.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,x.jsxs)(r.b7,{md:12,children:[(0,x.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Gateway ID*"}),(0,x.jsxs)(r.YR,{children:[(0,x.jsx)(r.wV,{children:(0,x.jsx)(p.Z,{icon:h.H,alt:"Name"})}),(0,x.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_id",value:I.gateway_id,onChange:N,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0,disabled:!!c})]})]}),(0,x.jsxs)(r.b7,{md:12,children:[(0,x.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Notes*"}),(0,x.jsxs)(r.YR,{children:[(0,x.jsx)(r.wV,{children:(0,x.jsx)(p.Z,{icon:v.E,alt:"Notes"})}),(0,x.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.gateway_note,onChange:N,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,x.jsxs)(r.b7,{md:12,children:[(0,x.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Carrier*"}),(0,x.jsxs)(r.YR,{children:[(0,x.jsx)(r.wV,{children:(0,x.jsx)(p.Z,{icon:v.E,alt:"Notes"})}),(0,x.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.carrier,onChange:N,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,x.jsxs)(r.b7,{md:12,children:[(0,x.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Location*"}),(0,x.jsxs)(r.YR,{children:[(0,x.jsx)(r.wV,{children:(0,x.jsx)(p.Z,{icon:v.E,alt:"Notes"})}),(0,x.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.location,onChange:N,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,x.jsx)(r.b7,{xs:12,children:(0,x.jsx)(r.u5,{color:"primary",type:"submit",children:c?"Edit Facility":"Add GateWay"})})]})},b=n(77868),S=(n(84254),n(74165)),y=n(15861),k=n(52178),Z=n(80491),I=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("gateway/get-all-gateways/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("gateway/get-all-gateways");case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.post("gateway/assign-to-organization",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.patch("/gateway/update-gateway/".concat(t.editData.gatewayid),t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.delete("gateway/delete-gateway/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=[{key:"gateway_id",label:"Gateway ID"},{key:"gateway_note",label:"Gateway Notes"},{key:"carrier",label:"Carrier"},{key:"location",label:"Location"}],D=function(){var e=(0,s.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},m=(0,l.useMutation)(N).mutate,f=(0,l.useMutation)(A).mutate,p=(0,l.useMutation)(I).mutate,h=(0,l.useMutation)(w).mutate,v=(0,i.useState)(!1),g=(0,a.Z)(v,2),S=g[0],y=g[1],k=(0,i.useState)([]),Z=(0,a.Z)(k,2),D=Z[0],F=Z[1],O=(0,i.useState)(),M=(0,a.Z)(O,2),z=M[0],_=M[1],H=(0,i.useState)(!1),L=(0,a.Z)(H,2),R=L[0],q=L[1],V=(0,d.X)().setShowToast,T=(0,l.useMutation)(C),X=(0,i.useState)(!0),B=(0,a.Z)(X,2),U=B[0],P=(B[1],(0,u.s0)()),W=function(){y(!1)};function Y(e){p(e,{onSuccess:function(e){n(),F(e.data)},onError:function(e){}})}function G(e){t(),setTimeout((function(){R?m(e,{onSuccess:function(){n(),V((function(){return{show:!0,title:"Success",content:"GateWay Created Successfully"}})),Y(localStorage.getItem("OrganizationId"))},onError:function(e){n(),V((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):f({handler:e,editData:z},{onSuccess:function(){n(),V((function(){return{show:!0,title:"Success",content:"GateWay Edited Successfully"}})),Y(localStorage.getItem("OrganizationId"))},onError:function(e){n(),V((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&"Select Organization"!==e?Y(e):h("",{onSuccess:function(e){n(),F(e.data)},onError:function(e){}})}),[localStorage.getItem("OrganizationId")]);var J=(0,d.X)(),Q=J.darkMode;J.setDarkMode;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.$,{title:R?"Add GateWay":"Edit GateWay",content:R?(0,x.jsx)(j,{closeModal:W,saveHandler:G}):(0,x.jsx)(j,{closeModal:W,saveHandler:G,data:z}),isOpen:S,onClose:W}),(0,x.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Q?"table_container_dark":""),children:[(0,x.jsxs)(r.rb,{children:[(0,x.jsx)(r.b7,{children:(0,x.jsx)("h3",{className:"pb-2",id:"".concat(Q?"heading-dark":""),children:"GateWay"})}),(0,x.jsxs)(r.b7,{className:"d-flex gap-5 justify-content-end",children:[(0,x.jsx)("div",{children:(0,x.jsx)(r.u5,{color:"primary",className:"float-end mr-3",onClick:function(){q(!0),_(null),y(!0)},children:"Add GateWay"})}),(0,x.jsxs)("div",{className:"d-flex gap-2",children:[(0,x.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Day"}),(0,x.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Week"}),(0,x.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Month"}),(0,x.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Hour"})]})]})]}),D?(0,x.jsx)(b.Z,{columns:E,data:D,OnDeleteItem:function(e){t(),T.mutate(e,{onSuccess:function(){V((function(){return{show:!0,title:"Success",content:"GateWay deleted Successfully"}})),Y(localStorage.getItem("OrganizationId")),n()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),P("/login")),V((function(){return{show:!0,title:"Error",content:e.response.data.error}})),n()}}),n()},openEditModal:function(e){q(!1),_(e),y(!0)},delgatewayId:U}):(0,x.jsx)(o.Z,{})]})]})}},36167:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(29439),r=n(78983),i=n(72791),o=n(52036),c=n(10781),s=(n(83970),n(80184)),l=n(77868),d=(n(2646),n(4942)),u=n(1413),m=n(24846),f=n(1278),p=n(31517),h=n(31397),v=n(51843),g=n(74479),x=n(99412),j=n(54546),b=n(25244),S=n(46599),y=n(18043),k=n(57689),Z=n(99579),I=function(e){var t=e.closeModal,n=e.saveHandler,o=e.data,c=(0,y.U)().dispatch,l=((0,k.s0)(),(0,i.useState)(!1)),I=(0,a.Z)(l,2),w=I[0],N=I[1],A=(0,i.useState)({customername:"",contactperson:"",email:"",address:"",city:"",street:"",postcode:"",phone:"",interval1:null,interval2:null,interval3:null,interval4:null}),C=(0,a.Z)(A,2),E=C[0],D=C[1];(0,i.useEffect)((function(){o&&D((function(){return{customername:o.customername,contactperson:o.contactperson,email:o.email,address:o.address,city:o.city,street:o.street,postcode:o.postcode,phone:o.phone,interval1:o.interval1,interval2:o.interval2,interval3:o.interval3,interval4:o.interval4}}))}),[o]);var F=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;("postcode"===n||"interval1"===n||"interval2"===n||"interval3"===n||"interval4"===n&&"checkbox"!==r)&&0===(o=parseInt(a,10)||0)&&(o=null),D((0,u.Z)((0,u.Z)({},E),{},(0,d.Z)({},n,"checkbox"===r?i:o)))},O=(0,Z.X)(),M=O.darkMode;O.setDarkMode;return(0,s.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:w,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),N(!0),!0===a.checkValidity()&&(c({type:"SHOW_LOADER"}),n(E),t())},children:[(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationName",children:"Organization Name"}),(0,s.jsxs)(r.YR,{children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:f.e,alt:"Name"})}),(0,s.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"customername",value:E.customername,onChange:F,feedbackInvalid:"Organization Name is required",id:"validationCustom01",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationContact",children:"Contact Person"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:p.g,alt:"Contact"})}),(0,s.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"contactperson",value:E.contactperson,onChange:F,feedbackInvalid:"Please enter a valid phone number",id:"validationCustom02",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationContact",children:"Phone"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:h.d,alt:"Contact"})}),(0,s.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"phone",value:E.phone,onChange:F,feedbackInvalid:"Please enter a valid phone number",id:"validationCustom02",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Organization Email"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:v.p,alt:"Email"})}),(0,s.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"email",value:E.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;D((0,u.Z)((0,u.Z)({},E),{},(0,d.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,c=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);N(c)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:"Organization Email is required",id:"validationCustomorganizationEmail",required:!0})]})]}),(0,s.jsx)(r.b7,{md:12,children:"Set CheckPoint Intervals"}),(0,s.jsxs)(r.b7,{md:3,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 1"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:g.$,alt:"Email"})}),(0,s.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval1",value:E.interval1,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,s.jsxs)(r.b7,{md:3,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 2"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:g.$,alt:"Email"})}),(0,s.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval2",value:E.interval2,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,s.jsxs)(r.b7,{md:3,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 3"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:g.$,alt:"Email"})}),(0,s.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval3",value:E.interval3,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,s.jsxs)(r.b7,{md:3,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 4"}),(0,s.jsxs)(r.YR,{className:"has-validation",children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:g.$,alt:"Email"})}),(0,s.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval4",value:E.interval4,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,s.jsxs)(r.YR,{children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:x.i,alt:"Address"})}),(0,s.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"address",value:E.address,onChange:F,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:6,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomCity",children:"City"}),(0,s.jsxs)(r.YR,{children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:j.V,alt:"City"})}),(0,s.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"city",value:E.city,onChange:F,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"City is required.",id:"validationCustom04",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:6,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomStreet",children:"Street"}),(0,s.jsxs)(r.YR,{children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:b.f,alt:"Street"})}),(0,s.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"street",value:E.street,onChange:F,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Street is required.",id:"validationCustom05",required:!0})]})]}),(0,s.jsxs)(r.b7,{md:12,children:[(0,s.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Postcode"}),(0,s.jsxs)(r.YR,{children:[(0,s.jsx)(r.wV,{children:(0,s.jsx)(m.Z,{icon:S.y,alt:"Postcode"})}),(0,s.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"postcode",value:E.postcode,onChange:F,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Postcode is required",id:"validationCustom05",required:!0})]})]}),(0,s.jsx)(r.b7,{xs:12,children:(0,s.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(M?"button-dark":""),type:"submit",children:o?"Edit Organization":"Add Organization"})})]})},w=n(91933),N=n(17834),A=[{key:"customername",label:"Organization Name"},{key:"contactperson",label:"Organization Contact"},{key:"email",label:"Contact Email"},{key:"calibration_date",label:"Calibration Date"},{key:"address",label:"Address"},{key:"street",label:"Street"},{key:"city",label:"City"},{key:"postcode",label:"Postcode"}],C=function(){var e=(0,c.Z)((function(e){return e.addData})),t=(0,w.useMutation)(N.Fi).mutate,n=(0,w.useMutation)(N.D2).mutate,d=(0,w.useMutation)(N.I8).mutate,u=(0,c.Z)((function(e){return e.data})),m=(0,i.useState)(!1),f=(0,a.Z)(m,2),p=f[0],h=f[1],v=(0,i.useState)(),g=(0,a.Z)(v,2),x=g[0],j=g[1],b=(0,i.useState)(!1),S=(0,a.Z)(b,2),C=S[0],E=S[1],D=(0,Z.X)().setShowToast,F=(0,i.useState)(!0),O=(0,a.Z)(F,2),M=O[0],z=(O[1],function(){h(!1)}),_=(0,y.U)().dispatch,H=(0,k.s0)(),L=function(){return _({type:"SHOW_LOADER"})},R=function(){return _({type:"HIDE_LOADER"})},q=(0,w.useMutation)(N.Mz);function V(a){L(),setTimeout((function(){C?t(a,{onSuccess:function(){R(),D((function(){return{show:!0,title:"Success",content:"Organization Created Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}})},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),H("/login")),R(),D((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):d({handler:a,editData:x},{onSuccess:function(){R(),D((function(){return{show:!0,title:"Success",content:"Organization Edited Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}})},onError:function(e){R(),D((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}var T=(0,Z.X)(),X=T.darkMode;T.setDarkMode;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.$,{title:C?"Add Organization":"Edit Organization",content:C?(0,s.jsx)(I,{closeModal:z,saveHandler:V}):(0,s.jsx)(I,{closeModal:z,saveHandler:V,data:x}),isOpen:p,onClose:z}),(0,s.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(X?"table_container_dark":""),children:[(0,s.jsxs)(r.rb,{children:[(0,s.jsx)(r.b7,{children:(0,s.jsx)("h3",{id:"".concat(X?"heading-dark":""),className:"pb-2",children:"Organizations"})}),(0,s.jsx)(r.b7,{children:(0,s.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(X?"button-dark":""),onClick:function(){E(!0),j(null),h(!0)},children:"Add Organization"})})]}),(0,s.jsx)(l.Z,{columns:A,data:u[0],openEditModal:function(e){E(!1),j(e),h(!0)},OnDeleteItem:function(t){L(),q.mutate(t,{onSuccess:function(){D((function(){return{show:!0,title:"Success",content:"Organization deleted Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}}),R()},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}})),R()}}),R()},delorgId:M})]})]})}},10918:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var a=n(93433),r=n(4942),i=n(1413),o=n(29439),c=n(72791),s=n(78983),l=n(66064),d=n(1278),u=n(19069),m=n(69959),f=n(24846),p=(n(93001),n(99579)),h=n(52036),v=n(18043),g=n(91933),x=n(57689),j=(n(10781),n(74165)),b=n(15861),S=n(52178),y=n(80491),k=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.A)(localStorage.getItem("token")),e.next=3,y.b.get("notificationsetup/".concat(t,"?type=email"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.A)(localStorage.getItem("token")),e.next=3,y.b.get("notificationsetup/".concat(t,"?type=phone"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.A)(localStorage.getItem("token")),e.next=3,y.b.get("notificationsetup/selected-users/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=localStorage.getItem("OrganizationId"),N=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.A)(localStorage.getItem("token")),e.next=3,y.b.post("notificationsetup/create/".concat(w),t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(t){var n,a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.A)(localStorage.getItem("token")),e.next=3,y.b.get("organization/credit/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=(n(36167),n(80184)),E=function(e){var t=e.closeModal,n=e.saveHandler,r=(e.data,(0,c.useState)([])),i=(0,o.Z)(r,2),l=i[0],d=i[1],u=(0,v.U)().dispatch,m=function(){return u({type:"HIDE_LOADER"})},f=(0,g.useMutation)(k).mutate,h=(0,p.X)(),x=h.darkMode;h.setDarkMode;var j=(0,c.useState)([]),b=(0,o.Z)(j,2),S=b[0],y=b[1],Z=(0,c.useState)(!1),I=(0,o.Z)(Z,2),w=I[0],N=I[1];return(0,c.useEffect)((function(){var e;e=localStorage.getItem("OrganizationId"),f(e,{onSuccess:function(e){m(),d(e.data)},onError:function(e){m()}})}),[localStorage.getItem("OrganizationId")]),(0,c.useEffect)((function(){var e=l.map((function(e,t){return e.is_email?t:null})).filter((function(e){return null!==e}));y(e)}),[l]),(0,C.jsxs)("div",{children:[(0,C.jsxs)(s.Sx,{children:[(0,C.jsx)(s.V,{children:(0,C.jsxs)(s.T6,{children:[(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:"Name"}),(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:"Email Address"}),(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:(0,C.jsx)(s.EC,{id:"defaultCheckAllNone",label:"All/None",checked:w,onChange:function(){N((function(e){var t=e?[]:Array.from({length:l.length},(function(e,t){return t}));return y(t),!e}))}})})]})}),(0,C.jsx)(s.NR,{children:l.map((function(e,t){return(0,C.jsxs)(s.T6,{children:[(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:e.name}),(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:e.email}),(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:(0,C.jsx)(s.EC,{id:"defaultCheck".concat(t+1),onChange:function(){return function(e){var t=S.includes(e),n=(0,a.Z)(S);t?n.splice(n.indexOf(e),1):n.push(e),y(n)}(t)},checked:S.includes(t)})})]},t)}))})]}),(0,C.jsx)("button",{onClick:function(){var e=S.map((function(e){return l[e]}));console.log("Checked Items:",e),n(e),t()},children:"Save"})]})},D=function(e){var t=e.closeModal,n=e.saveHandler,r=(e.data,(0,c.useState)([])),i=(0,o.Z)(r,2),l=i[0],d=i[1],u=(0,v.U)().dispatch,m=function(){return u({type:"HIDE_LOADER"})},f=(0,g.useMutation)(Z).mutate,h=(0,p.X)(),x=h.darkMode;h.setDarkMode;var j=(0,c.useState)([]),b=(0,o.Z)(j,2),S=b[0],y=b[1],k=(0,c.useState)(!1),I=(0,o.Z)(k,2),w=I[0],N=I[1];return(0,c.useEffect)((function(){var e;e=localStorage.getItem("OrganizationId"),f(e,{onSuccess:function(e){m(),d(e.data)},onError:function(e){m()}})}),[localStorage.getItem("OrganizationId")]),(0,c.useEffect)((function(){var e=l.map((function(e,t){return e.is_email?t:null})).filter((function(e){return null!==e}));y(e)}),[l]),(0,C.jsxs)("div",{children:[(0,C.jsxs)(s.Sx,{children:[(0,C.jsx)(s.V,{children:(0,C.jsxs)(s.T6,{children:[(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:"Name"}),(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:"Phone Number"}),(0,C.jsx)(s.is,{scope:"col",className:"table-data-light ".concat(x?"table-data-dark":""),children:(0,C.jsx)(s.EC,{id:"defaultCheckAllNone",label:"All/None",checked:w,onChange:function(){N((function(e){var t=e?[]:Array.from({length:l.length},(function(e,t){return t}));return y(t),!e}))}})})]})}),(0,C.jsx)(s.NR,{children:l.map((function(e,t){return(0,C.jsxs)(s.T6,{children:[(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:e.name}),(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:e.phonenumber}),(0,C.jsx)(s.NN,{className:"table-data-light ".concat(x?"table-data-dark":""),children:(0,C.jsx)(s.EC,{id:"defaultCheck".concat(t+1),onChange:function(){return function(e){var t=S.includes(e),n=(0,a.Z)(S);t?n.splice(n.indexOf(e),1):n.push(e),y(n)}(t)},checked:S.includes(t)})})]},t)}))})]}),(0,C.jsx)("button",{onClick:function(){var e=S.map((function(e){return l[e]}));console.log("Checked Items:",e),n(e),t()},children:"Save"})]})},F=function(){var e=(0,c.useState)([]),t=(0,o.Z)(e,2),n=(t[0],t[1],(0,v.U)().dispatch),j=function(){return n({type:"HIDE_LOADER"})},b=(0,g.useMutation)(I).mutate,S=(0,g.useMutation)(A).mutate,y=(0,g.useMutation)(N).mutate;function k(e){b(e,{onSuccess:function(e){j(),Se(e.data),Ie(e.data)},onError:function(e){j()}})}var Z=(0,c.useState)([]),w=(0,o.Z)(Z,2),F=w[0],O=w[1];(0,c.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&"Select Organization"!==e?e&&"Select Organization"!==e&&(k(e),S(e,{onSuccess:function(e){j(),O(e.data)},onError:function(e){j()}})):ne({show:!0,title:"Error",content:"Please select an organization first.",color:"#FF0000"})}),[localStorage.getItem("OrganizationId")]);var M=(0,c.useState)(!1),z=(0,o.Z)(M,2),_=z[0],H=z[1],L=(0,c.useState)(null),R=(0,o.Z)(L,2),q=R[0],V=R[1],T=(0,c.useState)(!1),X=(0,o.Z)(T,2),B=X[0],U=X[1],P=(0,c.useState)(!1),W=(0,o.Z)(P,2),Y=W[0],G=W[1],J=(0,c.useState)(!0),Q=(0,o.Z)(J,2),K=Q[0],$=Q[1],ee=(0,c.useState)(!1),te=(0,o.Z)(ee,2),ne=(te[0],te[1],(0,p.X)().setShowToast),ae=((0,x.s0)(),function(){U(!1)}),re=function(){G(!1)},ie=(0,c.useState)([]),oe=(0,o.Z)(ie,2),ce=oe[0],se=(oe[1],(0,c.useState)(!1)),le=(0,o.Z)(se,2),de=le[0],ue=le[1],me=(0,c.useState)({email:"",textemailaddress:"",smsnumber:"",texttospeechnumber:""}),fe=(0,o.Z)(me,2),pe=fe[0],he=fe[1];(0,c.useEffect)((function(){ce&&he((function(){return{email:ce.email,textemailaddress:ce.textemailaddress,smsnumber:ce.smsnumber,texttospeechnumber:ce.texttospeechnumber}}))}),[ce]);var ve=function(e){var t=e.target,n=t.name,a=t.value,o=t.type,c=t.checked;he((0,i.Z)((0,i.Z)({},pe),{},(0,r.Z)({},n,"checkbox"===o?c:a)))},ge=function(e){var t=e.target,n=t.name,a=t.value,o=t.type,c=t.checked;he((0,i.Z)((0,i.Z)({},pe),{},(0,r.Z)({},n,"checkbox"===o?c:a)));var s=e.target.value,l=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s);ue(l)},xe=(0,c.useState)([]),je=(0,o.Z)(xe,2),be=je[0],Se=je[1],ye=(0,c.useState)([]),ke=(0,o.Z)(ye,2),Ze=ke[0],Ie=ke[1];function we(e){var t=[].concat((0,a.Z)(be),(0,a.Z)(Ze));e.preventDefault(),y(t,{onSuccess:function(){j(),k(localStorage.getItem("OrganizationId"))},onError:function(e){j(),k(localStorage.getItem("OrganizationId"))}})}var Ne=(0,p.X)(),Ae=Ne.darkMode;Ne.setDarkMode;return(0,C.jsxs)(C.Fragment,{children:[!K&&B&&(0,C.jsx)(h.$,{title:_?"Select User":"Edit SMS Number",content:(0,C.jsx)(D,{closeModal:ae,saveHandler:function(e){Ie(e)},data:q}),isOpen:B,onClose:ae}),!K&&Y&&(0,C.jsx)(h.$,{title:_?"Select User":"Edit Alarm Notification",content:(0,C.jsx)(E,{closeModal:re,saveHandler:function(e){Se(e)},data:q}),isOpen:Y,onClose:re}),(0,C.jsxs)("div",{children:[(0,C.jsx)(f.Z,{className:"pb-2",id:"".concat(Ae?"heading-dark":""),icon:l.A,size:"xxl"}),(0,C.jsx)("h3",{className:"pb-2",id:"".concat(Ae?"heading-dark":""),children:"Alarm Notification"})]}),(0,C.jsx)("div",{children:(0,C.jsxs)(s.uz,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,activeItemKey:2,children:[(0,C.jsxs)(s.Ob,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),itemKey:1,children:[(0,C.jsx)(s.Lv,{className:" ".concat(Ae?"table_container_dark":"table_container_light heading-dark"),style:{fontSize:"50px",fontFamily:"sans-serif"},children:"Notification Setup"}),(0,C.jsx)(s.qI,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),children:(0,C.jsxs)("left",{className:"pb-2",id:"".concat(Ae?"heading-dark":""),children:["plugin adds the appropriate classes that we use to style each element. These classes are very useful for the necessory implementation of the work and also the esuresance of task control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with"," ","Alaram Setup custom CSS or overriding our default","User setup, though the transition does limit overflow."]})})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(s.Ob,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,itemKey:2,children:[(0,C.jsx)(s.Lv,{style:{fontSize:"50px",fontFamily:"sans-serif"},className:"pb-2",id:"".concat(Ae?"heading-dark":""),children:"SMS Credits"}),(0,C.jsxs)(s.qI,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:[(0,C.jsx)("p",{className:"pb-2",id:"".concat(Ae?"heading-dark":""),children:"* It is hidden by default, until the collapse plugin adds the appropriate classes that we use to to be aware of something is necessary"}),(0,C.jsx)("br",{}),(0,C.jsx)(s.Sx,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,bordered:!0,children:(0,C.jsxs)(s.NR,{children:[(0,C.jsxs)(s.T6,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:[(0,C.jsx)(s.NN,{style:{width:"800px"},className:"pb-2 ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,id:"".concat(Ae?"heading-dark":"heading-light"),children:"Organization Credit"}),(0,C.jsx)(s.NN,{className:"pb-2 ".concat(Ae?"table_container_dark":"table_container_light"),id:"".concat(Ae?"heading-dark":""),children:F||"0"})]}),(0,C.jsxs)(s.T6,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),children:[(0,C.jsx)(s.NN,{className:"pb-2 ".concat(Ae?"table_container_dark":"table_container_light"),id:"".concat(Ae?"heading-dark":""),children:"Facility Credit"}),(0,C.jsx)(s.NN,{className:"pb-2 ".concat(Ae?"table_container_dark":"table_container_light"),id:"".concat(Ae?"heading-dark":""),children:"0"})]})]})})]})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(s.Ob,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,itemKey:3,children:[(0,C.jsx)(s.Lv,{className:"pb-2",id:"".concat(Ae?"heading-dark":""),style:{fontSize:"50px",fontFamily:"sans-serif"},children:"Alarms"}),(0,C.jsx)(s.qI,{className:" ".concat(Ae?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:(0,C.jsxs)(s.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:de,onSubmit:we,style:{marginBottom:"26px"},children:[(0,C.jsxs)(s.b7,{md:6,children:[(0,C.jsx)(s.L8,{id:"".concat(Ae?"heading-dark":""),htmlFor:"validationFirstName",children:"Email Address"}),(0,C.jsxs)(s.YR,{style:{height:"90px"},children:[(0,C.jsx)(s.wV,{children:(0,C.jsx)(f.Z,{icon:d.e,alt:"Name"})}),(0,C.jsx)("textarea",{className:"form-control ".concat(Ae?"input-dark":"input-light"),name:"email",value:be.map((function(e){return e.email})).join("\n"),onChange:ve,readOnly:!0,onClick:function(){H(!0),V(null),G(!0),$(!1)},placeholder:"Enter your email...",required:!0})]})]}),(0,C.jsxs)(s.b7,{md:6,children:[(0,C.jsx)(s.L8,{id:"".concat(Ae?"heading-dark":""),htmlFor:"validationLastName",children:"Plain text email Address"}),(0,C.jsxs)(s.YR,{className:"has-validation",style:{height:"90px"},children:[(0,C.jsx)(s.wV,{children:(0,C.jsx)(f.Z,{icon:u.m,alt:"text to email"})}),(0,C.jsx)(s.jO,{type:"text",className:"input-light pt-0 ".concat(Ae?"input-dark":""),name:"textemailaddress",value:pe.textemailaddress,onChange:ve,feedbackInvalid:"Plain Text Email Address is required",id:"validationCustom02",required:!0})]})]}),(0,C.jsxs)(s.b7,{md:6,children:[(0,C.jsx)(s.L8,{id:"".concat(Ae?"heading-dark":""),htmlFor:"validationEmail",children:"SMS Number"}),(0,C.jsxs)(s.YR,{className:"has-validation",style:{height:"90px"},children:[(0,C.jsx)(s.wV,{children:(0,C.jsx)(f.Z,{icon:m.i,alt:"sms number"})}),(0,C.jsx)("textarea",{type:"text",className:"form-control ".concat(Ae?"input-dark":"input-light"),name:"smsnumber",value:Ze.map((function(e){return e.phonenumber})).join("\n"),onChange:ge,onClick:function(){H(!0),V(null),U(!0),$(!1)},"aria-describedby":"inputGroupPrependFeedback",id:"validationEmail",required:!0})]})]}),(0,C.jsxs)(s.b7,{md:6,children:[(0,C.jsx)(s.L8,{id:"".concat(Ae?"heading-dark":""),htmlFor:"validationEmail",children:"Text to Speech Number"}),(0,C.jsxs)(s.YR,{className:"has-validation",style:{height:"90px"},children:[(0,C.jsx)(s.wV,{children:(0,C.jsx)(f.Z,{icon:m.i,alt:"text "})}),(0,C.jsx)(s.jO,{type:"number",className:"input-light pt-0 ".concat(Ae?"input-dark":""),name:"texttospeechnumber",value:pe.texttospeechnumber,onChange:ge,"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Text is required",id:"validationText",required:!0})]})]}),(0,C.jsx)(s.b7,{xs:12,children:(0,C.jsx)(s.u5,{color:"primary",className:"float-end",id:"".concat(Ae?"button-dark":""),type:"submit",children:ce?"Save ":"Add  Details"})})]})})]})]})})]})}},83001:function(e,t,n){n.r(t);n(72791);var a=n(78983),r=n(24846),i=n(18534),o=n(80184);t.default=function(){return(0,o.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,o.jsx)(a.KB,{children:(0,o.jsx)(a.rb,{className:"justify-content-center",children:(0,o.jsxs)(a.b7,{md:6,children:[(0,o.jsxs)("div",{className:"clearfix",children:[(0,o.jsx)("h1",{className:"float-start display-3 me-4",children:"404"}),(0,o.jsxs)("h4",{className:"pt-3",children:["Oops! You","'","re lost."]}),(0,o.jsx)("p",{className:"text-medium-emphasis float-start",children:"The page you are looking for was not found."})]}),(0,o.jsxs)(a.YR,{className:"input-prepend",children:[(0,o.jsx)(a.wV,{children:(0,o.jsx)(r.Z,{icon:i.M})}),(0,o.jsx)(a.jO,{type:"text",placeholder:"What are you looking for?"}),(0,o.jsx)(a.u5,{color:"info",children:"Search"})]})]})})})})}},80242:function(e,t,n){n.r(t);var a=n(29439),r=n(78983),i=n(72791),o=n(91933),c=(n(93001),n(52036)),s=n(99579),l=n(18043),d=n(96062),u=n(56019),m=n(84254),f=n(39593),p=n(77868),h=(n(92999),n(66757)),v=n(80184),g=[{key:"aws_sensorid",label:"Sensor ID"},{key:"sensorname",label:"Sensor Name"},{key:"devices.departments.departmentname",label:"Department Name"},{key:"devices.devicename",label:"Device Name"}];t.default=function(){var e,t=(0,l.U)().dispatch,n=function(){return t({type:"SHOW_LOADER"})},x=function(){return t({type:"HIDE_LOADER"})},j=JSON.parse(localStorage.getItem("permissions")),b=(0,h.Z_)(j,h.BA,h.H2),S=(0,h.Z_)(j,h.vw,h.H2),y=(0,h.Z_)(j,h.JK,h.H2),k=(0,h.Z_)(j,h.iH,h.H2),Z=(0,o.useMutation)(u.LP).mutate,I=(0,o.useMutation)(d.Xo).mutate;var w=(0,o.useMutation)(u.Zo).mutate,N=(0,o.useMutation)(u.I$).mutate,A=(0,i.useState)(!1),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,i.useState)(),O=(0,a.Z)(F,2),M=O[0],z=O[1],_=(0,i.useState)(!1),H=(0,a.Z)(_,2),L=(H[0],H[1]),R=(0,i.useState)(!1),q=(0,a.Z)(R,2),V=q[0],T=q[1],X=(0,i.useState)(),B=(0,a.Z)(X,2),U=B[0],P=B[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,s.X)().setShowToast,K=(0,o.useMutation)(u.Tn),$=(0,i.useState)(!1),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ae=(0,i.useState)(""),re=(0,a.Z)(ae,2),ie=re[0],oe=re[1],ce=(0,i.useState)(""),se=(0,a.Z)(ce,2),le=se[0],de=se[1],ue=(0,i.useState)(!0),me=(0,a.Z)(ue,2),fe=me[0],pe=(me[1],(0,i.useState)([])),he=(0,a.Z)(pe,2),ve=he[0],ge=he[1],xe=function(){D(!1)};var je=(0,i.useState)([]),be=(0,a.Z)(je,2),Se=be[0],ye=be[1],ke=(0,o.useMutation)(d.oy).mutate;var Ze=(0,o.useMutation)(u.IN).mutate;var Ie=(0,o.useMutation)(u.Qc).mutate;function we(e){Ie(e,{onSuccess:function(e){ge(e)},onError:function(){}})}var Ne=(0,o.useMutation)(u.zs).mutate;function Ae(e){Ne(e,{onSuccess:function(e){ge(e)},onError:function(){}})}var Ce=(0,o.useMutation)(u.fb).mutate;var Ee=localStorage.getItem("OrganizationId"),De=localStorage.getItem("facilityId"),Fe=localStorage.getItem("departmentId");function Oe(e){n(),setTimeout((function(){G?Z(e,{onSuccess:function(e){localStorage.setItem("sensorId",e.id),localStorage.setItem("deviceid",e.deviceId),x(),Q((function(){return{show:!0,title:"Success",content:"Device Sensor Created Successfully"}}))},onError:function(e){x(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}}):w({handler:e,editData:U},{onSuccess:function(){x(),Q((function(){return{show:!0,title:"Success",content:"Device Edited Successfully"}}))},onError:function(e){x(),Q((function(){var t;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){b?Ee&&De&&Fe?Ae(Fe):Ee&&De?we(De):Ee&&Ze(Ee,{onSuccess:function(e){ge(e)},onError:function(){}}):S?De?we(De):De&&Fe&&Ae(Fe):y&&De&&Fe&&Ae(Fe),b||S||y?function(e){ke(e,{onSuccess:function(e){x(),ye(e)},onError:function(e){x()}})}(localStorage.getItem("departmentId")):k&&I("",{onSuccess:function(e){x(),ye(e)},onError:function(e){x()}})}),[Ee,De,Fe]);var Me=(0,s.X)(),ze=Me.darkMode;Me.setDarkMode;return(0,v.jsx)(v.Fragment,{children:te?(0,v.jsx)(f.Z,{closeModal:xe,saveHandler:Oe,data:ie,sensorData:le}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.$,{title:G?"Add Equipment sensor":"Edit Equipment sensor",content:G?(0,v.jsx)(m.Z,{closeModal:xe,saveHandler:Oe,openAddSensorConfigurationModal:function(){T(!0)},AddsensorConfiguration:V,setisModalSensorOpen:L}):(0,v.jsx)(m.Z,{closeModal:xe,saveHandler:Oe,data:U}),isOpen:E,onClose:xe}),(0,v.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(ze?"table_container_dark":""),children:[(0,v.jsxs)(r.rb,{children:[(0,v.jsx)(r.b7,{md:6,children:(0,v.jsx)("h3",{className:"pb-2",id:"".concat(ze?"heading-dark":""),children:"Equipment Sensors"})}),(0,v.jsx)(r.b7,{md:3,className:"float-end",children:(0,v.jsxs)("select",{size:"sm",className:" form-select ".concat(ze?"select-dark":""),"aria-label":"Department",onChange:function(e){var t=e.target.value;"Select Device"!==t&&(z(t),Ce(t,{onSuccess:function(e){ge(e)},onError:function(){}}))},value:M,children:[(0,v.jsx)("option",{children:"Select Equipment"}),null===Se||void 0===Se||null===(e=Se.data)||void 0===e?void 0:e.map((function(e){return(0,v.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})}),(0,v.jsx)(r.b7,{md:3,children:(0,v.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),P(null),D(!0)},children:"Add Equipment Sensor"})})]}),(0,v.jsx)(p.Z,{columns:g,data:null===ve||void 0===ve?void 0:ve.data,OnDeleteItem:function(e){n(),K.mutate(e,{onSuccess:function(){Q((function(){return{show:!0,title:"Success",content:"Device Sensor deleted Successfully"}})),x()},onError:function(e){Q((function(){var t;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data}})),x()}}),x()},openEditModal:function(e){J(!1),P(e),D(!0)},viewConfig:function(e){localStorage.setItem("sensorId",e.sensorid),de(e),N(e.sensorid,{onSuccess:function(e){x(),oe(e.data),ne(!0)},onError:function(e){x(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})},Deldevdsensor:fe})]})]})})}},81882:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),c=n(52036),s=n(99579),l=n(18043),d=n(57689),u=n(25741),m=(n(56019),n(4942)),f=n(1413),p=n(10781),h=n(91933),v=(n(24846),n(80184)),g=function(e){var t,n,o=e.closeModal,c=e.saveHandler,d=e.data,g=(0,l.U)().dispatch,x=(0,i.useState)(!1),j=(0,a.Z)(x,2),b=j[0],S=j[1],y=(0,p.Z)((function(e){return e.data})),k=(0,i.useState)(),Z=(0,a.Z)(k,2),I=Z[0],w=Z[1],N=(0,i.useState)({customerid:I,aws_sensorid:""}),A=(0,a.Z)(N,2),C=A[0],E=A[1];(0,i.useEffect)((function(){d&&E({aws_sensorid:d.aws_sensorid,id:Number(d.sensorid),customerid:Number(d.customerid)})}),[d]);var D=(0,h.useMutation)(u.aI),F=D.mutate,O=D.data;(0,i.useEffect)((function(){F("",{onSuccess:function(e){},onError:function(e){console.log(e)}})}),[]);var M=(0,s.X)(),z=M.darkMode;M.setDarkMode;return(0,v.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:b,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),S(!0),!0===t.checkValidity()&&(g({type:"SHOW_LOADER"}),c(C),e.preventDefault(),o())},children:[d?null:(0,v.jsxs)(r.b7,{md:12,children:[(0,v.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationSensorId",children:"Sensor Id*"}),(0,v.jsxs)(r.LX,{"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid sensor id",name:"aws_sensorid",className:" form-select ".concat(z?"select-dark":""),value:C.aws_sensorid,id:"validationSensorId",onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;E((0,f.Z)((0,f.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:a)))},children:[(0,v.jsx)("option",{children:"Select Sensors"}),null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},t)}))]})]}),(0,v.jsxs)(r.b7,{md:12,children:[(0,v.jsx)(r.L8,{id:"".concat(z?"heading-dark":""),htmlFor:"validationOrganization",children:"Organization*"}),(0,v.jsxs)(r.LX,{"aria-describedby":"validationCustom04Feedback",className:" form-select ".concat(z?"select-dark":""),name:"organization",value:C.customerid,feedbackInvalid:"Please select a valid Organization",id:"validationOrganization",onChange:function(e){var t=parseInt(e.target.value,10)||0;E((0,f.Z)((0,f.Z)({},C),{},{customerid:t})),w(t)},required:!0,children:[(0,v.jsx)("option",{children:"Select Organization"}),null===(n=y[0])||void 0===n?void 0:n.map((function(e){return(0,v.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,v.jsx)(r.b7,{xs:12,children:(0,v.jsx)(r.u5,{color:"primary",type:"submit",children:d?"Edit Organization Sensor":"Add Organization Sensor"})})]})},x=n(77868),j=[{key:"aws_sensorid",label:"AWS Sensor ID"},{key:"customers.customername",label:"Assigned Organization"}],b=function(){var e=(0,d.s0)(),t=(0,i.useState)([]),n=(0,a.Z)(t,2),m=n[0],f=n[1],p=(0,h.useMutation)(u.fY).mutate;var b=(0,h.useMutation)(u.S9).mutate;var S=(0,h.useMutation)(u.iR).mutate,y=(0,h.useMutation)(u.zw).mutate,k=(0,i.useState)(!1),Z=(0,a.Z)(k,2),I=Z[0],w=Z[1],N=(0,i.useState)(),A=(0,a.Z)(N,2),C=A[0],E=A[1],D=(0,i.useState)(!1),F=(0,a.Z)(D,2),O=F[0],M=F[1],z=(0,l.U)().dispatch,_=function(){return z({type:"SHOW_LOADER"})},H=function(){return z({type:"HIDE_LOADER"})},L=(0,s.X)().setShowToast,R=(0,h.useMutation)(u.Kj),q=(0,i.useState)(!0),V=(0,a.Z)(q,2),T=V[0],X=(V[1],localStorage.getItem("OrganizationId"),function(){w(!1)});function B(t){_(),setTimeout((function(){O?S(t,{onSuccess:function(){H(),L((function(){return{show:!0,title:"Success",content:"Organization Sensor Created Successfully"}}))},onError:function(t){"ERR_BAD_REQUEST"===t.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),e("/login")),H(),L((function(){var e,n;return{show:!0,title:"Error",content:null===t||void 0===t||null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,color:"#FF0000"}}))}}):y({handler:t,editData:C},{onSuccess:function(){H(),L((function(){return{show:!0,title:"Success",content:"Organization Sensor Edited Successfully"}}))},onError:function(e){H(),L((function(){return{show:!0,title:"Error",content:e.response.data,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&void 0!==e&&"Select Organization"!==e?b(e,{onSuccess:function(e){f(e.data)},onError:function(e){H()}}):p("",{onSuccess:function(e){f(e)},onError:function(e){H()}})}),[localStorage.getItem("OrganizationId")]);var U=(0,s.X)(),P=U.darkMode;U.setDarkMode;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.$,{title:O?"Add Organization sensor":"Edit Organization sensor",content:O?(0,v.jsx)(g,{closeModal:X,saveHandler:B}):(0,v.jsx)(g,{closeModal:X,saveHandler:B,data:C}),isOpen:I,onClose:X}),(0,v.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(P?"table_container_dark":""),children:[(0,v.jsxs)(r.rb,{children:[(0,v.jsx)(r.b7,{children:(0,v.jsx)("h3",{className:"pb-2",id:"".concat(P?"heading-dark":""),children:"Organization Sensors"})}),(0,v.jsx)(r.b7,{children:(0,v.jsx)(r.u5,{color:"primary",id:"".concat(P?"button-dark":""),className:"float-end",onClick:function(){M(!0),E(null),w(!0)},children:"Add Organization Sensor"})})]}),m?(0,v.jsx)(x.Z,{columns:j,data:m,OnDeleteItem:function(e){_(),R.mutate(e,{onSuccess:function(){L((function(){return{show:!0,title:"Success",content:"Organization Sensor deleted Successfully"}})),H()},onError:function(e){L((function(){return{show:!0,title:"Error",content:e.response.data}})),H()}}),H()},openEditModal:function(e){M(!1),E(e),w(!0)},delOrgsSensorId:T}):(0,v.jsx)(o.Z,{})]})]})}},77868:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(29439),r=n(72791),i=n(78983),o=n(24846),c=n(93400),s=n(10982),l=n(98240),d=n(17256),u=n(99579),m=n(80184),f=function(e){var t=e.title,n=e.content,a=e.onClose,r=e.isOpen,o=e.OnDeleteClick,c=e.id,s=(0,u.X)(),l=s.darkMode;s.setDarkMode;return(0,m.jsxs)(i.Tk,{id:"delete_modal",visible:r,onClose:a,children:[(0,m.jsx)(i.p0,{closeButton:!0,className:"modal-light ".concat(l?"modal-dark":""),children:(0,m.jsx)(i.fl,{id:"".concat(l?"heading-dark":""),children:t})}),(0,m.jsxs)(i.sD,{className:"modal-light pt-0 ".concat(l?"modal-dark":""),children:[n,(0,m.jsxs)("h4",{className:"ms-3 pt-2",id:"".concat(l?"heading-dark":""),children:["Are you sure you want to delete?"," "]}),(0,m.jsxs)(i.b7,{xs:11,className:"modal-light ".concat(l?"modal-dark":""),children:[(0,m.jsx)(i.u5,{color:"danger",className:"float-end ms-2",onClick:function(){o(c),a()},children:"Delete"}),(0,m.jsx)(i.u5,{color:"primary",className:"float-end",onClick:function(){a()},children:"Cancel"})]})]})]})},p=function(e){var t=e.columns,n=void 0===t?[]:t,p=e.data,h=void 0===p?[]:p,v=e.openEditModal,g=e.OnDeleteItem,x=e.viewConfig,j=e.deldevId,b=e.deldepId,S=e.delfacId,y=e.delorgId,k=e.deldevsSensorId,Z=e.delfacstaffId,I=e.delUserId,w=e.deldevstaffId,N=e.deldepstaffId,A=e.delgatewayId,C=e.Deldevdsensor,E=e.delOrgsSensorId,D=e.selectedRole,F=e.openAssignModal,O=function(e,t){return t.split(".").reduce((function(e,t){return null===e||void 0===e?void 0:e[t]}),e)},M=(0,r.useState)(""),z=(0,a.Z)(M,2),_=z[0],H=z[1],L=(0,r.useState)(!1),R=(0,a.Z)(L,2),q=R[0],V=R[1],T=(0,u.X)(),X=T.darkMode;T.setDarkMode;return(0,m.jsxs)("div",{className:"table-responsive-x",children:[(0,m.jsx)(f,{title:"Delete",content:"",OnDeleteClick:g,isOpen:q,onClose:function(){V(!1)},id:_}),(0,m.jsxs)(i.Sx,{hover:!0,className:"custom-table",children:[(0,m.jsx)(i.V,{children:(0,m.jsxs)(i.T6,{children:[n.map((function(e){return(0,m.jsx)(i.is,{className:"table-data-light ".concat(X?"table-data-dark":""),children:e.label},e.key)})),x?(0,m.jsx)(i.is,{className:"table-data-light ".concat(X?"table-data-dark":""),children:"View Config"},"viewConfig"):null,(0,m.jsx)(i.is,{className:"table-data-light ".concat(X?"table-data-dark":""),children:"Actions"},"actions")]})}),(0,m.jsxs)(i.NR,{children:[(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h?void 0:h.map((function(e,t){return(0,m.jsxs)(i.T6,{children:[n.map((function(t){return(0,m.jsx)("td",{className:"table-data-light ".concat(X?"table-data-dark":""),children:t.key.includes(".")?O(e,t.key):e[t.key]},t.key)})),x?(0,m.jsx)("td",{className:"table-data-light ".concat(X?"table-data-dark":""),children:(0,m.jsx)(o.Z,{style:{cursor:"pointer",width:"25px",height:"22px"},color:"secondary",icon:c.j,onClick:function(){return x(e)}})},"viewConfig"):null,(0,m.jsx)("td",{className:"table-data-light ".concat(X?"table-data-dark":""),children:(0,m.jsxs)(i.w5,{children:[(0,m.jsx)(i.SQ,{color:"secondary",children:(0,m.jsx)(o.Z,{icon:s.M})}),(0,m.jsxs)(i.$H,{className:" pt-0 ".concat(X?"dropdown-dark":""),children:[D?(0,m.jsxs)(i.$f,{onClick:function(){return F(e)},children:[(0,m.jsx)(o.Z,{icon:l.l,className:"me-2"}),"Assigned"===D?"UnAssign":"Assign"]}):null,(0,m.jsxs)(i.$f,{onClick:function(){return v(e)},children:[(0,m.jsx)(o.Z,{icon:l.l,className:"me-2"}),"Edit"]}),(0,m.jsxs)(i.$f,{onClick:function(){y?H(e.customerid):S?H(e.facilityid):b?H(e.departmentid):j?H(e.deviceid):k?H(e.sensorid):Z||N||w||I?H(e):A?H(e.gatewayid):(C||E)&&H(e.sensorid),V(!0)},children:[(0,m.jsx)(o.Z,{icon:d.N,className:"me-2"}),"Delete"]})]})]})},"actions")]},t)}))),0===(null===h||void 0===h?void 0:h.length)&&(0,m.jsx)(i.T6,{children:(0,m.jsx)("td",{colSpan:n.length+1,className:"text-center",children:(0,m.jsx)("b",{children:"No data found"})})},"noData")]})]})]})}},53469:function(e,t,n){e.exports=n.p+"static/media/Logo-removebg-preview.668a457580bccc800296.png"}}]);
//# sourceMappingURL=313.2ea1c0e3.chunk.js.map