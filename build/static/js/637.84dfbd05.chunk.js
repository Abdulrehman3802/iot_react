"use strict";(self.webpackChunksafeline_IOT=self.webpackChunksafeline_IOT||[]).push([[637],{93001:function(e,t,n){n(72791);var a=n(47356),r=n(80184);t.Z=function(){return(0,r.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center",style:{height:"100vh"},children:(0,r.jsx)(a.n,{size:100,thickness:120,speed:100,color:"#0000FF",secondaryColor:"rgba(0, 0, 0, 0.44)"})})}},2635:function(e,t,n){n.d(t,{Lk:function(){return ne},tf:function(){return he},S8:function(){return Le},q3:function(){return qe}});var a=n(72791),r=n(39593),i=n(57689),o=n(66757),s=n(80184),c=function(e){var t=localStorage.getItem("permissions");return(0,o.Z_)(t,e.pageAccess,e.pageAction)?(0,s.jsx)(e.component,{}):(0,s.jsx)(i.Fg,{to:"/error",replace:!0})},l=n(83001),d=a.lazy((function(){return n.e(969).then(n.bind(n,96969))})),u=a.lazy((function(){return n.e(495).then(n.bind(n,1495))})),m=[{path:"/",exact:!0,name:"Home"},{path:"/error",name:"Error",element:l.default},{path:"/user-management",name:"UserManagement",element:d},{path:"/devices-sensors/sensor-configration",name:"SensorConfigration",element:r.Z},{path:"/alarm-thresholds",name:"AlramThreshold",element:u}],p=n(78983),f=n(18043),h=n(93001),v=n(99579),x=n(32152),g=n(36167),j=n(2646),b=n(99175),S=n(37295),y=n(41401),k=n(96624),Z=n(7297),I=n(80464),N=n(18186),w=n(81882),A=n(80242),C=n(96623),E=n(73853),D=n(29439),F=n(68861),O=n(91933),M=function(e){var t=e.type,n=(0,a.useState)([]),r=(0,D.Z)(n,2),i=r[0],o=r[1],c=(0,O.useMutation)(F.E_).mutate,l=(0,O.useMutation)(F.Wp).mutate,d=(0,O.useMutation)(F.sI).mutate;return(0,a.useEffect)((function(){"Active Periods Suppression"==t?c("",{onSuccess:function(e){o(e.data)},onError:function(e){}}):"Upcoming Periods Suppression"==t?d("",{onSuccess:function(e){o(e.data)},onError:function(e){}}):l("",{onSuccess:function(e){o(e.data)},onError:function(e){}})}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{style:{color:"black",marginTop:"30px"},children:t}),(0,s.jsx)("div",{children:(0,s.jsxs)(p.Sx,{bordered:!0,responsive:!0,children:[(0,s.jsx)(p.V,{children:(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.is,{children:"Sensor"}),(0,s.jsx)(p.is,{children:"Start"}),(0,s.jsx)(p.is,{children:"End"}),(0,s.jsx)(p.is,{children:"Duration"}),(0,s.jsx)(p.is,{children:"Inform User"})]})}),(0,s.jsx)(p.NR,{children:i.map((function(e,t){return(0,s.jsxs)(p.T6,{children:[(0,s.jsxs)(p.NN,{children:[e.sensors.sensorname,"-",e.sensors.aws_sensorid]}),(0,s.jsx)(p.NN,{children:e.start_time}),(0,s.jsx)(p.NN,{children:e.end_time}),(0,s.jsx)(p.NN,{children:e.duration}),(0,s.jsx)(p.NN,{children:e.informuser?"True":"False"})]},t)}))})]})})]})},_=n(4942),z=n(1413),H=n(25741),L=function(){var e=(0,a.useState)({startTime:"",startDate:"",endTime:"",endDate:"",notification:!1}),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=((0,f.U)().dispatch,(0,a.useState)([])),o=(0,D.Z)(i,2),c=o[0],l=o[1],d=(0,O.useMutation)(H.S9).mutate,u=(0,v.X)().setShowToast,m=(0,O.useMutation)(F.xO).mutate;var h=function(e){"informUser"!==e.target.id?r((0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},e.target.id,e.target.value))):r((0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},e.target.id,e.target.checked)))};return(0,a.useEffect)((function(){var e;e=localStorage.getItem("OrganizationId"),d(e,{onSuccess:function(e){l(e.data)},onError:function(e){}})}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",overflowX:"auto",padding:"20px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"30px"},children:[(0,s.jsxs)("div",{style:{width:"50%"},children:[(0,s.jsx)("h4",{style:{color:"black"},children:"Start Time"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"5px"},children:[(0,s.jsx)(p.jO,{style:{width:"200px"},type:"time",id:"startTime",value:n.startTime,onChange:function(e){h(e)}}),(0,s.jsx)(p.jO,{style:{width:"200px"},type:"date",id:"startDate",value:n.startDate,onChange:function(e){h(e)}})]}),(0,s.jsx)("br",{}),(0,s.jsx)("h4",{style:{color:"black"},children:"End Time"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"5px"},children:[(0,s.jsx)(p.jO,{style:{width:"200px"},type:"time",id:"endTime",value:n.endTime,onChange:function(e){h(e)}}),(0,s.jsx)(p.jO,{style:{width:"200px"},type:"date",id:"endDate",value:n.endDate,onChange:function(e){h(e)}})]})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"50%",gap:"5px",padding:"10px"},children:[(0,s.jsx)("h4",{style:{color:"black"},children:"Notification"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.EC,{id:"notification",checked:n.notification,onChange:function(e){h(e)}}),(0,s.jsxs)("span",{style:{color:"black"},children:[" ","inform user user with the always notify settings, who have access to these sensors or system will always be notified regardless of this setting"]})," "]})]})]}),(0,s.jsx)("br",{}),(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{htmlFor:"validationSensorId",children:(0,s.jsx)("h4",{children:"Sensors"})}),(0,s.jsxs)(p.LX,{"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid sensor id",name:"sensorid",value:n.sensorid,id:"sensorid",onChange:function(e){h(e)},children:[(0,s.jsx)("option",{children:"Select Sensors"}),null===c||void 0===c?void 0:c.map((function(e,t){return(0,s.jsxs)("option",{value:e.sensorid,children:[e.aws_sensorid,"-",e.sensorname]},t)}))]})]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{style:{textAlign:"",marginTop:"10px"},children:(0,s.jsx)(p.u5,{onClick:function(){var e={start_time:"".concat(n.startDate,"T").concat(n.startTime,":00.000Z"),end_time:"".concat(n.endDate,"T").concat(n.endTime,":00.000Z"),informUser:!0,sensorids:[Number(n.sensorid)]};delete e.startDate,delete e.startTime,delete e.endDate,delete e.endTime,delete e.sensorid,function(e){m(e,{onSuccess:function(e){u((function(){return{show:!0,title:"Success",content:"New Suppression Added Successfully"}}))},onError:function(e){u((function(){return{show:!0,title:"Error",content:"Suppression Added Failed"}}))}})}(e),console.log(e)},children:"Create"})}),"      "]})})},R=n(52036),T=function(){(0,f.U)().dispatch,(0,O.useMutation)(F.xO).mutate;var e=(0,a.useState)(!1),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)(!1),o=(0,D.Z)(i,2),c=o[0],l=o[1],d=(0,a.useState)(!1),u=(0,D.Z)(d,2),m=u[0],h=u[1],x=(0,a.useState)(!1),g=(0,D.Z)(x,2),j=g[0],b=g[1],S=(0,v.X)(),y=S.darkMode,k=(S.setDarkMode,function(e){l("active"===e),h("expired"===e),r("upcoming"===e),b("create"===e)});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.b7,{children:(0,s.jsx)("h3",{id:"".concat(y?"heading-dark":""),className:"pb-2",children:"Alarm Suppression"})}),(0,s.jsxs)("div",{className:"tab-container",children:[(0,s.jsx)("input",{type:"radio",name:"tab",id:"tab1",className:"tab tab--1",onClick:function(){return k("upcoming")}}),(0,s.jsx)("label",{className:"tab_label",htmlFor:"tab1",children:" Upcoming Suppression Periods"}),(0,s.jsx)("input",{type:"radio",name:"tab",id:"tab2",className:"tab tab--2",onClick:function(){return k("active")}}),(0,s.jsx)("label",{className:"tab_label",htmlFor:"tab2",children:" Active Suppression Periods"}),(0,s.jsx)("input",{type:"radio",name:"tab",id:"tab3",className:"tab tab--3",onClick:function(){return k("expired")}}),(0,s.jsx)("label",{className:"tab_label",htmlFor:"tab3",children:"  Expired Suppression Periods"}),(0,s.jsx)("input",{type:"radio",name:"tab",id:"tab4",className:"tab tab--4",onClick:function(){return k("create")}}),(0,s.jsx)("label",{className:"tab_label",htmlFor:"tab4",children:"   Create New Suppression Periods"}),(0,s.jsx)("div",{className:"indicator"})]})]}),(0,s.jsxs)("div",{children:[n&&(0,s.jsx)(M,{type:"Upcoming Periods Suppression"}),c&&(0,s.jsx)(M,{type:"Active Periods Suppression"}),m&&(0,s.jsx)(M,{type:"Expired Periods Suppression"}),j&&(0,s.jsx)(L,{type:"New Suppression"})]})]})},V=n(93433),q=n(24846),U=n(44925),P=n(49142),X=n(83566),B=n(42647),W=["Mon","Tue","Wed","Thur","Fri","Sat","Sun"],Y=function(e){var t=e.dataToModal,n=(0,a.useState)(t.step),r=(0,D.Z)(n,2),i=r[0],o=r[1],c=(0,a.useState)(!1),l=(0,D.Z)(c,2),d=l[0],u=l[1],m=(0,a.useState)(""),f=(0,D.Z)(m,2),h=f[0],v=f[1],x=(0,a.useState)({scheduleName:i[0],methodType:"Email"}),g=(0,D.Z)(x,2),j=g[0],b=g[1],S=(0,a.useState)((0,_.Z)({},j.scheduleName,{scheduleName:j.scheduleName,methodType:j.methodType,days:{Mon:{start:"00:00",end:"00:00",allDay:!1,none:!1},Tue:{start:"00:00",end:"00:00",allDay:!1,none:!1},Wed:{start:"00:00",end:"00:00",allDay:!1,none:!1},Thur:{start:"00:00",end:"00:00",allDay:!1,none:!1},Fri:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sat:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sun:{start:"00:00",end:"00:00",allDay:!1,none:!1}}})),y=(0,D.Z)(S,2),k=y[0],Z=y[1];return(0,s.jsxs)("div",{style:{padding:"15px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.map((function(e,t){return(0,s.jsxs)("div",{onClick:function(){b({scheduleName:e,methodType:"Select Method"}),Z((function(t){return(0,z.Z)((0,z.Z)({},t),{},(0,_.Z)({},e,{scheduleName:e,methodType:"Email",days:{Mon:{start:"00:00",end:"00:00",allDay:!1,none:!1},Tue:{start:"00:00",end:"00:00",allDay:!1,none:!1},Wed:{start:"00:00",end:"00:00",allDay:!1,none:!1},Thur:{start:"00:00",end:"00:00",allDay:!1,none:!1},Fri:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sat:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sun:{start:"00:00",end:"00:00",allDay:!1,none:!1}}}))})),u(!1)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"10px",padding:"10px",borderRadius:"5px",backgroundColor:e===j.scheduleName?"lightgray":"white"},children:[(0,s.jsx)("h4",{style:{fontSize:"small",padding:"10px"},children:"".concat(e)}),(0,s.jsx)(q.Z,{icon:B.z,onClick:function(){!function(e){o((function(t){return t.filter((function(t){return t!==e}))})),k[e];var t=(0,U.Z)(k,[e].map(P.Z));Z(t)}(e)},style:{color:"red"}})]},t)})),(0,s.jsx)("div",{style:{textAlign:"right"},children:(0,s.jsx)(p.u5,{onClick:function(){u(!0)},children:"Add Schedule"})})]}),!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.L8,{style:{fontSize:"12px",fontWeight:"bold"},children:"Schedule Name"}),(0,s.jsx)(p.jO,{id:"scheduleName",type:"text",placeholder:j.scheduleName,readOnly:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.L8,{style:{fontSize:"12px",fontWeight:"bold"},children:"Method Type"}),(0,s.jsxs)(p.LX,{id:"methodType",style:{fontSize:"12px"},value:j.methodType,onChange:function(e){return b((0,z.Z)((0,z.Z)({},j),{},{methodType:e.target.value}))},children:[(0,s.jsx)("option",{children:"Select Method"}),(0,s.jsx)("option",{children:"Email"}),(0,s.jsx)("option",{children:"Text to Speech"})]})]})]}),!d&&(0,s.jsxs)("div",{style:{marginTop:"20px"},children:[(0,s.jsxs)(p.Sx,{bordered:!0,responsive:!0,children:[(0,s.jsx)(p.V,{children:(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.is,{children:"Days"}),(0,s.jsx)(p.is,{children:"Start"}),(0,s.jsx)(p.is,{children:"End"}),(0,s.jsx)(p.is,{children:"All Day"}),(0,s.jsx)(p.is,{children:"None"}),(0,s.jsx)(p.is,{children:"Actions"})]})}),(0,s.jsx)(p.NR,{children:function(){var e=k[j.scheduleName];return e&&e.days?W.map((function(t){return(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.NN,{children:t}),(0,s.jsx)(p.NN,{children:(0,s.jsx)(p.jO,{type:"time",value:e.days[t].start,onChange:function(e){return function(e,t){Z((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},j.scheduleName,(0,z.Z)((0,z.Z)({},n[j.scheduleName]),{},{days:(0,z.Z)((0,z.Z)({},n[j.scheduleName].days),{},(0,_.Z)({},t,(0,z.Z)((0,z.Z)({},n[j.scheduleName].days[t]),{},{start:e})))})))}))}(e.target.value,t)}})}),(0,s.jsx)(p.NN,{children:(0,s.jsx)(p.jO,{type:"time",value:e.days[t].end,onChange:function(e){return function(e,t){Z((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},j.scheduleName,(0,z.Z)((0,z.Z)({},n[j.scheduleName]),{},{days:(0,z.Z)((0,z.Z)({},n[j.scheduleName].days),{},(0,_.Z)({},t,(0,z.Z)((0,z.Z)({},n[j.scheduleName].days[t]),{},{end:e})))})))}))}(e.target.value,t)}})}),(0,s.jsxs)(p.NN,{children:[(0,s.jsx)("input",{type:"checkbox",checked:e.days[t].allDay,onChange:function(e){return function(e,t){Z((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},j.scheduleName,(0,z.Z)((0,z.Z)({},n[j.scheduleName]),{},{days:(0,z.Z)((0,z.Z)({},n[j.scheduleName].days),{},(0,_.Z)({},t,(0,z.Z)((0,z.Z)({},n[j.scheduleName].days[t]),{},{allDay:e.target.checked})))})))}))}(e,t)}}),(0,s.jsx)(p.L8,{style:{fontSize:"12px"},children:"All Day"})]}),(0,s.jsxs)(p.NN,{children:[(0,s.jsx)("input",{type:"checkbox",checked:e.days[t].none,onChange:function(e){return function(e,t){Z((function(n){return(0,z.Z)((0,z.Z)({},n),{},(0,_.Z)({},j.scheduleName,(0,z.Z)((0,z.Z)({},n[j.scheduleName]),{},{days:(0,z.Z)((0,z.Z)({},n[j.scheduleName].days),{},(0,_.Z)({},t,(0,z.Z)((0,z.Z)({},n[j.scheduleName].days[t]),{},{none:e.target.checked})))})))}))}(e,t)}}),(0,s.jsx)(p.L8,{style:{fontSize:"12px"},children:"None"})]}),(0,s.jsxs)(p.NN,{style:{display:"flex",justifyContent:"space-around"},children:[(0,s.jsx)(q.Z,{style:{color:"green"},icon:X.W}),(0,s.jsx)(q.Z,{style:{color:"red"},icon:B.z})]})]},t)})):null}()})]}),(0,s.jsx)(p.u5,{onClick:function(){console.log(k)},children:"Save"})]}),d&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.L8,{htmlFor:"name",children:"ADD SCHEDULE"}),(0,s.jsx)(p.jO,{type:"text",id:"name",name:"name",value:h,onChange:function(e){return v(e.target.value)},placeholder:"Enter Schedule Name"}),(0,s.jsx)(p.u5,{color:"primary",onClick:function(){var e;e=h,o([].concat((0,V.Z)(i),[e])),b({scheduleName:e,methodType:"Email"}),Z((function(t){return(0,z.Z)((0,z.Z)({},t),{},(0,_.Z)({},e,{scheduleName:e,methodType:"Email",days:{Mon:{start:"00:00",end:"00:00",allDay:!1,none:!1},Tue:{start:"00:00",end:"00:00",allDay:!1,none:!1},Wed:{start:"00:00",end:"00:00",allDay:!1,none:!1},Thur:{start:"00:00",end:"00:00",allDay:!1,none:!1},Fri:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sat:{start:"00:00",end:"00:00",allDay:!1,none:!1},Sun:{start:"00:00",end:"00:00",allDay:!1,none:!1}}}))})),u(!1),v("")},className:"mt-3",children:"Add"})]})]})},G=n(81013),J=function(){var e=(0,a.useState)([]),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)(["sensor one","sensor two","sensor three","sensor four","sensor five","sensor six","sensor seven","sensor eight","sensor nine"]),o=(0,D.Z)(i,2),c=o[0],l=o[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsxs)(p.Sx,{style:{height:"fit-content"},children:[(0,s.jsx)(p.V,{children:(0,s.jsx)(p.is,{scope:"col",children:"Excluded"})}),(0,s.jsx)(p.NR,{children:c.map((function(e){return(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.NN,{children:e}),(0,s.jsx)(p.NN,{children:(0,s.jsx)(p.u5,{color:"primary",onClick:function(){return t=e,r([].concat((0,V.Z)(n),[t])),void l(c.filter((function(e){return e!==t})));var t},children:"Add"})})]},e)}))})]}),(0,s.jsxs)(p.Sx,{style:{height:"fit-content"},children:[(0,s.jsx)(p.V,{children:(0,s.jsx)(p.is,{scope:"col",children:"Included"})}),(0,s.jsx)(p.NR,{children:n.map((function(e){return(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.NN,{children:e}),(0,s.jsx)(p.NN,{children:(0,s.jsx)(p.u5,{color:"danger",onClick:function(){return t=e,l([].concat((0,V.Z)(c),[t])),void r(n.filter((function(e){return e!==t})));var t},children:"Remove"})})]},e)}))})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(p.u5,{onClick:function(){console.log(n)},children:"Save"})})]})},Q=function(){var e=(0,a.useState)(!1),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)(!1),o=(0,D.Z)(i,2),c=o[0],l=o[1],d=(0,a.useState)(null),u=(0,D.Z)(d,2),m=u[0],f=u[1],h=function(){r(!1)},v={textAlign:"center"},x={textAlign:"left"},g={textAlign:"center"};return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(R.$,{title:"Included/Excluded",content:(0,s.jsx)(J,{closeModal:function(){l(!1)}}),isOpen:c,onClose:function(){l(!1)}}),n&&(0,s.jsx)(R.$,{title:"Escalation",content:(0,s.jsx)(Y,{closeModal:h,dataToModal:m}),isOpen:n,onClose:h}),(0,s.jsx)("h3",{children:"Escalations"}),(0,s.jsx)("div",{children:(0,s.jsxs)(p.Sx,{responsive:!0,bordered:!0,children:[(0,s.jsx)(p.V,{children:(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.is,{style:(0,z.Z)({},v),children:"Sensor Groups"}),(0,s.jsx)(p.is,{colSpan:7,style:v,children:"Steps"})]})}),(0,s.jsx)(p.NR,{children:[{sensorGroup:"Sensor Group 1",steps:[["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"],["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"]],details:{time:"0 mins Ago",actions:["Clipboard","Report"]}},{sensorGroup:"Sensor Group 1",steps:[["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"],["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"]],details:{time:"0 mins Ago",actions:["Clipboard","Report"]}},{sensorGroup:"Sensor Group 1",steps:[["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"],["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 1-Email","AH 1N Alarm 1-Phone"],["AH 1N Alarm 2-Email","AH 1N Alarm 2-Phone"],["AH 1N Alarm 3-Email","AH 1N Alarm 3-Phone"]],details:{time:"0 mins Ago",actions:["Clipboard","Report"]}}].map((function(e,t){return(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.NN,{onClick:function(){l(!0)},style:x,children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"flex-start",paddingTop:"5px",width:"200px"},children:[(0,s.jsx)("p",{children:e.sensorGroup}),(0,s.jsx)(q.Z,{icon:B.z,style:{color:"red"}})]})}),e.steps.map((function(t,n){return(0,s.jsx)(p.NN,{style:(0,z.Z)((0,z.Z)({},g),{},{minWidth:"250px"}),children:(0,s.jsxs)("div",{onClick:function(){r(!0),f({step:(0,V.Z)(t),details:(0,z.Z)({},e.details)})},style:{display:"flex",justifyContent:"center",gap:"5px"},children:[(0,s.jsx)("div",{children:t.map((function(e,t){return(0,s.jsx)("p",{style:{backgroundColor:"#7195f0",fontSize:"15px"},children:e},t)}))}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{style:{color:"blue",fontSize:"12px"},children:e.details.time})}),(0,s.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,s.jsx)(q.Z,{icon:G.M,style:{color:"blue"}}),(0,s.jsx)(q.Z,{icon:B.z,style:{color:"red"}})]})]})]})},n)}))]},t)}))})]})})]})},K=n(50612),$=function(e){var t=e.data,n=e.closeModal,r=e.getalarms,i=(0,a.useState)(t),o=(0,D.Z)(i,2),c=o[0],l=o[1],d=(0,O.useMutation)(F.nu).mutate,u=(0,v.X)().setShowToast;var m=(0,a.useState)(""),f=(0,D.Z)(m,2),h=f[0],x=f[1],g=function(e){e.preventDefault(),function(e,t,a){d({id:e,comment:t,alertid:a},{onSuccess:function(e){u((function(){return{show:!0,title:"Success",content:"Acknowledged Successfully"}})),n()},onError:function(e){u((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}})),r(),n()}})}(c.alertstatus.alertstatusid,h,t.alertid)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",gap:"30px",marginTop:"20px"},children:[(0,s.jsxs)(p.rb,{children:[(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{htmlFor:"deviceNumber",children:"Device Number"}),(0,s.jsx)(p.jO,{id:"deviceNumber",value:c.sensors.devices.devicename,disabled:!0})]}),(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{htmlFor:"type",children:"Type"}),(0,s.jsx)(p.jO,{id:"type",style:{textOverflow:"ellipsis"},value:c.property,disabled:!0})]})]}),(0,s.jsxs)(p.rb,{children:[(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{htmlFor:"severity",children:"Severity"}),(0,s.jsx)(p.jO,{id:"severity",value:c.alerttype,disabled:!0})]}),(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{htmlFor:"status",children:"Status"}),(0,s.jsx)(p.jO,{id:"status",value:c.alertstatus.status,disabled:!0})]})]}),(0,s.jsx)(p.rb,{children:(0,s.jsx)(p.b7,{md:12,children:(0,s.jsxs)(p.b7,{md:12,children:[(0,s.jsx)(p.L8,{htmlFor:"status",children:"Email"}),(0,s.jsx)(p.jO,{id:"assignee",value:c.sensors.devices.email,disabled:!0})]})})}),(0,s.jsx)(p.rb,{children:(0,s.jsxs)(p.b7,{md:12,children:[(0,s.jsx)(p.L8,{htmlFor:"time",children:"Time"}),(0,s.jsx)(p.jO,{id:"time",value:c.timestamp,disabled:!0})]})})]}),(0,s.jsxs)("div",{style:{marginTop:"20px"},children:[(0,s.jsx)(p.L8,{style:{fontWeight:"bold"},htmlFor:"comment",children:"Comment"}),(0,s.jsx)(p.PB,{style:{border:"1px solid #000",width:"100%",outline:"none"},id:"comment",placeholder:"Write Comment...",value:h,onChange:function(e){x(e.target.value),l((0,z.Z)((0,z.Z)({},c),{},{comment:e.target.value}))},rows:3})]}),(0,s.jsxs)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",gap:"30px"},children:[(0,s.jsx)(p.u5,{onClick:function(e){g(e)},children:"Acknowledged"}),(0,s.jsx)(p.u5,{onClick:function(){l(t),x("")},children:"Clear"})]})]})},ee=function(){(0,f.U)().dispatch,(0,v.X)().setShowToast;var e=(0,v.X)(),t=(e.darkMode,e.setDarkMode,(0,O.useMutation)(F.Sl).mutate),n=(0,a.useState)([]),r=(0,D.Z)(n,2),i=r[0],o=r[1],c=(0,a.useState)({}),l=(0,D.Z)(c,2),d=l[0],u=l[1],m=(0,a.useState)(!1),h=(0,D.Z)(m,2),x=h[0],g=h[1];function j(e){t(e,{onSuccess:function(e){o(e.data)},onError:function(e){}})}var b=function(e,t){var n=(0,V.Z)(i);n[e].Assignee=t.target.value,o(n)};return(0,a.useEffect)((function(){j(localStorage.getItem("OrganizationId"))}),[]),(0,s.jsxs)(s.Fragment,{children:[x&&(0,s.jsx)(R.$,{title:"Alarm Details",content:(0,s.jsx)($,{closeModal:function(){return g(!1)},data:d,getalarms:j}),isOpen:x,onClose:function(){return g(!1)}}),(0,s.jsx)("h3",{children:"Alarm Management"}),(0,s.jsx)(p.xH,{children:(0,s.jsxs)(p.Sx,{responsive:!0,hover:!0,class:"table-light custom-table",children:[(0,s.jsx)(p.V,{children:(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.is,{children:"Time"}),(0,s.jsx)(p.is,{children:"Device Number"}),(0,s.jsx)(p.is,{children:"Type"}),(0,s.jsx)(p.is,{children:"Severity"}),(0,s.jsx)(p.is,{children:"Email"}),(0,s.jsx)(p.is,{children:"Status"}),(0,s.jsx)(p.is,{children:"Details"})]})}),(0,s.jsx)(p.NR,{children:null===i||void 0===i?void 0:i.map((function(e,t){var n,a,r,i;return(0,s.jsxs)(p.T6,{children:[(0,s.jsx)(p.NN,{children:null===e||void 0===e?void 0:e.timestamp}),(0,s.jsxs)(p.NN,{children:[null===e||void 0===e||null===(n=e.sensors)||void 0===n||null===(a=n.devices)||void 0===a?void 0:a.devicename,"-",null===e||void 0===e?void 0:e.aws_id]}),(0,s.jsx)(p.NN,{children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:e.property})}),(0,s.jsx)(p.NN,{children:(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,s.jsx)("p",{style:{color:"Critical"===(null===e||void 0===e?void 0:e.alerttype)?"red":"darkgoldenrod"},children:null===e||void 0===e?void 0:e.alerttype})})}),(0,s.jsxs)(p.NN,{children:[" ",(0,s.jsx)(p.jO,{className:"w-20",value:null===e||void 0===e||null===(r=e.sensors)||void 0===r||null===(i=r.devices)||void 0===i?void 0:i.email,onChange:function(e){b(t,e)},disabled:!0})]}),(0,s.jsx)(p.NN,{children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:(0,s.jsxs)("div",{style:{fontWeight:"bold"},children:[e.alertstatus.status," ."]})})}),(0,s.jsx)(p.NN,{children:(0,s.jsx)(q.Z,{onClick:function(){u(e),g(!0)},icon:K.N,style:{color:"blue"}})})]},t)}))})]})})]})},te=function(){var e=(0,f.U)().isLoading,t=(0,v.X)(),n=t.darkMode;t.setDarkMode;return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsx)(h.Z,{}):(0,s.jsx)(p.KB,{id:"table_container",className:"table_container_light ".concat(n?"table_container_dark":""),style:{maxWidth:"unset"},lg:!0,children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(p.LQ,{color:"primary"}),children:(0,s.jsxs)(i.Z5,{children:[m.map((function(e,t){return e.element&&(0,s.jsx)(i.AW,{path:e.path,exact:e.exact,name:e.name,element:(0,s.jsx)(e.element,{})},t)})),(0,s.jsx)(i.AW,{path:"/",element:(0,s.jsx)(i.Fg,{to:"dashboard",replace:!0})}),(0,s.jsx)(i.AW,{path:"/dashboard",element:(0,s.jsx)(c,{component:x.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/organizations",element:(0,s.jsx)(c,{component:g.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/department",element:(0,s.jsx)(c,{component:b.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/facilities",element:(0,s.jsx)(c,{component:j.default,pageAccess:o.vw,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/devices",element:(0,s.jsx)(c,{component:S.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/Facilities-staff",element:(0,s.jsx)(c,{component:y.default,pageAccess:o.vw,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/Devices-staff",element:(0,s.jsx)(c,{component:Z.default,pageAccess:o.iH,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/Department-staff",element:(0,s.jsx)(c,{component:k.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/organization-sensors",element:(0,s.jsx)(c,{component:w.default,pageAccess:o.JK,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/devices-sensors",element:(0,s.jsx)(c,{component:A.default,pageAccess:o.t4,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/gateway",element:(0,s.jsx)(c,{component:I.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/notification-alerts",element:(0,s.jsx)(c,{component:N.default,pageAccess:o.BA,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/users",element:(0,s.jsx)(c,{component:E.default,pageAccess:o.vw,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/sensor/graph",element:(0,s.jsx)(c,{component:C.default,pageAccess:o.t4,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/alarm-suppression",element:(0,s.jsx)(c,{component:T,pageAccess:o.vw,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/escalations",element:(0,s.jsx)(c,{component:Q,pageAccess:o.vw,pageAction:[o.H2]})}),(0,s.jsx)(i.AW,{path:"/alarm-management",element:(0,s.jsx)(c,{component:ee,pageAccess:o.vw,pageAction:[o.H2]})})]})})})})},ne=a.memo(te),ae=n(59434),re=n(10982),ie=n(93647),oe=function(e){var t=e.ModalOpen,n=e.uploadedImageUrl;var a=JSON.parse(localStorage.getItem("permissions")),r=(0,o.Z_)(a,o.BA,o.H2),c=(0,o.Z_)(a,o.vw,o.H2),l=((0,o.Z_)(a,o.JK,o.H2),(0,o.Z_)(a,o.iH,o.H2),(0,v.X)()),d=l.darkMode,u=(l.setDarkMode,localStorage.getItem("organizationLogo")),m=(0,i.s0)();return(0,s.jsxs)(p.w5,{variant:"nav-item",children:[(0,s.jsx)(p.SQ,{placement:"bottom-end",className:"py-0",caret:!1,children:n&&(0,s.jsx)(p.cU,{src:n,size:"md"})||u&&"undefined"!==u&&(0,s.jsx)(p.cU,{src:u,size:"md"})||(0,s.jsx)(p.cU,{src:"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABWvSURBVHgB7V15cFXXef8kJBaBWM1qjNgEBlMMmGba2E4mTSZ1m3RkMBBjFzoZp5NkWjtN+kfsxK7dwY3T/lG3caa1my6TtDVmMSBPwtidpG0a6IapoNisBowBywgkJBlLLBLK73f9vpejy33v3X2R3m/mvnPvfffec+75vvNtZ7kVMgBx+PDh2ilTptRXVFTMr6ysnHP9+vVxOD0BxzP6+vpGYZ//jcD+0NwtV7FdxnYU157HPa3Y70B6DsfHcW1TZ2fn+enTp7fKAEOFZBznz5+fOnTo0CUg1EIQ6pMgKok7E39VuX0Grndz2TVsJ7EdwvW7ent79w4ZMuTA6NGjL0iGkTkGeO+990bW1tbOu3bt2m+CEPeA4ItxerQEgEsGcEIb7t2PMvwnGGLz+PHj/18yhswwwMWLF5eioleh1TWg0udifxjPI3V1v53I5n0BGMB8RjeSE5BEr2J/05gxY/ZIBpBqBvjggw+mXb16dTV08ZdAsDk4VW0SqxTxCxHWfl8YDGBDD/LYh3Qb1NMPampqzkpKkUoGQGtfgpb+MCpxBQ7HSnZtFXJaO95jI7a/HTduXJOkDKmq2Pb29jvQGp9AZX0KaY34LJ+9hfMYUiS/DzFtpXqdSgBeY16n581985keJAczoorYjXs2wHD8maQEqWCAS5cuLYER9RR2PyMerXcnQhJKaKgQ6ejokPfff58qRbq7uwUGpCC/fveR8FVVVVJdXS0jR44UGJoyduxYgfi2zukz7Xn7QC/KtRsS7ptghF2SMBJlgHPnzk0eNmzYU6jMz6tRRxRrWWala8s2WyMJSyLj2dLa2moRXYmt15Ax7Hnw2E5UHqN8AutebrrpJoEIt5jBJ+HtoJ3wXTDdM2C2FkkIiTAAXrwWrf4BEObZXECm3/9uGcAEW/qFCxfk7NmzgqCNo6Gn0kKJrc+zSw77f2QYYvjw4TJ58mSZNm2aJSHCYAQ8gwGnJ1paWv6mvr7+isSM2Bkgp+efxe5dZv5u3TIliqY9PT0W0c+cOSNdXV1SzEsoRGg7c9jzUymjz6OqoESoq6sTiPF+TGJe7xa4n9KgCc/4QtyxhNgYAC84HMT/EipnAw5HiU+YDEARf+LEiXyLj8CdKwgSnBIBIWeZOXNm3k5QZnBSMU6wqbROXPensD2+JTEhlhpDuHYaWs0WEP9XcFgpAXHlyhV56623LD1P/R4n4RXa0pk/pcDcuXNlwoQJBa93G7/AdX3Yfor6Wg8D9LREjMhrDq3+15B8Hy91swR061iJeJ4cPXq0n543VUIcsKshgmrhlltusaSB3TDVMpr3F4Jhf5zEcx4Bc/1QIkSkNdbW1vYoDRzs1tyQsUtimRWJfgCL+DT44hb5bjF16lSZN29eXiWoOvBTVrxjF7ZH4X08JxEhkho8ffr0COixZ/DyX5EQwEo8deqUpe/VGGMrc9K1SUJbNt3FRYsWCcLA+cBSwOc+j76Fr+X6G0JF6LVH3x4v/jwK21Ds+V4IR+JT55sET5sEsMcQaBcsW7bMUg0sd0BGoF3wGlzPtUjbJUSEWoMIukyFUbQFFXEnj926doXA+999910O8HCM+KWJCezxA4IBpMWLF1tMQASIHlrGIZLX8awGRCqbJSQEl0850NKHT96oxLfDo19spXTzjhw5kvex7bo0bRLA3OeGTi05ePBg/pyqLj/AvRXYlsP+aWRdS0gIhQHeeeedaRD7O7C73DyvFeHVCCLBGc5l5anYVwZSSWBKBCe4vS5KsOyMTlKFEWaMwOdWAQZaDgNzB0dCSQgIzABwy8bBQGmUD4nfj8p+CcDrKfZp7euxE4oxVdLSwXQVyQCUBnZX0OfGh/wyGtwWdHBNkoAIxAC09pGwr/sOcbAn3LZ+O6PQ3aP4N0O19n03BPYjfcKCmS8Z+fjx41Zqxg+CbMCdULkv4FkjJAACMQCMkT9H8mm+r1dOdgJfjL13rCwVl2mDX6nGABYaTEnX1cvz6WkhIPaMBIBvBoBIe4RDtSRET4IVQ3HJUG/afPwgUMMPtlI+iBUS2PC+woCb+IQvBgDXfRbECcR5JlSscdAGxb+eGyhQSUbis9cy7HdjtBV19wnxAc8MgK5XTq54Di9RE1CH5aEtgi0kjWLfhB+7wrRfqAao5gqJeZ82Tg3q7Z8YhxGP8MwA0PvfRzJTQgYrBa5NYi5b1FDG5vgFSjl70CgETMWzGYQb7uUmTwwAQ+YbKPjHJWSwMkh8jtUbqDADQC0tLVY3MhGiOuCDfhXq+YtebnLNADD6bkfy9VxEypWlWsry13MaMBlIhp8TVGQzyMXubEWAmIB9q0Qd/glHXbktkysGwIOHgoO/h8KPNgnkRw86gRVCN8llWVy7SX5dtqihDG9GOMMCnjkS27N4bq2b610xALiV7t4yCREaDCHgxgSKk2cR+s5RAM+9G17BWjfXlqxxdu/igRzHN0TPhRWJ0wrguH37wMuBjkuXLlnxjqhUHurxWTeh4pKTMIYPH/6YBJx9WwgqAun/m4R3ywRemKXYtfYYfRygGqDnw4GlETEBXcM/RvrlYhcVlQAQ/Ry6/XvFrvFrsOiIHrpFly9fTk3Lj8sI1cAXEaIRaN8+z1lXxcpRSgI8LR6manmB2gADLezrBir5KAEixjDU7ZNIVxS6oCBxwZ0fw813SQn4JZzJAGnT+3EwI/PQ7u4o80PdfpZu4dixY/c6/V9QBSBQ8bgYhl9U0EoYTFDm1+7hiFGFPJ4o9KcjA0A0LUVyp0QIFYPmLN3BAn132j8x4ZNcc8HpD0cGQMG+UPHh/PxIkdY+/6gRQT9AKXAq3iNOf9zAAK2trdORPCAxwAwGDSYkwfTwuu7lkjs3nLefqK6uXodkjMQAEn/IkCGpZgK7axX0Or2W4Lt7yTtg/mO53pL95A0MAO5cKTHMGdTWr2Pms4BijOqFiTXkrdPH3D4zYP4VuRFc/ctiHqCD4iN40BKJARoIYiQszfA5QEPcwM27h5k/zs/mcnvmuX4MAI78nHgM/LgVe/ZrNfjDJVgGUycQoXVABojTA2KvLup8lXnOXvP3SMygGCQTDCZoC+UyMwnkfS9XW9XjPAOge5JLrs6WmGDOoeeqXIMtFsD3D2udIY+YiwY3L18O+UWB1iDxrJD96ih9ce6PGTOm37mBDhX/nD6egAfEFdI/owcmA0Qa+bPD7ADiLFrtIRwMTKBMTw8oifdFPedVvcUAzc3NE0GQxRIjTMOPizGOGjVqUEkArifkxWMIOf/FOrnUogLE0SIk4yUh0BDksmtE2oJCfr0cp/80pfhXqecmaBRG/jbU8hsL3LEYABEp16NIo8KkSZNKRsayCjtTT5w40fJ8kgyFI98FTC0G4CBCSRi0iIsts5ZlmPYO9T7XFjQlQhJAvp9iqor41qRFL22C6dOnJ9FTFjnMd2LrpwFo/y9uoCz1TCvPnDnDZufb/w9TR7FiuMJWmhBGKFbfl0zOtQSjCi+7vTZ3zSwYgrWVMEg4dDjxHhlWEm2AmTNnWulACg9rvwdFv9n6E8YQGN/1KFvlUkkRKAGoCgaSCiDx6erOmjVL0gSUa34lWlug8G9YIqrCmEJNKTBQwsMa4JozZ46MGDEiVW4uaD+nsre3d4qkDIwL3HrrrVbFpS0u4BZmaJvfF+B3BlI4BG4cJUAks36CgBXHQEl9fb1kFer66UriTgtIpwDjaWmlzvnW1nPzzTdbVrMiCyrB7ORisOe2227r9y2BlL3DLZUo0ETupbFy2WrYeihCk4JXN1fFPMO9S5cutWwZE8oEEYR3PY1JzF1TSwkwT1IKVhaZgKqAy7CnGSbxafEvWLDAStPcw8lgEGeNpHZQnlYq+83nz59viVIuJJV0eZygLZs6n8RXf9/NuoClps/7udYNOPejor29/XpFAMvEzLjUY7xcW+heLrPGpeN1Vk2SRpUSRFP2aC5cuNBi2IygjwzQlxVXS5mAiyu8+eabVpqkZa15U8zPnj1bZsyYkVgfv19UdHR0XEbqe1SmXfS4FVFBK4lzCk+ePGl9Mk5XF4ubGXRkDz8RowM80/glkyK4Qga4KB9+oNkX4lIBhZ7HbwW+/fbb/b4gVogRTBet2H/2++2inhtHMLHFM8Bj9ltkbGhbO1XAHrzQcsko1KXhOkPNzc3WGnzmeoNmV2wpY8y83rxHrXumbOl0S9mxQ6PU/C9rwPvtYS/gJckwtGXyQ8/c2OHCJdi48CRtBHNxZpOgbnxlfT7dORp4bO1s+fYWn1Xg3VroBp6SjMMkCAMwjB6yR5FrD1EycEk2rkXIY0oH8zOv5jNIbHZF04pnAIcMRbdOiW7mYx/anlG0UgK0Sgrg1T6wV75JELqIJDKPSUx2MZMxyACUCFyWhhuZQUO2HKrFa9ljx42tnvfo18LtZbKL/SS9kQDorMKLtCc9+MKNGNVPr+m1bKn6bSGutsUFl7jRKFQi8381DM3OGNOgY8r77OfMfMgcOpGDkoF2ADfu60BWs6cvQ0bguSoU9LgkDDfeg7pXJDDFOpeWJeFVrJvDrkxCawvWfJzEtjKT6cNro+D1lCi6pBvtC0IlhqoKVRd8FpkuIyOajtMLWIaX3isJopD41HUEVY9zIwM4VbDZegu1QLs7p+cUduPQLhX0nHmfeQ0ZgoxAlcONzOE3DBwH0HAWVnBgIHRgGwpTcFxg2P67+VwnPcoWTaLTt+fHo8zl1NIsWk0pxI0SgfMd6EHQrjCvKxaviAk9yHuKlXtnZ+dRHSbshCgZwHwm9Tl9ebpwunxsluYL2iWLEpnE5wAXupE698G0aRJigmOIYs6ryhX2LSSxDr8xK4jf1OOnVNjaKfJNXWwSP0uWttnCaZAyZM2NUoEuKiVDwnbCIf5U5Qr7ExT2NyQGmAYaAzUM47LF27+goZa4SfAsuVl224HgMT8UcejQIYsZ6urqLPWQxJQ4lGsXU5UAB4tdHGbFa4sg4flhaCV8oWuzBCdmLZRSxR04cMAyGtmTSBURJ0Dz163y8IdThWHBHpaIloU3MrU4/8SJExYTKAbLugB2mEYj7QMd9BID2sCI86GOLuRZFlY3RUJki0TQwDt27Jhl2WetZYcNDRqZsQZuDDZxNJEailHVE5777yD+J7hvWiGvSgjQl9GNL8rPpO3Zs8fqqRtsK4I5wSniqKpx//791oezaQybnVhhSkg8a7fu56kBX3snCnFFQgJfiPqd4v6NN97I+/KDcW1gL1A1uW/fPktq2m2HEHAZdNmsBxVGxiNhof4Pdm8TnzCtdnLwwYMHLZFvfg9osIt/t2BdMZLIGVJUCSHW35vw/xfpQV4C4MEfYGuUAoVxI4bMgE5TU1Ne35utPu3RvLSA9cROKqoEqlCnqKlPvGYe9FPIINTLSK45FcYMzjgVQvcZq6d7w84aJxeoLAXcg/VEScq4ARtTCFKAQ6k3mSf6MQB80v9DBifsdxWSAPawJ1s+9b1J/DKCg0xw5MgRK0wesF73Qfz/r3niBpMcGfw1Ek/yhYVityyHapP4jGyVxXw4UILTiCYTFPrErov65vD/bfaTNzAAeuK2IumwF8JJBeh/avCR+CmdBZt5qFdFCasdZaYrWcq9xjUdVVVV/2g/f8NdiE2fxcXbxQXUz2eAhx05ZUQLHZxCw5Dq1j7CqRhwzT/X1NScsZ+vLJDRd7CV/KgdM6Ze4nStsnUfPbSOqW5pGJof3CpW9/ivC63/75z+c2SAcePG7YNI+bGUAHu2jh49mi9AWexHD61jdqGzQ81lne9GTKHJ6Y+CigOinR+MLvhdM4oiGn06CaNM/Pigda1d6eY5B/TCKH+60J8FGSD3pckfOf3H1n7q1Kn8aNoy8ZMB6UAJXOzbi6DNrtra2v8o9IyipmPu69M3fNqT4/U4gscpEFRGvGDgjdPlC4CDLR4vdn9RBoAt0ATC/oNpaFDk6/z8rI7WGUhgvbPziI1Sj5VeaMDfRbfvrmL3l+ybRRflk9AhXRrPZ5cuMyu3+OShNNBeV9LICBLR7/9WqWeUZIDJkyefQwZfY6CB0ShmpLNtykgWZh8LvQJKgtw58MH1P4Lubyn1DFejM0DwjUh2cX0eDloYqOv6Zxls+YzH5LyyvQgZv+DmPlcMgP7oToR5/wBBHys4VBb/6YOOsoaK7gAz/G59fb2rwT2ux2fV1dXtRQTqcRC/PKQnpQAT9CFC+Gcw3ve7vcfTAD0Q/wVs/82MpIzUAbT56X333VfS8DPhiQHWrFnTPXTo0NWwCZqljFQBNHkb+n+9eITnIboNDQ3vwiP4bex2SRlpQRek8sNr1649LR7ha4w2xMy/gds2SBmpANzzx1avXv1D8YFAzvzWrVv/Apz3SNDnlOEbfbD4XwDxvyw+EWiWBjJ/DLqnUcqIHTlD/LW2trY/lAAI3HJffPHFyTAMt6FAH5UyYgGJj8b3OoJyv/7ggw9elAAIRXRv3LhxGuLOjTAO75CyOogafZC6JH7DunXrAntjoRGrsbFxGgq1A4ywHP5omQkiAup2T3V19b30xiQEhDZTkwVCH0EDuHNvOVAUGXZ3d3c3hEV8ItSpunAPm+GSfBpc+i/icW5BGUWBKu3bgYa1MgyxbyL0udo0SiAFVjBsLGWEAhh8z7W2tj64cuXKkt27XhGprt6yZcvDMAy/jd0aKcMzOJy7p6dnw/333/9tiQiRG2ubNm36LdgGfwnxNUvKcAXaUMBZSNLfQf/Lv0qEiMVa37x58wy81A8gDT4mZTexFK6D+P+FUPsaxPZDM/YKIVZiQCV8A4zwdWyp+1ppGsDZWNgeX758+fOzZs26LDEg9tb40ksv3Q4/9nvYXYatPLYsBxD+Z1CVX12xYkWs6zYnIo537tw5rKur64t46Q1QC4NaGqAOuiERv4oA2ovw79+XmJGoPmY/wrBhwx5FBfx+scWqByiu4p3/Hg3gySjcO7dIhUGGvoS7oRaeBiNwncKBrhZ64Nf/CAGzpxAz2ScJI1UW+bZt2z6OVvFNbHeBGUbIAAINPBD+J3DtNsC6f11SglS6ZC+//PIyVNZDMIoeQMXxI7xZdR0ZDucw7e3Q8d+BgZd4i7cj1RULRpiOylvHGDi2JZJb3DrtANNe42JbKPNfceU1BHPOSkqRmZa1ffv2j0B8fg5G0z1IZyNN1VfPQXDOoj6Gcu0g0VetWtUkGUAmRevWrVsXo5LXQEV8FOntqPR411rPAXl3opUfAPFfBVPuhGF3ZP369SWX1kkTMh+WfeWVV25CH/kvwZ28A+HTu3FqARiC/Q6hqgsQuRfbSRCcrfzHIPYh5Lcv7O7ZuDEg4/LwJiaAQJNAsKUwvuaAYJPkw28hTAABJ+L8PGw1OG8tzp8T393YuOARP6X7Dq5rQ6tuR2/ccWyH8bxjDz30UOyBmqjxc0Kli0jdECnSAAAAAElFTkSuQmCC",size:"md"})}),(0,s.jsx)(p.$H,{className:" pt-0 ".concat(d?"dropdown-dark":""),placement:"bottom-end",children:(0,s.jsxs)(p.$f,{children:[c&&!r&&(0,s.jsxs)("div",{onClick:function(){t()},children:[(0,s.jsx)(q.Z,{icon:re.M,className:"me-2",style:{fontSize:"30px",color:"black"}}),(0,s.jsx)("span",{style:{fontSize:"20px",color:"black"},children:"Settings"})]}),(0,s.jsxs)("div",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),localStorage.removeItem("permissions"),localStorage.removeItem("organizationLogo"),localStorage.removeItem("organizationName"),localStorage.removeItem("organizationid"),m("/login")},children:[(0,s.jsx)(q.Z,{icon:ie.U,className:"me-2",style:{fontSize:"30px",color:"black"}}),(0,s.jsx)("span",{style:{fontSize:"20px",color:"black"},children:"Sign Out"})]})]})})]})},se=n(17834),ce=n(45013),le=n(46522),de=n(10781),ue=n(96062),me=n(53469),pe=n(18393),fe=function(e){var t=e.closeModal,n=e.saveHandler,r=e.data,i=(0,f.U)().dispatch,o=((0,O.useMutation)(pe.Vm).mutate,(0,a.useState)([])),c=(0,D.Z)(o,2),l=(c[0],c[1],(0,a.useState)(!1)),d=(0,D.Z)(l,2),u=d[0],m=(d[1],(0,a.useState)({organizationName:localStorage.getItem("organizationName"),file:null})),h=(0,D.Z)(m,2),x=h[0],g=h[1];(0,a.useEffect)((function(){r&&g((function(){return{firstname:r.firstname,lastname:r.lastname,email:r.email,address:r.address,phonenumber:r.phonenumber,roleid:r.roleid}}))}),[r]);var j=(0,v.X)(),b=j.darkMode;j.setDarkMode;return(0,s.jsxs)(p.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:u,onSubmit:function(e){e.currentTarget;e.preventDefault(),i({type:"SHOW_LOADER"}),n(x),t()},children:[(0,s.jsxs)(p.b7,{md:6,children:[(0,s.jsx)(p.L8,{id:"".concat(b?"heading-dark":""),htmlFor:"validationFirstname",children:"Upload Logo"}),(0,s.jsxs)(p.YR,{children:[(0,s.jsx)(p.wV,{}),(0,s.jsx)(p.jO,{type:"file",className:"input-light pt-0 ".concat(b?"input-dark":""),name:"file",onChange:function(e){var t=e.target.files[0]||null;g((0,z.Z)((0,z.Z)({},x),{},{file:t}))},feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,s.jsx)(p.b7,{xs:12,children:(0,s.jsx)(p.u5,{color:"primary",className:"float-end",id:"".concat(b?"button-dark":""),type:"submit",children:"Upload"})})]})},he=function(){var e,t=(0,i.TH)(),n=(0,de.Z)((function(e){return e.addData})),r=JSON.parse(localStorage.getItem("permissions")),c=(0,v.X)().setDepartmentId,l=(0,f.U)().dispatch,d=(0,i.s0)(),u=function(){return l({type:"SHOW_LOADER"})},m=function(){return l({type:"HIDE_LOADER"})},h=(0,ae.I0)(),x=(0,a.useState)([]),g=(0,D.Z)(x,2),j=g[0],b=g[1],S=(0,O.useMutation)(ce.WH).mutate,y=(0,O.useMutation)(le.pF).mutate,k=(0,o.Z_)(r,o.BA,o.H2),Z=(0,o.Z_)(r,o.vw,o.H2),I=(0,o.Z_)(r,o.JK,o.H2),N=(0,o.Z_)(r,o.iH,o.H2),w=localStorage.getItem("email"),A="";k?A="SuperAdmin":Z?A="Organization Admin":I?A="Facility Admin":N&&(A="Department Admin");var C=(0,v.X)(),E=C.facilityData,F=C.setFacilityData,M=C.departmentsData,_=C.setDepartmentsData,z=(C.devicesData,C.setDevicesData),H=(0,ae.v9)((function(e){return e.sidebarShow})),L=(0,O.useMutation)(se.D2).mutate;var T=(0,O.useMutation)(se.iU).mutate;function V(e){u(),T(e,{onSuccess:function(e){m(),F(e.data)},onError:function(e){m()}})}var U=(0,O.useMutation)(ue.oy).mutate;var P=(0,O.useMutation)(ue.a8).mutate;var X=(0,O.useMutation)(ue.hd).mutate;var B=(0,O.useMutation)(se.XH).mutate;function W(e){u(),B(e,{onSuccess:function(e){m(),_(e.data)},onError:function(e){m()}})}var Y=(0,O.useMutation)(se.HH).mutate;var G=(0,a.useState)(null),J=(0,D.Z)(G,2),Q=J[0],$=J[1],ee=localStorage.getItem("organizationLogo"),te=(0,O.useMutation)(se.oL).mutate;function ne(e){u(),te(e,{onSuccess:function(e){m(),$(e),ee&&"undefined"!==ee&&function(e){u(),re(e,{onSuccess:function(e){m(),$(e.data.logo),console.log(e)},onError:function(e){m()}})}(e)},onError:function(e){m()}})}var re=(0,O.useMutation)(se.uj).mutate;(0,a.useEffect)((function(){u(),k?(L("",{onSuccess:function(e){m(),b(e),n(e.data)},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),d("/login")),m()}}),void 0===localStorage.getItem("OrganizationId")&&null===localStorage.getItem("OrganizationId")||V(localStorage.getItem("OrganizationId")),void 0===localStorage.getItem("facilityId")&&null===localStorage.getItem("facilityId")||W(localStorage.getItem("facilityId"))):Z?(S("",{onSuccess:function(e){m(),F(e.data)},onError:function(e){}}),void 0===localStorage.getItem("facilityId")&&null===localStorage.getItem("facilityId")||W(localStorage.getItem("facilityId"))):I?y("",{onSuccess:function(e){m(),_(e.data)},onError:function(e){}}):m()}),[]);var ie=(0,v.X)(),pe=ie.darkMode,he=ie.setDarkMode;var ve=(0,a.useState)(!1),xe=(0,D.Z)(ve,2),ge=xe[0],je=xe[1],be=function(){je(!1)};return(0,s.jsxs)(p.PO,{className:"mb-4 ".concat(pe?"header-dark":""),position:"sticky",children:[(0,s.jsx)(R.$,{title:"Settings",content:(0,s.jsx)(fe,{closeModal:be,saveHandler:function(e){ne(e)},openModal:je}),isOpen:ge,onClose:be}),(0,s.jsxs)(p.KB,{fluid:!0,children:[(0,s.jsx)(p.X4,{className:"ps-1",onClick:function(){return h({type:"set",sidebarShow:!H})},children:(0,s.jsx)(q.Z,{className:"  ".concat(pe?"icon-dark":""),icon:K.N,size:"lg"})}),(0,s.jsx)(p.qy,{className:"ml-3 mr-4",to:"/",children:(0,s.jsx)("a",{href:"#",children:(0,s.jsx)("img",{src:me,alt:"Logo",style:{width:"105px",height:"62px",backgroundColor:"transparent"}})})}),(0,s.jsxs)(p.g3,{className:"d-none d-md-flex me-auto gap-4",children:[k&&!["/organizations"].includes(t.pathname)&&(0,s.jsx)(p.U6,{children:(0,s.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Organization",onChange:function(e){c(""),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId");var t=e.target.value;F([]),_([]),localStorage.setItem("OrganizationId",t),"Select Organization"!==t&&(V(t),function(e){u(),Y(e,{onSuccess:function(e){m(),_(e.data)},onError:function(e){m()}})}(t),function(e){u(),P(e,{onSuccess:function(e){m(),z(e.data)},onError:function(e){m()}})}(t))},value:localStorage.getItem("OrganizationId"),children:[(0,s.jsx)("option",{children:"Select Organization"}),null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.map((function(e){return(0,s.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})}),Z&&!["/gateway","/organization-sensors","/Facilities","/organizations","/notification-alerts","/dashboard","/sensor/graph","/users"].includes(t.pathname)&&(0,s.jsx)(p.U6,{children:(0,s.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Facility",onChange:function(e){var t=e.target.value;localStorage.setItem("facilityId",t),localStorage.removeItem("departmentId"),_([]),"Select Facility"!==t&&(W(t),function(e){u(),X(e,{onSuccess:function(e){m(),z(e.data)},onError:function(e){m()}})}(t))},value:localStorage.getItem("facilityId"),children:[(0,s.jsx)("option",{children:"Select Facility"}),null===E||void 0===E?void 0:E.map((function(e){return(0,s.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})}),I&&!["/gateway","/organization-sensors","/Facilities-staff","/Facilities","/department","/organizations","/notification-alerts","/dashboard","/sensor/graph","/users"].includes(t.pathname)&&(0,s.jsx)(p.U6,{children:(0,s.jsxs)("select",{size:"sm",className:" form-select ".concat(pe?"select-dark":""),"aria-label":"Department",onChange:function(e){var t=e.target.value;"Select Department"!==t&&function(e){u(),U(e,{onSuccess:function(e){m(),z(e.data)},onError:function(e){m()}})}(t),localStorage.setItem("departmentId",t),c(t)},value:localStorage.getItem("departmentId"),children:[(0,s.jsx)("option",{children:"Select Department"}),null===M||void 0===M?void 0:M.map((function(e){return(0,s.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})}),(0,s.jsx)(p.U6,{children:(0,s.jsx)(p.u5,{id:"".concat(pe?"button-dark":""),onClick:function(){he(!pe)},children:"Change Mode"})})]}),(0,s.jsxs)(p.g3,{style:{display:"block"},children:[(0,s.jsx)("h5",{className:"m-0 ".concat(pe?"heading-dark01":"heading-light01"),children:A}),(0,s.jsx)("p",{className:"m-0 ".concat(pe?"heading-dark01":"heading-light01"),children:w})]}),(0,s.jsx)(p.g3,{className:"ms-3",children:(0,s.jsx)(oe,{closeModal:be,ModalOpen:function(){je(!0)},uploadedImageUrl:Q})})]})]})},ve=n(11087),xe=["component","name","badge","icon"],ge=["component","name","icon","to"],je=function(e){var t=e.items,n=(0,i.TH)(),r=function(e,t,n){return(0,s.jsxs)(s.Fragment,{children:[t&&t,e&&e,n&&(0,s.jsx)(p.C_,{color:n.color,className:"ms-auto",children:n.text})]})},o=function(e,t){var n=e.component,i=e.name,o=e.badge,s=e.icon,c=(0,U.Z)(e,xe),l=n;return(0,a.createElement)(l,(0,z.Z)((0,z.Z)({},c.to&&!c.items&&{component:ve.OL}),{},{key:t},c),r(i,s,o))},c=function e(t,a){var i,c=t.component,l=t.name,d=t.icon,u=t.to,m=(0,U.Z)(t,ge),p=c;return(0,s.jsx)(p,(0,z.Z)((0,z.Z)({idx:String(a),toggler:r(l,d),visible:n.pathname.startsWith(u)},m),{},{children:null===(i=t.items)||void 0===i?void 0:i.map((function(t,n){return t.items?e(t,n):o(t,n)}))}),a)};return(0,s.jsx)(a.Fragment,{children:t&&t.map((function(e,t){return e.items?c(e,t):o(e,t)}))})},be=n(34358),Se=(n(82454),n(93744)),ye=n(31517),ke=n(54546),Ze=n(1278),Ie=n(54566),Ne=n(74251),we=n(3050),Ae=n(65863),Ce=n(46052),Ee=n(43747),De=n(96188),Fe=n(57433),Oe=n(85794),Me=n(67108),_e=(JSON.parse(localStorage.getItem("permissions")),[{component:p.U6,name:"Dashboard",to:"/dashboard",icon:(0,s.jsx)(q.Z,{icon:Se.n,customClassName:"nav-icon"}),permissions:["".concat(o.iH,"_").concat(o.H2)]},{component:p.dw,name:"Admin",icon:(0,s.jsx)(q.Z,{icon:ye.g,customClassName:"nav-icon"}),items:[{component:p.U6,name:"Organizations",to:"/organizations",icon:(0,s.jsx)(q.Z,{icon:ke.V,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]},{component:p.U6,name:"Facilities",to:"/Facilities",icon:(0,s.jsx)(q.Z,{icon:ye.g,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.vw,"_").concat(o.H2)]},{component:p.U6,name:"Department",to:"/department",icon:(0,s.jsx)(q.Z,{icon:Ze.e,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.JK,"_").concat(o.H2)]},{component:p.U6,name:"Equipments",to:"/devices",icon:(0,s.jsx)(q.Z,{icon:Ie.k,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.iH,"_").concat(o.H2)]}]},{component:p.U6,name:"Users",to:"/users",icon:(0,s.jsx)(q.Z,{icon:Ne.H,customClassName:"nav-icon"}),permissions:["".concat(o.vw,"_").concat(o.H2)]},{component:p.dw,name:"Sensor Setup",icon:(0,s.jsx)(q.Z,{icon:we.o,customClassName:"nav-icon"}),items:[{component:p.U6,name:"Organization Sensors",to:"/organization-sensors",icon:(0,s.jsx)(q.Z,{icon:Ae.c,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]},{component:p.U6,name:"Equipment Sensors",to:"/devices-sensors",icon:(0,s.jsx)(q.Z,{icon:Ce.Y,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.t4,"_").concat(o.H2)]},{component:p.U6,name:"GateWays",to:"/gateway",icon:(0,s.jsx)(q.Z,{icon:Ce.Y,customClassName:"nav-icon ps-4"}),permissions:["".concat(o.BA,"_").concat(o.H2)]}]},{component:p.dw,name:"Alerts",icon:(0,s.jsx)(q.Z,{icon:Ee.F,customClassName:"nav-icon"}),permissions:["".concat(o.BA,"_").concat(o.H2)],items:[{component:p.U6,name:"Alarm Recipients",to:"/notification-alerts",icon:(0,s.jsx)(q.Z,{icon:Ae.c,customClassName:"nav-icon ps-4"})},{component:p.U6,name:"Alarm Thresholds",to:"/alarm-thresholds",icon:(0,s.jsx)(q.Z,{icon:De.$,customClassName:"nav-icon ps-4"})},{component:p.U6,name:"Alarm Management",to:"/alarm-management",icon:(0,s.jsx)(q.Z,{icon:Fe.o,customClassName:"nav-icon ps-4"})},{component:p.U6,name:"Escalations",to:"/escalations",icon:(0,s.jsx)(q.Z,{icon:Oe.x,customClassName:"nav-icon ps-4"})},{component:p.U6,name:"Alarm Suppression",to:"/alarm-suppression",icon:(0,s.jsx)(q.Z,{icon:Me.u,customClassName:"nav-icon ps-4"})}]}]),ze=function(){var e=(0,a.useState)([]),t=(0,D.Z)(e,2),n=t[0],r=t[1],i=(0,a.useState)([]),s=(0,D.Z)(i,2),c=s[0],l=s[1];(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("permissions"))||[];r(e)}),[]);var d=(0,a.useMemo)((function(){return _e.map((function(e){if(!e.permissions||o.i2.apply(void 0,[n].concat((0,V.Z)(e.permissions)))){if(e.items){var t=e.items.filter((function(e){return!e.permissions||o.i2.apply(void 0,[n].concat((0,V.Z)(e.permissions)))}));return(0,z.Z)((0,z.Z)({},e),{},{items:t})}return e}return null})).filter(Boolean)}),[n,_e]);return(0,a.useEffect)((function(){l(d)}),[d]),c},He=function(){var e=(0,ae.I0)(),t=(0,ae.v9)((function(e){return e.sidebarUnfoldable})),n=(0,ae.v9)((function(e){return e.sidebarShow})),r=(0,v.X)(),i=r.darkMode,c=(r.setDarkMode,(0,O.useMutation)(se.LE).mutate),l=ze();(0,a.useEffect)((function(){c("",{onSuccess:function(e){localStorage.setItem("permissions",JSON.stringify(e.permissions))},onError:function(e){console.log(e)}})}),[]);var d=JSON.parse(localStorage.getItem("permissions")),u=(0,o.Z_)(d,o.BA,o.H2),m=(0,o.Z_)(d,o.vw,o.H2);(0,o.Z_)(d,o.JK,o.H2),(0,o.Z_)(d,o.iH,o.H2);return(0,s.jsxs)(p.z3,{position:"fixed",unfoldable:t,visible:n,onVisibleChange:function(t){e({type:"set",sidebarShow:t})},className:"sidebar-light ".concat(i?"sidebar-dark":""),children:[(0,s.jsx)(p.Dl,{className:"d-none d-md-flex sidebar-light ".concat(i?"sidebar-dark":""),to:"/",children:(0,s.jsx)("div",{style:{fontSize:"25px"},children:m&&!u&&(0,s.jsx)("span",{children:localStorage.getItem("organizationName")})})}),(0,s.jsx)(p.Xk,{children:(0,s.jsx)(be.Z,{children:(0,s.jsx)(je,{items:l})})})]})},Le=a.memo(He),Re=n(46429),Te=n(27817),Ve=function(e){var t=e.children,n=e.href,a="https://coreui.io/react/docs/".concat(n);return(0,s.jsxs)("div",{className:"example",children:[(0,s.jsxs)(p.n2,{variant:"tabs",children:[(0,s.jsx)(p.U6,{children:(0,s.jsxs)(p.AQ,{href:"#",active:!0,children:[(0,s.jsx)(q.Z,{icon:Re.B,className:"me-2"}),"Preview"]})}),(0,s.jsx)(p.U6,{children:(0,s.jsxs)(p.AQ,{href:a,target:"_blank",children:[(0,s.jsx)(q.Z,{icon:Te.I,className:"me-2"}),"Code"]})})]}),(0,s.jsx)(p.gr,{className:"rounded-bottom",children:(0,s.jsx)(p.IA,{className:"p-3 preview",visible:!0,children:t})})]})},qe=a.memo(Ve)},52036:function(e,t,n){n.d(t,{$:function(){return o}});var a=n(78983),r=(n(72791),n(99579)),i=n(80184),o=function(e){var t=e.title,n=e.content,o=e.onClose,s=e.isOpen,c=(0,r.X)(),l=c.darkMode;c.setDarkMode;return(0,i.jsxs)(a.Tk,{visible:s,onClose:o,children:[(0,i.jsx)(a.p0,{closeButton:!0,className:"modal-light ".concat(l?"modal-dark":""),children:(0,i.jsx)(a.fl,{id:"".concat(l?"heading-dark":""),children:t})}),(0,i.jsx)(a.sD,{className:"modal-light pt-0 ".concat(l?"modal-dark":""),children:n})]})}},13524:function(e,t,n){n.d(t,{_:function(){return a}});var a="http://ec2-13-233-60-110.ap-south-1.compute.amazonaws.com:8000/"},66757:function(e,t,n){n.d(t,{BA:function(){return r},H2:function(){return a},JK:function(){return o},Z_:function(){return l},i2:function(){return d},iH:function(){return s},t4:function(){return c},vw:function(){return i}});var a="view",r="organization",i="facility",o="department",s="device",c="sensor",l=function(e,t,n){return null===e||void 0===e?void 0:e.includes("".concat(t,"_").concat(n))},d=function(e,t){return null===e||void 0===e?void 0:e.includes("".concat(t))}},52178:function(e,t,n){n.d(t,{A:function(){return r}});var a=n(80491),r=function(e){(0,a.u)(e)}},80491:function(e,t,n){n.d(t,{b:function(){return i},u:function(){return o}});var a=n(31243),r=n(13524),i=a.Z.create({baseURL:r._,timeout:5e4,headers:{"Content-Type":"application/json"}}),o=function(e){e?i.defaults.headers.common.Authorization="Bearer ".concat(e):delete i.defaults.headers.common.Authorization}},68861:function(e,t,n){n.d(t,{E_:function(){return p},Qk:function(){return c},Sl:function(){return l},Wp:function(){return f},ZK:function(){return s},nu:function(){return d},sI:function(){return m},xO:function(){return u}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-alert-threshold/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/update-alert-threshold",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-alert-notification/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("alert/update-alert/".concat(t.id,"/").concat(t.alertid),{status:"Acknowledged",comment:t.comment});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("alertsuppression",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("alertsuppression/find-by-type?type=Upcoming");case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("alertsuppression/find-by-type?type=Active");case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("alertsuppression/find-by-type?type=Expired");case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},17834:function(e,t,n){n.d(t,{BF:function(){return x},D2:function(){return d},F4:function(){return v},Fi:function(){return l},HH:function(){return f},I8:function(){return m},LE:function(){return c},Mz:function(){return h},NA:function(){return b},XH:function(){return p},bU:function(){return s},iU:function(){return u},oL:function(){return g},uj:function(){return j}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("auth/login",{email:t.email,password:t.password});case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("general");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("organization",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("organization");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("facility/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("organization/".concat(t.editData.customerid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department/by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("organization/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("auth/get-reset-token",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/auth/reset-password",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t.file),n.append("organizationName",t.organizationName),(0,i.A)(localStorage.getItem("token")),e.prev=4,e.next=7,o.b.post("organization/upload",n,{headers:{"Content-Type":"multipart/form-data"}});case 7:return r=e.sent,s=r.data,e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(4),console.error("Error uploading file:",e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=4,o.b.patch("organization/".concat(localStorage.getItem("organizationid")),{logo:t});case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(t.token),e.next=4,o.b.patch("alert/update-alert/".concat(t.id),{status:t.status});case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},46522:function(e,t,n){n.d(t,{BZ:function(){return l},If:function(){return c},pF:function(){return s},q3:function(){return d}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("department");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("department/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("department",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("department/".concat(t.editData.departmentid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},96062:function(e,t,n){n.d(t,{S6:function(){return f},V6:function(){return l},Xo:function(){return c},a8:function(){return m},hd:function(){return u},kr:function(){return h},n1:function(){return p},oy:function(){return d}});var a=n(74165),r=n(15861),i=n(91933),o=n(52178),s=n(80491),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.get("device");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function l(){return(0,i.useQuery)(["repos"],c)}var d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.get("device/by-depId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.get("device/by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.get("device/by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.delete("device/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.post("device",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.A)(localStorage.getItem("token")),e.next=3,s.b.patch("device/".concat(t.editData.deviceid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},56019:function(e,t,n){n.d(t,{I$:function(){return v},IN:function(){return l},LP:function(){return p},OH:function(){return h},Qc:function(){return d},Tn:function(){return m},Zo:function(){return f},_t:function(){return x},bM:function(){return c},fb:function(){return s},zs:function(){return u}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("/sensor/get-sensors-by-deviceId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-facId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-equipment-sensors-by-depId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/unAssigned-from-device/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("sensor/assign-sensor",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/update-sensor/".concat(t.editData.sensorid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("SensorDeviceConfiguration/CreateSensorDeviceConfiguration",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-sensors-configuration/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.handler,t.id,(0,i.A)(localStorage.getItem("token")),e.next=4,o.b.patch("sensor/update-sensors-configuration",n);case 4:return r=e.sent,s=r.data,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},45013:function(e,t,n){n.d(t,{WH:function(){return s},dL:function(){return c},nO:function(){return d},sB:function(){return l}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("facility");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("facility/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("facility",{facility_type:t.facility_type,name:t.name,userid:t.userid,customerid:Number(t.customerid),email:t.email,contactphonenumber:t.contactphonenumber,contactname:t.contactname,timezone:t.timezone,currency:t.currency,address:t.address,street:t.street,city:t.city,postcode:+t.postcode,latitude:+t.latitude,longitude:+t.longitude,isfacilityadmin:!0});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("facility/".concat(t.editData.facilityid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},25741:function(e,t,n){n.d(t,{Kj:function(){return d},S9:function(){return l},aI:function(){return c},fY:function(){return s},iR:function(){return u},zw:function(){return m}});var a=n(74165),r=n(15861),i=(n(91933),n(52178)),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-assign-sensors");case 3:return t=e.sent,n=t.data,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-unassigned-sensors");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("sensor/get-all-sensors-by-orgId/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("sensor/unAssigned/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("sensor/assign-sensor",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("/sensor/update-sensor/".concat(t.handler.id),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18393:function(e,t,n){n.d(t,{Jd:function(){return b},Lg:function(){return h},M6:function(){return l},Rp:function(){return v},Vm:function(){return u},Vt:function(){return f},XZ:function(){return g},Xk:function(){return p},Z$:function(){return s},cn:function(){return m},dk:function(){return x},jm:function(){return d},lI:function(){return j},vx:function(){return c}});var a=n(74165),r=n(15861),i=n(52178),o=n(80491),s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/unassigned-users");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/assigned-users");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/unassigned-users/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("user/assigned-users/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.get("roles");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("user/create",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.patch("user/".concat(t.editData.userid),t.handler);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/".concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("facility/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("department/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.post("device/assignStaff",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteFacilityStaff?userid=".concat(t.userid,"&facilityid=").concat(t.facilityid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteDepartmentStaff?userid=".concat(t.userid,"&departmentid=").concat(t.departmentid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.A)(localStorage.getItem("token")),e.next=3,o.b.delete("user/staff/deleteDeviceStaff?userid=".concat(t.userid,"&deviceid=").concat(t.deviceid));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10781:function(e,t,n){var a=(0,n(65847).ZP)((function(e){return{data:[],addData:function(t){return e((function(e){return{data:[t]}}))}}}));t.Z=a},96623:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=n(29439),r=n(36459),i=n(72791),o=n(78983),s=n(59513),c=n.n(s),l=n(13496),d=n(58290),u=n(80184);var m=function(e){e.sensorId;var t=e.sensorsData,n=e.loading,a=function(){if(!t)return{updatedOptions:{chart:{type:"area",height:350},xaxis:{categories:[]}},updatedSeries:[]};var e=t.sensorName,n=t.maxvalue,a=t.minvalue,r=(new Date).toISOString().split("T")[0],i=t[r]||[];return{updatedOptions:{chart:{type:"area",height:350},xaxis:{categories:i.map((function(e){var t=new Date(e.reading_timestamp);return"".concat(t.getHours(),":").concat((t.getMinutes()<10?"0":"")+t.getMinutes())}))}},updatedSeries:[{name:e,data:i.map((function(e){return parseFloat(e.measure)}))},{name:"Max Value",data:[parseFloat(n)],color:"#FF0000",type:"line"},{name:"Min Value",data:[parseFloat(a)],color:"#00FF00",type:"line"}]}}(),r=a.updatedOptions,i=a.updatedSeries;return(0,u.jsx)("div",{className:"blue-top",children:(0,u.jsx)("div",{className:"main-container",children:n?(0,u.jsx)(d.Z,{active:!0,paragraph:{rows:3}}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("p",{style:{color:"black"},children:null===t||void 0===t?void 0:t.sensorName})}),(0,u.jsx)("div",{id:"chart",children:(0,u.jsx)(l.Z,{options:r,series:i,type:"area",height:350})})]})})})},p=n(99579),f=n(57689);function h(e){var t;(0,r.Z)(e);var n=(null===(t=(0,f.TH)().state)||void 0===t?void 0:t.sensorGraphData)||{},s=(0,i.useState)(new Date),l=(0,a.Z)(s,2),d=l[0],h=l[1],v=(0,i.useState)(new Date),x=(0,a.Z)(v,2),g=x[0],j=x[1],b=(0,f.s0)(),S=function(e){var t=e.value,n=e.onClick;return(0,u.jsx)("div",{className:"custom-input",children:(0,u.jsx)("input",{type:"text",value:t,onClick:n,placeholder:"Select a date"})})},y=(0,i.useState)(),k=(0,a.Z)(y,2),Z=(k[0],k[1]),I=(0,i.useState)(!0),N=(0,a.Z)(I,2),w=N[0],A=N[1],C=(0,i.useState)(),E=(0,a.Z)(C,2),D=E[0];E[1];(0,i.useEffect)((function(){d.toISOString(),g.toISOString();A(!1),Z({})}),[d,g]);var F=(0,p.X)(),O=F.darkMode;F.setDarkMode;return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{style:{flexDirection:"column",padding:{base:"10px",md:"20px"}},children:[(0,u.jsx)(o.u5,{w:"20",onClick:function(){b("/dashboard")},children:"Back"}),(0,u.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:(0,u.jsx)(o.rb,{className:"d-inline-flex p-2 docs-highlight",style:{display:"flex ",gap:"10px"},children:(0,u.jsxs)("div",{className:"DatePicker",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("p",{style:{fontWeight:"bold"},id:"".concat(O?"heading-dark":""),children:"Select a Start Date"})}),(0,u.jsx)(c(),{className:" form-select ".concat(O?"select-dark":""),selected:d,onChange:function(e){return h(e)},name:"startDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select start date",customInput:(0,u.jsx)(S,{})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("p",{style:{fontWeight:"bold"},id:"".concat(O?"heading-dark":""),children:"Select an End Date"})}),(0,u.jsx)(c(),{className:" form-select ".concat(O?"select-dark":""),selected:g,onChange:function(e){return j(e)},name:"endDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select end date",customInput:(0,u.jsx)(S,{})})]})]})})}),(0,u.jsx)("div",{children:(0,u.jsx)(m,{sensorId:D,sensorsData:n,loading:w})})]})})}},32152:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(4942),r=n(29439),i=n(72791),o=n(99579),s=n(66757),c=n(78983),l=(n(93076),n(2635),n(80184)),d=n(91933),u=n(42943),m=n(44854),p=n(81561),f=n(46178),h=n(54546),v=n(31517),x=n(54566),g=n(1278),j=n(3050),b=n(65863),S=n(24846),y=n(93433),k=n(1413),Z=n(13524),I=n(58290);var N=n.p+"static/media/battery.1affb5b487e65028f8caf95b8e5df642.svg",w=n(57689),A=n(31457),C=(0,i.memo)((function(e){var t=e.minValue,n=e.maxValue,a=e.currentValue,s=e.readingTime,c=e.awsId,d=e.devicename,u=(Math.min(Math.max(a,t),n),null===a?0:(a-t)/(n-t)),m=(0,o.X)().darkMode,p=(0,i.useState)(!0),f=(0,r.Z)(p,2),h=f[0],v=f[1],x=(0,i.useState)(0),g=(0,r.Z)(x,2),j=(g[0],g[1]);function b(e,t){var n=t.slice(0,23).replace(" ","T")+"Z";t=new Date(n),e=new Date(e);var a=!isNaN(t.getTime()),r=!isNaN(e.getTime());if(!a||!r)return(0,l.jsx)("span",{style:{color:"red"},children:"Offline"});var i=Math.floor((e-t)/1e3),o=i%60,s=Math.floor(i/60)%60,c=Math.floor(i/3600);if(c>=24){var d=Math.floor(c/24);return(0,l.jsx)("span",{style:{color:"red"},children:"".concat(d," ").concat(1!==d?"days":"day"," ago")})}return c>0?(0,l.jsx)("span",{style:{color:"red"},children:"".concat(c," ").concat(1!==c?"hours":"hour"," ago")}):s>0?(0,l.jsx)("span",{style:{color:"red"},children:"".concat(s," ").concat(1!==s?"minutes":"minute"," ago")}):(0,l.jsx)("span",{style:{color:"red"},children:"".concat(o," ").concat(1!==o?"seconds":"second"," ago")})}(0,i.useEffect)((function(){var e=setInterval((function(){h?(v(!1),j(b(new Date,s))):j((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[h,s]);var S=(0,i.useMemo)((function(){return(0,l.jsx)(A.Z,{id:"gauge-chart2",nrOfLevels:20,colors:["#2ECC71","#ca0035"],arcWidth:.3,percent:u,needleColor:"#BFC9CA",animate:!0,animDelay:1e3,animateDuration:2e3,style:{height:"auto",width:"auto"}})}),[u]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsxs)("div",{style:{marginRight:"00px",color:"black"},children:[d,"-",c," "]}),(0,l.jsx)("div",{}),(0,l.jsx)("div",{children:S}),(0,l.jsxs)("div",{className:"text",children:[(0,l.jsxs)("div",{className:"Min-Max  d-flex",style:{gap:"28px",color:"black"},id:"".concat(m?"heading-dark":""),children:[(0,l.jsxs)("span",{children:[t," ",(0,l.jsx)("span",{children:"\u2103"})]}),(0,l.jsxs)("span",{children:[a," ",(0,l.jsx)("span",{children:"\u2103"})]}),(0,l.jsxs)("span",{children:[n," ",(0,l.jsx)("span",{children:"\u2103"})]})]}),(0,l.jsx)("div",{style:{marginTop:"3px",color:isNaN(a)?"red":"black"},children:b(new Date,s)})]})]})}));C.displayName="Gauge";var E=C,D=n(44925),F=n(74165),O=n(15861),M=n(52178),_=n(80491),z=["awsSensorId"],H=JSON.parse(localStorage.getItem("permissions")),L=((0,s.Z_)(H,s.BA,s.H2),(0,s.Z_)(H,s.vw,s.H2),(0,s.Z_)(H,s.JK,s.H2),(0,s.Z_)(H,s.iH,s.H2),function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,_.b.get("sensor/get-assign-sensors-widget/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,_.b.post("dashboard/find",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,M.A)(localStorage.getItem("token")),e.next=3,_.b.post("aws/save-sensor-data",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t,n){var a,r;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.id){e.next=7;break}return(0,M.A)(localStorage.getItem("token")),e.next=4,_.b.post("sensor/checkpoint-report/".concat(t.id),t.payload);case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,O.Z)((0,F.Z)().mark((function e(t){var n,a,r,i;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.awsSensorId,a=(0,D.Z)(t,z),(0,M.A)(localStorage.getItem("token")),e.next=5,_.b.post("sensor/graph-report/".concat(n),a);case 5:return r=e.sent,i=r.data,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){e.setAlarms;var t,n=e.setoffline,a=e.setOk,u=e.setwarnings,m=(e.showAlarms,e.showoffline),p=e.showok,f=e.showwarnings,h=(0,i.useState)([]),v=(0,r.Z)(h,2),x=(v[0],v[1],(0,d.useMutation)(L).mutate),g=(0,d.useMutation)(q).mutate,j=(0,i.useState)(),b=(0,r.Z)(j,2),S=(b[0],b[1]),A=(0,i.useState)([]),C=(0,r.Z)(A,2),D=C[0],F=C[1],O=(0,i.useState)(!1),M=(0,r.Z)(O,2),_=M[0],z=M[1],H=JSON.parse(localStorage.getItem("permissions")),R=(0,s.Z_)(H,s.BA,s.H2);(0,s.Z_)(H,s.vw,s.H2),(0,s.Z_)(H,s.JK,s.H2),(0,s.Z_)(H,s.iH,s.H2);function T(e){x(e,{onSuccess:function(e){S(e.data),F(e.data)},onError:function(e){}})}var V=function(e){var t=(new Date).toISOString();!function(e,t){g(e,{onSuccess:function(e){var n={sensorGraphData:e.data,item:t};J("/sensor/graph",{state:n})},onError:function(e){}})}({sensorTypeId:e.sensorTypeId,awsSensorId:e.awsSensorId,startDate:t,endDate:t},e)};localStorage.getItem("OrganizationId");(0,i.useEffect)((function(){var e=function(){if(R){var e=localStorage.getItem("OrganizationId");null!==e&&void 0!==e&&"Select Organization"!==e&&(z(!0),T(e),z(!1))}else{var t=localStorage.getItem("organizationid");null!==t&&(z(!0),T(t),z(!1))}};e();var t=setInterval(e,3e5);return function(){return clearInterval(t)}}),[R]),(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");if(null!==e&&void 0!==e&&"Select Organization"!==e){var t=new EventSource("".concat(Z._,"sse/").concat(e));return t.onmessage=function(e){var t=JSON.parse(e.data);S((function(e){var n=e.map((function(e){return e.awsSensorId===t.aws_sensorid&&e.property===t.property?(0,k.Z)((0,k.Z)({},e),{},{value:t.value,readingDateTime:t.readingDateTime,batteryValue:t.batteryValue}):e}));return console.log(n),F(n),n}))},function(){t.close()}}}),[]),(0,i.useEffect)((function(){}),[]);var U=0,P=0,X=0,B=[],W=[],Y=[];null===D||void 0===D||D.forEach((function(e){null!==(null===e||void 0===e?void 0:e.value)&&((null===e||void 0===e?void 0:e.value)<(null===e||void 0===e?void 0:e.minValue)||(null===e||void 0===e?void 0:e.value)>(null===e||void 0===e?void 0:e.maxValue))?(U++,B.push(e)):null===(null===e||void 0===e?void 0:e.value)?(P++,W.push(e)):(X++,Y.push(e))})),u(U),n(P),a(X);var G=D;G=f?B:m?W:p?Y:D;var J=(0,w.s0)(),Q=(0,o.X)(),K=Q.darkMode;Q.setDarkMode;return(0,l.jsx)("div",{className:"card-top",style:{width:"100vw"},children:(0,l.jsx)(c.rb,{className:"sensor_Container my-5 justify-content-start",children:_?(0,l.jsxs)(l.Fragment,{children:[(0,y.Z)(Array(2)).map((function(e,t){return(0,l.jsx)(c.b7,{sm:"12",md:"6",lg:"3",className:" ".concat(K?"table_container_dark":"table_container_light"),children:(0,l.jsx)(c.xH,{children:(0,l.jsx)(c.sl,{children:(0,l.jsx)(I.Z,{active:!0,paragraph:{rows:3}})})})},t)})),(0,l.jsx)("div",{})]}):null===(t=G)||void 0===t?void 0:t.map((function(e,t){return(0,l.jsx)(c.b7,{sm:"12",className:" ".concat(K?"table_container_dark":"table_container_light"),style:{border:"1px solid rgba(163, 163, 163, 0.32)",borderRadius:"5px",padding:"0",width:"auto",height:"100%"},children:(0,l.jsxs)(c.xH,{style:{cursor:"pointer"},className:" ".concat(K?"table_container_dark":"table_container_light"),onClick:function(){return V(e)},children:[(0,l.jsxs)(c.bn,{className:"d-flex justify-content-between p-2 align-items-center",id:"".concat(K?"heading-dark":""),style:{height:"45px"},children:[(0,l.jsx)("p",{className:"m-0",children:null!==e&&void 0!==e&&e.sensorName?e.sensorName:e.sensorId}),(0,l.jsxs)(c.b7,{className:"battery",children:[(0,l.jsx)("img",{src:N,alt:"Battery",style:{width:"20px",height:"20px",marginLeft:"5px"}}),(0,l.jsx)("div",{style:{color:e.batteryValue<3.5?"red":"green"},id:"".concat(K?"heading-dark":""),children:e.batteryValue})]})]}),(0,l.jsx)(c.sl,{style:{backgroundColor:null===(null===e||void 0===e?void 0:e.value)?"rgb(157, 223, 228)":(null===e||void 0===e?void 0:e.value)<(null===e||void 0===e?void 0:e.minValue)||(null===e||void 0===e?void 0:e.value)>(null===e||void 0===e?void 0:e.maxValue)?"rgb(238, 141, 141)":"rgb(144, 238, 144 )"},children:(0,l.jsx)(E,{devicename:null===e||void 0===e?void 0:e.deviceName,awsId:null===e||void 0===e?void 0:e.awsSensorId,id:"".concat(K?"heading-dark":""),minValue:null===e||void 0===e?void 0:e.minValue,maxValue:null===e||void 0===e?void 0:e.maxValue,currentValue:isNaN(null===e||void 0===e?void 0:e.value)?0:null===e||void 0===e?void 0:e.value,readingTime:null!==(null===e||void 0===e?void 0:e.value)?null===e||void 0===e?void 0:e.readingDateTime:""})})]})},t)}))})})},P=n(59513),X=n.n(P),B=(n(68639),function(e){e.date,e.day;var t=e.data,n=(0,o.X)(),a=n.darkMode,s=(n.setDarkMode,(0,i.useState)(t||[])),c=(0,r.Z)(s,2),d=c[0],u=c[1];(0,i.useEffect)((function(){t&&u(t)}),[t]);var m=(0,y.Z)(new Set(d.map((function(e){return e.date})))),p=(0,y.Z)(new Set(d.flatMap((function(e){return e.readings.map((function(e){return e.interval}))})))),f=new Map;return d.forEach((function(e){var t=e.aws_id,n=e.sensorValue,a="".concat(t,"-").concat(n),r=f.get(a)||{awsId:t,sensorName:n,measures:[]};p.forEach((function(t){var n=e.readings.filter((function(e){return e.interval===t})).map((function(t){return{measure:t.measure,interval:t.interval,min:e.min,max:e.max}}));r.measures.push(n)})),f.set(a,r)})),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("table",{className:"w-100 hccp_report_table",children:[(0,l.jsxs)("thead",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{id:"".concat(a?"heading-dark":""),children:"Sensor Name"}),m.map((function(e){return(0,l.jsx)("th",{id:"".concat(a?"heading-dark":""),colSpan:p.length,children:e},e)}))]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{}),m.map((function(){return p.map((function(e){return(0,l.jsx)("th",{children:"".concat(e,":00")},e)}))}))]})]}),(0,l.jsx)("tbody",{children:(0,y.Z)(f.values()).map((function(e){var t=e.awsId,n=e.sensorName,r=e.measures;return(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{id:"".concat(a?"heading-dark":""),children:[n,"-",t]}),r.flat().map((function(e,a){var r=e.measure,i=(e.interval,e.min),o=e.max;return 0===parseFloat(r)?(0,l.jsx)("td",{style:{backgroundColor:"lightgrey",border:"3px solid #bababa",padding:"5px"},children:"n/a"},"".concat(t,"-").concat(n,"-").concat(a)):(0,l.jsx)("td",{style:{backgroundColor:parseFloat(r)>parseFloat(o)||parseFloat(r)<parseFloat(i)?"#FF0000":"#90EE90",border:"3px solid #bababa",padding:"5px"},children:r},"".concat(t,"-").concat(n,"-").concat(a))}))]},"".concat(t,"-").concat(n))}))}),";"]})})}),W=n(24270);var Y=function(){var e=JSON.parse(localStorage.getItem("permissions")),t=(0,s.Z_)(e,s.BA,s.H2),n=((0,s.Z_)(e,s.vw,s.H2),(0,s.Z_)(e,s.JK,s.H2),(0,s.Z_)(e,s.iH,s.H2),(0,i.useState)(new Date)),a=(0,r.Z)(n,2),u=a[0],m=a[1],p=(0,i.useState)(1),f=(0,r.Z)(p,2),h=f[0],v=f[1],x=(0,i.useState)([]),g=(0,r.Z)(x,2),j=g[0],b=g[1],S=(0,i.useState)([]),y=(0,r.Z)(S,2),Z=y[0],I=y[1],N=(0,i.useState)([]),w=(0,r.Z)(N,2),A=w[0],C=w[1],E=(u.toISOString(),(0,o.X)()),D=E.darkMode,F=(E.setDarkMode,(0,d.useMutation)(T).mutate),O=(0,d.useMutation)(V).mutate;function M(e,t){O({payload:e,id:t},{onSuccess:function(e){var t,n,a;b(null===(t=e.data)||void 0===t?void 0:t.checkPoints),C(null===(n=e.data)||void 0===n?void 0:n.intervals),I(null===(a=e.data)||void 0===a?void 0:a.sensors)},onError:function(e){}})}(0,i.useEffect)((function(){var e=function(){var e;F(e,{onSuccess:function(e){},onError:function(e){}})};e();var t=setInterval(e,3e5);return function(){return clearInterval(t)}}),[]),(0,i.useEffect)((function(){var e={days:h,startDate:u.toISOString(),sensorIds:[]};if(t){var n=localStorage.getItem("OrganizationId");null!==n&&void 0!==n&&"Select Organization"!==n&&M(e,n)}else M(e,localStorage.getItem("organizationid"))}),[u,h,t]);var _=(0,i.useState)([]),z=(0,r.Z)(_,2),H=z[0],L=z[1];return(0,l.jsxs)(c.xH,{className:"table_container_light ".concat(D?"table_container_dark":""),style:{marginTop:"2rem",borderRadius:"5px",padding:"25px",border:"1px solid rgba(163, 163, 163, 0.32)"},children:[(0,l.jsx)("h3",{id:"".concat(D?"heading-dark":""),children:"CheckPoint Report"}),(0,l.jsx)("form",{className:"d-flex",children:(0,l.jsxs)("div",{className:"d-flex gap-5 mt-2 ",children:[(0,l.jsxs)("div",{className:"Custom-Date items-center d-flex gap-2 w-50",children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),children:"Select a Date"}),(0,l.jsx)(X(),{className:"date form-select ".concat(D?"select-dark":""),selected:u,name:"startDate",dateFormat:"MM/dd/yyyy",placeholderText:"Select a date",onChange:function(e){m(e),M({days:h,startDate:e.toISOString()})}})]}),(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),style:{marginRight:"20px",marginLeft:"30px"},children:"Select Sensors"}),(0,l.jsx)(W.ZP,{isMulti:!0,className:"form-select ".concat(D?"select-dark":""),value:H.map((function(e){var t;return{label:null===(t=Z.find((function(t){return t.sensorTypeId===e})))||void 0===t?void 0:t.sensorValue,value:e}})),options:Z.map((function(e){return{label:e.sensorValue,value:e.sensorTypeId}})),onChange:function(e){var t=e.map((function(e){return e.value}));L(t)},styles:{container:function(e){return(0,k.Z)((0,k.Z)({},e),{},{width:300})}}}),(0,l.jsx)("button",{onClick:function(e){e.preventDefault();var n={days:h,startDate:u.toISOString(),sensorIds:H};M(n,t?localStorage.getItem("OrganizationId"):localStorage.getItem("organizationid"))},style:{width:"100px",height:"45px",borderColor:"lightgray",borderBottomColor:"lightgray",borderRadius:"5px",boxShadow:"3px 3px  0 rgba(212, 211, 209, 0.9) ",marginLeft:"10px",marginTop:"0px"},children:"Submit"}),(0,l.jsxs)("div",{className:"d-flex",style:{marginRight:"0px"},children:[(0,l.jsx)("label",{htmlFor:"datePicker",id:"".concat(D?"heading-dark":""),style:{marginRight:"20px",marginLeft:"30px"},children:"Days"}),(0,l.jsx)("select",{className:"form-select ".concat(D?"select-dark":""),value:h,style:{width:"80px"},onChange:function(e){var t=Number(e.target.value);v(t),M({days:t,startDate:u.toISOString()})},children:[1,2,3,4,5,6,7].map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))})]}),(0,l.jsx)("div",{className:"d-flex gap-2",style:{marginLeft:"5px"},children:null===Object||void 0===Object?void 0:Object.entries(A).map((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return(0,l.jsx)("button",{color:"primary",className:"float-end mr-3",style:{width:"50px",height:"45px",borderColor:"lightgray",borderBottomColor:"lightgray",borderRadius:"5px",boxShadow:"3px 3px  0 rgba(212, 211, 209, 0.9) "},onClick:function(e){return e.preventDefault()},children:n},n)}))})]})]})}),(0,l.jsx)("div",{className:"overflow-x-scroll w-100",children:(0,l.jsx)(B,{date:u,day:h,data:j})})]})},G=(n(96623),function(e){var t=e.name,n=e.count,a=e.icon,r=localStorage.getItem("OrganizationId"),i=(0,o.X)(),s=i.darkMode,c=(i.setDarkMode,(0,k.Z)((0,k.Z)({},r&&"Select Organization"!==r&&{width:"20%"}),{},{visibility:"visible"}));return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"item wow fadeInUpBig animated animated",style:c,id:"".concat(s?"count-dark":"count-light"),children:[(0,l.jsx)(S.Z,{icon:a,alt:"Count"}),(0,l.jsx)("h3",{id:"".concat(s?"heading-dark":""),children:n}),(0,l.jsx)("span",{}),(0,l.jsx)("p",{id:"".concat(s?"heading-dark":""),children:t})]})})}),J=n(18043);var Q=function(){var e=(0,J.U)().dispatch,t=((0,o.X)().departmentId,function(){return e({type:"HIDE_LOADER"})}),n=(0,d.useMutation)(R).mutate,y=JSON.parse(localStorage.getItem("permissions")),k=(0,s.Z_)(y,s.BA,s.H2),Z=(0,s.Z_)(y,s.vw,s.H2),I=(0,s.Z_)(y,s.JK,s.H2),N=((0,s.Z_)(y,s.iH,s.H2),(0,i.useState)(0)),w=(0,r.Z)(N,2),A=w[0],C=w[1],E=(0,i.useState)(0),D=(0,r.Z)(E,2),F=D[0],O=D[1],M=(0,i.useState)(0),_=(0,r.Z)(M,2),z=_[0],H=_[1],L=(0,i.useState)(0),T=(0,r.Z)(L,2),V=T[0],q=T[1],P=(0,i.useState)(0),X=(0,r.Z)(P,2),B=X[0],W=X[1],Q=(0,i.useState)(0),K=(0,r.Z)(Q,2),$=K[0],ee=K[1],te=localStorage.getItem("OrganizationId"),ne=localStorage.getItem("facilityId"),ae=localStorage.getItem("departmentId"),re=(0,o.X)(),ie=re.darkMode;re.setDarkMode;function oe(e,r){var i=(0,a.Z)({},r,Number(e));setTimeout((function(){n(i,{onSuccess:function(e){var n,a,r,i,o,s;C(null===(n=e.data.counts)||void 0===n?void 0:n.OrganizationCount),O(null===(a=e.data.counts)||void 0===a?void 0:a.FacilityCount),H(null===(r=e.data.counts)||void 0===r?void 0:r.DepartmentCount),q(null===(i=e.data.counts)||void 0===i?void 0:i.DeviceCount),W(null===(o=e.data.counts)||void 0===o?void 0:o.UnAssignedSensorCount),ee(null===(s=e.data.counts)||void 0===s?void 0:s.AssignedSensorCount),t()},onError:function(e){O(0),H(0),q(0),W(0),ee(0),t()}})}),0)}var se=(0,i.useState)(0),ce=(0,r.Z)(se,2),le=ce[0],de=ce[1],ue=(0,i.useState)(0),me=(0,r.Z)(ue,2),pe=me[0],fe=me[1],he=(0,i.useState)(0),ve=(0,r.Z)(he,2),xe=ve[0],ge=ve[1],je=(0,i.useState)(0),be=(0,r.Z)(je,2),Se=be[0],ye=be[1],ke=(0,i.useState)(!1),Ze=(0,r.Z)(ke,2),Ie=Ze[0],Ne=Ze[1],we=(0,i.useState)(!1),Ae=(0,r.Z)(we,2),Ce=Ae[0],Ee=Ae[1],De=(0,i.useState)(!1),Fe=(0,r.Z)(De,2),Oe=Fe[0],Me=Fe[1],_e=(0,i.useState)(!1),ze=(0,r.Z)(_e,2),He=ze[0];ze[1];return(0,i.useEffect)((function(){var e,t;if(null!==ae&&void 0!==ae&&"Select Department"!==ae)e=ae,t="departmentid";else if(null!==ne&&void 0!==ne&&"Select Facility"!==ne)e=ne,t="facilityid";else if(null!==te&&void 0!==te){if("Select Organization"===te)return void oe();e=te,t="customerid"}void 0!==e&&void 0!==t?oe(e,t):oe()}),[ae,ne,te]),(0,l.jsxs)(l.Fragment,{children:[k?localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId")&&void 0!==localStorage.getItem("OrganizationId")||localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId")||localStorage.getItem("departmentId")&&"Select Department"!==localStorage.getItem("departmentId")?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{id:"".concat(ie?"heading-dark":""),children:"Conditions Summary"}),(0,l.jsx)("h6",{id:"".concat(ie?"heading-dark":""),children:"Keep track of your Sensor status"})]}),(0,l.jsxs)("div",{style:{marginTop:"30px",marginBottom:"30px",color:"black"},children:[(0,l.jsx)("h4",{id:"".concat(ie?"heading-dark":""),children:"Overview"}),(0,l.jsx)("button",{style:{borderRadius:"5px",padding:"5px"},onClick:function(){Me(!1),Ee(!1),Ne(!1)},children:"Clear Filter"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(c.rb,{className:"status_card_container",children:[(0,l.jsxs)(c.b7,{md:6,lg:3,className:"status_card",id:"status_card_red",onClick:function(){Ne(!0),Ee(!1),Me(!1)},children:[(0,l.jsx)(S.Z,{icon:u.D,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#FF0505"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#FF0505"},children:le}),(0,l.jsx)("p",{children:"Warning"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_yellow",children:[(0,l.jsx)(S.Z,{icon:m.R,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#DA582C"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#DA582C"},children:Se}),(0,l.jsx)("p",{children:"Alarm"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_green",onClick:function(){Me(!0),Ee(!1),Ne(!1)},children:[(0,l.jsx)(S.Z,{icon:p.F,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#32712F"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#32712F"},children:xe}),(0,l.jsx)("p",{children:"Ok"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_blue",onClick:function(){Ee(!0),Ne(!1),Me(!1)},children:[(0,l.jsx)(S.Z,{icon:f.s,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#349FC4"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#349FC4"},children:pe}),(0,l.jsx)("p",{children:"Offine"})]})]}),(0,l.jsx)(c.rb,{children:(0,l.jsx)(U,{setAlarms:ye,setoffline:fe,setOk:ge,setwarnings:de,showwarnings:Ie,showoffline:Ce,showok:Oe,showAlarms:He})})]}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y,{})})]})]}):null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{id:"".concat(ie?"heading-dark":""),children:"Conditions summary"}),(0,l.jsx)("h6",{id:"".concat(ie?"heading-dark":""),children:"Keep track of your Sensor status"})]}),(0,l.jsx)("div",{style:{marginTop:"30px",marginBottom:"30px",color:"black"},children:(0,l.jsx)("h4",{id:"".concat(ie?"heading-dark":""),children:"Overview"})}),(0,l.jsxs)(c.rb,{className:"status_card_container",children:[(0,l.jsxs)(c.b7,{md:6,lg:3,className:"status_card",id:"status_card_red",children:[(0,l.jsx)(S.Z,{icon:u.D,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#FF0505"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#FF0505"},children:le}),(0,l.jsx)("p",{children:"Warning"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_yellow",children:[(0,l.jsx)(S.Z,{icon:m.R,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#DA582C"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#DA582C"},children:Se}),(0,l.jsx)("p",{children:"Alram"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_green",children:[(0,l.jsx)(S.Z,{icon:p.F,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#32712F"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#32712F"},children:xe}),(0,l.jsx)("p",{children:"Ok"})]})]}),(0,l.jsxs)(c.b7,{sm:6,md:6,lg:3,className:"status_card",id:"status_card_blue",children:[(0,l.jsx)(S.Z,{icon:f.s,alt:"Name",size:"xl",style:{marginLeft:"10px"}}),(0,l.jsxs)(c.uS,{style:{color:"#349FC4"},children:[(0,l.jsx)("h1",{style:{fontSize:"60px",color:"#349FC4"},children:pe}),(0,l.jsx)("p",{children:"Offine"})]})]}),(0,l.jsx)(c.rb,{children:(0,l.jsx)(U,{setAlarms:ye,setoffline:fe,setOk:ge,setwarnings:de,showwarnings:Ie,showoffline:Ce,showok:Oe,showAlarms:He})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y,{})})})]}),(0,l.jsx)("div",{style:{color:"black",marginTop:"20px"},children:(0,l.jsx)(c.rb,{className:"my-3",style:{display:"flex",alignItems:"center",justifyContent:"space-around",flexDirection:"column",flexWrap:"wrap"},children:(0,l.jsxs)("div",{className:"projectFactsWrap",children:[k&&(!te||"Select Organization"===te)&&(0,l.jsx)(G,{name:"Organizations",icon:h.V,count:A}),Z&&(!ne||"Select Facility"===ne)&&(0,l.jsx)(G,{name:"Facilities",icon:v.g,count:F}),(0,l.jsx)(G,{name:"Devices ",icon:x.k,count:V}),I&&(!ae||"Select Department"===ae)&&(0,l.jsx)(G,{name:"Departments ",icon:g.e,count:z}),(0,l.jsx)(G,{name:"Assigned Sensors ",icon:j.o,count:$}),k&&(!te||"Select Organization"===te)&&(0,l.jsx)(G,{name:"UnAssigned Sensors ",icon:b.c,count:B})]})})})]})}},84254:function(e,t,n){var a=n(4942),r=n(1413),i=n(29439),o=n(72791),s=(n(39593),n(52036),n(78983)),c=n(24846),l=n(1278),d=n(66757),u=n(18043),m=(n(25741),n(56019)),p=n(96062),f=n(57689),h=n(99579),v=n(91933),x=n(80184);t.Z=function(e){var t,n,g=e.closeModal,j=e.saveHandler,b=e.data,S=(0,u.U)().dispatch,y=((0,p.V6)().data,(0,f.s0)(),(0,o.useState)([])),k=(0,i.Z)(y,2),Z=k[0],I=k[1],N=JSON.parse(localStorage.getItem("permissions")),w=(0,d.Z_)(N,d.BA,d.H2),A=((0,d.Z_)(N,d.vw,d.H2),(0,d.Z_)(N,d.JK,d.H2),(0,d.Z_)(N,d.iH,d.H2),(0,o.useState)(!1)),C=(0,i.Z)(A,2),E=(C[0],C[1],(0,o.useState)(!1)),D=(0,i.Z)(E,2),F=D[0],O=D[1],M=localStorage.getItem("OrganizationId"),_=localStorage.getItem("organizationid"),z=(0,o.useState)(),H=(0,i.Z)(z,2),L=H[0],R=H[1],T=(0,o.useState)({aws_sensorid:"",sensorname:"",deviceid:L,customerid:Number(M)}),V=(0,i.Z)(T,2),q=V[0],U=V[1];(0,o.useEffect)((function(){b&&U({customerid:b.customerid,aws_sensorid:b.aws_sensorid,sensorname:b.sensorname,deviceid:b.deviceid})}),[b]);var P=(0,v.useMutation)(m.bM),X=P.mutate,B=P.data,W=(0,v.useMutation)(p.Xo).mutate;var Y=(0,v.useMutation)(p.oy).mutate;var G=(0,v.useMutation)(p.a8).mutate;var J=(0,v.useMutation)(p.hd).mutate;(0,o.useEffect)((function(){w?X(M,{onSuccess:function(e){},onError:function(e){}}):w||X(_,{onSuccess:function(e){},onError:function(e){}})}),[]),(0,o.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),n=localStorage.getItem("departmentId");n&&"Select Department"!==n?Y(n,{onSuccess:function(e){I(e)},onError:function(e){}}):t&&"Select Facility"!==t?function(e){J(e,{onSuccess:function(e){I(e)},onError:function(e){}})}(t):e&&"Select Organization"!==e?function(e){G(e,{onSuccess:function(e){I(e)},onError:function(e){}})}(e):W("",{onSuccess:function(e){I(e)},onError:function(e){}})}),[localStorage.getItem("OrganizationId"),localStorage.getItem("facilityId"),localStorage.getItem("departmentId")]);var Q=function(e){var t=e.target,n=t.name,i=t.value,o=t.type,s=t.checked;U((0,r.Z)((0,r.Z)({},q),{},(0,a.Z)({},n,"checkbox"===o?s:i)))},K=(0,h.X)(),$=K.darkMode;K.setDarkMode;return(0,x.jsxs)(s.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:F,onSubmit:function(e){var t=e.currentTarget;q.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),O(!0),!0===t.checkValidity()&&(S({type:"SHOW_LOADER"}),j(q),e.preventDefault(),g())},children:[(0,x.jsxs)(s.b7,{md:12,children:[(0,x.jsx)(s.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationSensorId",children:"Sensor Id*"}),(0,x.jsxs)(s.LX,{"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid sensor id",name:"aws_sensorid",className:" form-select ".concat($?"select-dark":""),value:q.aws_sensorid,id:"validationSensorId",onChange:Q,disabled:!!b,children:[(0,x.jsx)("option",{children:"Select Sensors"}),null===B||void 0===B||null===(t=B.data)||void 0===t?void 0:t.map((function(e,t){return(0,x.jsx)("option",{value:e.aws_sensorid,children:e.aws_sensorid},t)}))]})]}),(0,x.jsxs)(s.b7,{md:12,children:[(0,x.jsx)(s.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationSensorname",children:"Sensor Name*"}),(0,x.jsxs)(s.YR,{children:[(0,x.jsx)(s.wV,{children:(0,x.jsx)(c.Z,{icon:l.e,alt:"typeSensorid"})}),(0,x.jsx)(s.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"sensorname",value:q.sensorname,onChange:Q,feedbackInvalid:" Sensor Name is required",id:"validationSensorname",required:!0})]})]}),(0,x.jsxs)(s.b7,{md:12,children:[(0,x.jsx)(s.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationDeviceSelection",children:"Equipment Selection*"}),(0,x.jsxs)(s.LX,{className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",name:"deviceSelection",value:L,feedbackInvalid:"Please select a valid Device Selection",id:"validationDeviceSelection",onChange:function(e){var t=parseInt(e.target.value,10)||0;R(t),U((0,r.Z)((0,r.Z)({},q),{},{deviceid:t}))},required:!0,children:[(0,x.jsx)("option",{children:"Select Equipment"}),null===Z||void 0===Z||null===(n=Z.data)||void 0===n?void 0:n.map((function(e){return(0,x.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})]}),(0,x.jsx)(s.b7,{xs:12,children:(0,x.jsx)(s.u5,{color:"primary",type:"submit",children:b?"Edit Device Sensor":"Add Device Sensor"})})]})}},39593:function(e,t,n){var a=n(4942),r=n(1413),i=n(44925),o=n(29439),s=n(72791),c=n(18043),l=n(99579),d=n(91933),u=n(78983),m=n(56019),p=n(57689),f=n(80184),h=["date_created","date_updated","is_deleted","updated_by","deviceId"];t.Z=function(e){var t=e.data,n=e.sensorData,v=(0,d.useMutation)(m.OH).mutate,x=(0,d.useMutation)(m._t).mutate,g=(0,s.useState)([]),j=(0,o.Z)(g,2),b=(j[0],j[1],(0,s.useState)(!1)),S=(0,o.Z)(b,2),y=S[0],k=(S[1],(0,s.useState)(!1)),Z=(0,o.Z)(k,2),I=Z[0],N=Z[1],w=(0,s.useState)(!1),A=(0,o.Z)(w,2),C=A[0],E=A[1],D=(0,s.useState)(!1),F=(0,o.Z)(D,2),O=F[0],M=F[1],_=(0,s.useState)(!1),z=(0,o.Z)(_,2),H=z[0],L=z[1],R=(0,c.U)().dispatch,T=(0,l.X)().setShowToast,V=function(){return R({type:"HIDE_LOADER"})},q=localStorage.getItem("sensorId"),U=localStorage.getItem("deviceid"),P=(0,s.useState)({property:"temp",name:"",minvalue:0,maxvalue:0,unit:"",description:"description",deviceId:Number(U),sensorId:Number(q),hidden:!1,is_active:!0}),X=(0,o.Z)(P,2),B=X[0],W=X[1],Y=(0,s.useState)({property:"temp2",name:"",maxvalue:0,minvalue:0,unit:"",description:"",deviceId:Number(U),sensorId:Number(q),hidden:!1,is_active:!0}),G=(0,o.Z)(Y,2),J=G[0],Q=G[1],K=(0,s.useState)({property:"co2",name:"",minvalue:0,maxvalue:0,unit:"",description:"",deviceId:Number(U),sensorId:Number(q),hidden:!1,is_active:!0}),$=(0,o.Z)(K,2),ee=$[0],te=$[1],ne=(0,s.useState)({property:"humidity",name:"",minvalue:0,maxvalue:0,unit:"",description:"",deviceId:Number(U),sensorId:Number(q),hidden:!1,is_active:!0}),ae=(0,o.Z)(ne,2),re=ae[0],ie=ae[1];(0,s.useEffect)((function(){if(t){var e={temp:"tempOne",temp2:"tempTwo",co2:"co2",humidity:"humidity"},n={name:"",minvalue:"",maxvalue:"",unit:"",description:"",deviceId:"",is_hidden:!1,is_active:!0};Object.keys(e).map((function(e){var a=t.find((function(t){return t.property===e}));if(a){a.date_created,a.date_updated,a.is_deleted,a.updated_by,a.deviceId;var o=(0,i.Z)(a,h);return(0,r.Z)((0,r.Z)({property:e},n),o)}return(0,r.Z)({property:e},n)})).forEach((function(t){var n=e[t.property];if(n)switch(n){case"tempOne":W(t);break;case"tempTwo":Q(t);break;case"co2":te(t);break;case"humidity":ie(t)}}))}}),[t]),(0,s.useEffect)((function(){t&&t.forEach((function(e){switch(e.property){case"temp":N(e.is_active);break;case"temp2":E(e.is_active);break;case"co2":M(e.is_active);break;case"humidity":L(e.is_active)}}))}),[t]);var oe=(0,s.useState)([]),se=(0,o.Z)(oe,2),ce=(se[0],se[1]),le=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var s="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(s)&&"minvalue"===n&&"maxvalue"===n||W((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,s))}))}else W((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},de=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var s="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(s)&&"minvalue"===n&&"maxvalue"===n||Q((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,s))}))}else Q((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},ue=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var s="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(s)&&"minvalue"===n&&"maxvalue"===n||te((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,s))}))}else te((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))},me=function(e){var t=e.target,n=t.name,i=t.value,o=t.type;t.checked;if(""!==i){var s="minvalue"!==n&&"maxvalue"!==n||"checkbox"===o?i:/^-?\d*\.?\d+$/.test(i)?+i:i;isNaN(s)&&"minvalue"===n&&"maxvalue"===n||ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,s))}))}else ie((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},n,i))}))};function pe(e){R({type:"SHOW_LOADER"}),setTimeout((function(){if(t){var a=n.sensorid;x({handler:e,id:a},{onSuccess:function(){V(),T((function(){return{show:!0,title:"Success",content:"Device Sensor Configuration Edited Successfully"}}))},onError:function(e){V(),T((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})}else v(e,{onSuccess:function(){V(),T((function(){return{show:!0,title:"Success",content:"Device Sensor Configured Successfully"}}))},onError:function(e){V(),T((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})}),0)}var fe=(0,p.s0)(),he=function(){fe("/devices-sensors")},ve=(0,l.X)(),xe=ve.darkMode;ve.setDarkMode;return(0,f.jsx)(u.xH,{className:"table_container_light p-5 ".concat(xe?"table_container_dark":""),children:(0,f.jsxs)(u.lx,{className:"row g-3 needs-validation",noValidate:!0,validated:y,onSubmit:function(e){e.preventDefault();var t=[],n=function(e){return(0,r.Z)((0,r.Z)({},e),{},{is_active:!0})};I&&t.push(n(B)),C&&t.push(n(J)),O&&t.push(n(ee)),H&&t.push(n(re)),ce(t),pe(t),he()},children:[(0,f.jsx)(u.EC,{id:"tempOneCheckbox",label:"Temperature 1",className:"input-light   ".concat(xe?"input-dark":""),onChange:function(e){return t=e.target.checked,void N(t);var t},checked:I}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,f.jsx)(u.jO,{className:"input-light   ".concat(xe?"input-dark":""),type:"name",placeholder:"Enter Sensor Name",name:"name",value:B.name,onChange:le,feedbackInvalid:"Name is required",id:"temponeName",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:B.minvalue,onChange:le,feedbackInvalid:"Minimum value is required",id:"tempMin",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,f.jsx)(u.jO,{className:"input-light   ".concat(xe?"input-dark":""),type:"text",placeholder:"Enter Maximum Value",name:"maxvalue",value:B.maxvalue,onChange:le,feedbackInvalid:"Maximum Value is required",id:"tempMax",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,f.jsxs)(u.LX,{className:" form-select ".concat(xe?"select-dark":""),"aria-label":"Default select example",id:"tempunit",name:"unit",value:B.unit,onChange:le,feedbackInvalid:"unit is required",required:!0,children:[(0,f.jsx)("option",{children:"Open this select menu"}),(0,f.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,f.jsx)("option",{value:"C",children:"C*"}),(0,f.jsx)("option",{value:"F",children:"F-"})]})]}),(0,f.jsx)(u.b7,{xs:"auto",children:(0,f.jsx)(u.L8,{className:"input-light   ".concat(xe?"input-dark":""),id:"".concat(xe?"heading-dark":""),htmlFor:"validationTypeSensorId",label:"Hide on dashboard"})}),(0,f.jsxs)(u.lx,{children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,f.jsx)(u.PB,{className:"input-light   ".concat(xe?"input-dark":""),id:"temponedescribe",rows:3,name:"description",value:B.description,onChange:le,placeholder:"Describe Your Way"})]}),(0,f.jsx)(u.EC,{id:"tempTwoCheckbox",className:"input-light   ".concat(xe?"input-dark":""),label:"Temperature 2",onChange:function(e){return t=e.target.checked,void E(t);var t},checked:C}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Sensor Name",name:"name",value:J.name,onChange:de,feedbackInvalid:"Name is required",id:"temptwoName",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:J.minvalue,onChange:de,feedbackInvalid:"Minimum value is required",id:"validationMin",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,f.jsx)(u.jO,{className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:J.maxvalue,onChange:de,feedbackInvalid:"Maximum Value is required",id:"validationMax",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,f.jsxs)(u.LX,{"aria-label":"Default select example",id:"temptwounit",name:"unit",className:" form-select ".concat(xe?"select-dark":""),value:J.unit,onChange:de,feedbackInvalid:"unit is required",required:!0,children:[(0,f.jsx)("option",{children:"Open this select menu"}),(0,f.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,f.jsx)("option",{value:"C",children:"C*"}),(0,f.jsx)("option",{value:"F",children:"F-"})]})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,f.jsx)(u.EC,{className:"input-light   ".concat(xe?"input-dark":""),reverse:!0,id:"temptwoCheckbox1",name:"hidden",checked:J.hidden,onChange:de,label:"Hide on dashboard"})]}),(0,f.jsxs)(u.lx,{children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,f.jsx)(u.PB,{id:"temptwodescribe",className:"input-light   ".concat(xe?"input-dark":""),rows:3,name:"description",value:J.description,onChange:de,placeholder:"Describe Your Way"})]}),(0,f.jsx)(u.EC,{id:"co2Checkbox",className:"input-light   ".concat(xe?"input-dark":""),label:(0,f.jsxs)("span",{children:["CO",(0,f.jsx)("sub",{children:"2"})]}),onChange:function(e){return t=e.target.checked,void M(t);var t},checked:O}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Sensor Name",name:"name",value:ee.name,onChange:ue,feedbackInvalid:"Name is required",id:"co2Name",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:ee.minvalue,onChange:ue,feedbackInvalid:"Minimum value is required",id:"validationMin",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:ee.maxvalue,onChange:ue,feedbackInvalid:"Maximum Value is required",id:"validationMax",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,f.jsxs)(u.LX,{"aria-label":"Default select example",className:" form-select ".concat(xe?"select-dark":""),id:"co2unit",name:"unit",value:ee.unit,onChange:ue,feedbackInvalid:"unit is required",required:!0,children:[(0,f.jsx)("option",{children:"Open this select menu"}),(0,f.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,f.jsx)("option",{value:"C",children:"C*"}),(0,f.jsx)("option",{value:"F",children:"F-"})]})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,f.jsx)(u.EC,{reverse:!0,className:"input-light   ".concat(xe?"input-dark":""),id:"co2Checkbox1",name:"hidden",checked:ee.hidden,onChange:ue,label:"Hide on dashboard"})]}),(0,f.jsxs)(u.lx,{children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,f.jsx)(u.PB,{className:"input-light   ".concat(xe?"input-dark":""),id:"co2describe",rows:3,name:"description",value:ee.description,onChange:ue,placeholder:"Describe Your Way"})]}),(0,f.jsx)(u.EC,{id:"humidityCheckbox",className:"input-light   ".concat(xe?"input-dark":""),label:"Humidity",onChange:function(e){return t=e.target.checked,void L(t);var t},checked:H}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Name*"}),(0,f.jsx)(u.jO,{className:"input-light   ".concat(xe?"input-dark":""),type:"text",placeholder:"Enter Sensor Name",name:"name",value:re.name,onChange:me,feedbackInvalid:"Name is required",id:"humidityName",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMin",children:"Min*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Minimum Value",name:"minvalue",value:re.minvalue,onChange:me,feedbackInvalid:"Minimum value is required",id:"humidityMin",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationMax",children:"Max*"}),(0,f.jsx)(u.jO,{type:"text",className:"input-light   ".concat(xe?"input-dark":""),placeholder:"Enter Maximum Value",name:"maxvalue",value:re.maxvalue,onChange:me,feedbackInvalid:"Maximum Value is required",id:"humidityMax",required:!0})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationunit",children:"unit*"}),(0,f.jsxs)(u.LX,{"aria-label":"Default select example",id:"humidityunit",name:"unit",className:" form-select ".concat(xe?"select-dark":""),value:re.unit,onChange:me,feedbackInvalid:"unit is required",required:!0,children:[(0,f.jsx)("option",{children:"Open this select menu"}),(0,f.jsx)("option",{value:"--Name--",children:"--Name--"}),(0,f.jsx)("option",{value:"C",children:"C*"}),(0,f.jsx)("option",{value:"F",children:"F-"})]})]}),(0,f.jsxs)(u.b7,{xs:"auto",children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationTypeSensorId"}),(0,f.jsx)(u.EC,{reverse:!0,className:"input-light   ".concat(xe?"input-dark":""),id:"humidityCheckbox1",name:"hidden",checked:re.hidden,onChange:me,label:"Hide on dashboard"})]}),(0,f.jsxs)(u.lx,{children:[(0,f.jsx)(u.L8,{id:"".concat(xe?"heading-dark":""),htmlFor:"validationName",children:"Description"}),(0,f.jsx)(u.PB,{className:"input-light   ".concat(xe?"input-dark":""),id:"humiditydescribe",rows:3,name:"description",value:re.description,onChange:me,placeholder:"Describe Your Way"})]}),t?null:(0,f.jsx)(u.b7,{xs:"auto",children:(0,f.jsx)(u.u5,{variant:"outline",onClick:he,children:"Back"})}),(0,f.jsx)(u.b7,{xs:"auto",children:(0,f.jsx)(u.u5,{color:"primary",type:"submit",children:"Configure"})})]})})}},96624:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),s=n(57689),c=n(93001),l=n(52036),d=n(99579),u=n(18043),m=(n(17834),n(46522)),p=n(66757),f=n(74165),h=n(15861),v=n(52178),x=n(80491),g=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/find-admins?name=DepartmentAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.post("user/create/departmentAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.patch("user/staff/updateDepartmentStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.delete("user/staff/deleteDepartmentStaff?userid=".concat(t.userid,"&departmentid=").concat(t.departmentid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/find-user-staff?name=DepartmentUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/user-staff-by-facId/".concat(t,"?name=DepartmentUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/user-staff-by-depId/".concat(t,"?name=DepartmentUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/admins-by-facId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/admins-by-orgId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.A)(localStorage.getItem("token")),e.next=3,x.b.get("user/admins-by-depId/".concat(t,"?name=DepartmentAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=n(4942),C=n(1413),E=n(24846),D=n(51843),F=n(99412),O=n(31397),M=n(80184),_=function(e){var t=e.closeModal,n=e.saveHandler,c=e.data,l=(0,u.U)().dispatch,p=((0,s.s0)(),(0,i.useState)(!1)),f=(0,a.Z)(p,2),h=f[0],v=f[1],x=(0,o.useMutation)(m.pF).mutate,g=(0,i.useState)(),j=(0,a.Z)(g,2),b=j[0],S=j[1],y=(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",departmentid:"",is_admin:!1}),k=(0,a.Z)(y,2),Z=k[0],I=k[1];(0,i.useEffect)((function(){c&&I((function(){return{firstname:c.users.firstname,lastname:c.users.lastname,email:c.users.email,address:c.users.address,phonenumber:c.users.phonenumber,departmentid:c.departmentid,is_admin:!0,userid:c.userid}}))}),[c]);var N=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o="departmentid"===n?parseInt(a,10):a;I((0,C.Z)((0,C.Z)({},Z),{},(0,A.Z)({},n,"checkbox"===r?i:o)))};(0,i.useEffect)((function(){x("",{onSuccess:function(e){S(e.data)},onError:function(e){}})}),[]);var w=(0,d.X)(),_=w.darkMode;w.setDarkMode;return(0,M.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:h,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),v(!0),!0===a.checkValidity()&&(l({type:"SHOW_LOADER"}),n(Z),console.log(Z),t())},children:[(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Department Selection*"}),(0,M.jsxs)(r.LX,{name:"departmentid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationDepartment",value:Z.departmentid,onChange:N,className:" form-select ".concat(_?"select-dark":""),required:!0,disabled:!!c,children:[(0,M.jsx)("option",{children:"Select Department"}),null===b||void 0===b?void 0:b.map((function(e){return(0,M.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})]}),(0,M.jsxs)(r.b7,{md:6,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationFirstname",children:"First Name"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{}),(0,M.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"firstname",value:Z.firstname,onChange:N,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:6,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationLastname",children:"Last Name"}),(0,M.jsxs)(r.YR,{className:"has-validation",children:[(0,M.jsx)(r.wV,{}),(0,M.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"lastname",value:Z.lastname,onChange:N,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,M.jsxs)(r.YR,{className:"has-validation",children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:D.p,alt:"Email"})}),(0,M.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"email",value:Z.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;I((0,C.Z)((0,C.Z)({},Z),{},(0,A.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);v(s)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:F.i,alt:"Address"})}),(0,M.jsx)(r.jO,{className:"input-light pt-0 ".concat(_?"input-dark":""),type:"text",name:"address",value:Z.address,onChange:N,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,M.jsxs)(r.YR,{children:[(0,M.jsx)(r.wV,{children:(0,M.jsx)(E.Z,{icon:O.d,alt:"ContactNumber"})}),(0,M.jsx)(r.jO,{className:"input-light pt-0 ".concat(_?"input-dark":""),type:"text",name:"phonenumber",value:Z.phonenumber,onChange:N,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,M.jsxs)(r.b7,{md:12,children:[(0,M.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationFacilityName",children:"Is Admin"}),(0,M.jsx)(r.EC,{id:"flexCheckDefault",label:" ",checked:Z.is_admin,onChange:function(e){I((0,C.Z)((0,C.Z)({},Z),{},{is_admin:e.target.checked}))}})]}),(0,M.jsx)(r.b7,{xs:12,children:(0,M.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(_?"button-dark":""),type:"submit",children:c?"Edit Department Staff ":"Add Department Staff "})})]})},z=n(77868),H=[{key:"users.firstname",label:"Name"},{key:"departments.departmentname",label:"Department"},{key:"users.email",label:"Contact Email"},{key:"users.address",label:"Address"},{key:"users.phonenumber",label:"PhoneNumber"}],L=function(){var e=(0,u.U)().dispatch,t=(0,o.useMutation)(j).mutate,n=(0,o.useMutation)(b).mutate,f=function(){return e({type:"SHOW_LOADER"})},h=function(){return e({type:"HIDE_LOADER"})},v=(0,d.X)(),x=v.setShowToast,A=(v.departmentsData,v.setDepartmentsData,(0,o.useMutation)(m.pF).mutate,(0,i.useState)([])),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,o.useMutation)(g).mutate,O=(0,o.useMutation)(y).mutate,L=(0,i.useState)(!1),R=(0,a.Z)(L,2),T=R[0],V=R[1],q=(0,o.useMutation)(S),U=(0,i.useState)(),P=(0,a.Z)(U,2),X=P[0],B=P[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,i.useState)(!0),K=(0,a.Z)(Q,2),$=K[0],ee=(K[1],(0,i.useState)("Select Role")),te=(0,a.Z)(ee,2),ne=(te[0],te[1]),ae=(0,s.s0)(),re=JSON.parse(localStorage.getItem("permissions")),ie=(0,p.Z_)(re,p.BA,p.H2),oe=(0,p.Z_)(re,p.vw,p.H2),se=(0,p.Z_)(re,p.JK,p.H2),ce=((0,p.Z_)(re,p.iH,p.H2),function(){V(!1)});function le(){F("",{onSuccess:function(e){D(e.data),h()},onError:function(e){}})}var de=(0,o.useMutation)(I).mutate;function ue(e){de(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var me=(0,o.useMutation)(N).mutate;function pe(e){me(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var fe=(0,o.useMutation)(w).mutate;function he(e){fe(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}var ve=(0,o.useMutation)(k).mutate;var xe=(0,o.useMutation)(k).mutate;var ge=(0,o.useMutation)(Z).mutate;function je(e){f(),setTimeout((function(){G?t(e,{onSuccess:function(){h(),x((function(){return{show:!0,title:"Success",content:"Department Staff Created Successfully"}})),le()},onError:function(e){h(),x((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):n({handler:e,editData:X},{onSuccess:function(){h(),x((function(){return{show:!0,title:"Success",content:"Department Staff Edited Successfully"}})),le()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),ae("/login")),h(),x((function(){return{show:!0,title:"Error",content:e.response.data,color:"#FF0000"}}))}})}),0)}var be=localStorage.getItem("OrganizationId"),Se=localStorage.getItem("facilityId"),ye=localStorage.getItem("departmentId");(0,i.useEffect)((function(){ie?void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&"Select Facility"!==Se&&!ye?ue(Se):be&&"Select Facility"===Se&&!ye?pe(be):be&&Se&&"Select Department"===ye?ue(Se):be&&Se&&"Select Department"!==ye&&he(ye):pe(be):le():oe?Se&&"Select Facility"!==Se?ye&&"Select Department"!==ye?"Select Department"!==ye&&he(ye):ue(Se):le():se&&(ye&&"Select Department"!==ye?"Select Department"!==ye&&he(ye):le())}),[be,Se,ye]);var ke=(0,d.X)(),Ze=ke.darkMode;ke.setDarkMode;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(l.$,{title:G?"Add Department Satff":"Edit Department Staff",content:G?(0,M.jsx)(_,{closeModal:ce,saveHandler:je}):(0,M.jsx)(_,{closeModal:ce,saveHandler:je,data:X}),isOpen:T,onClose:ce}),(0,M.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Ze?"table_container_dark":""),children:[(0,M.jsxs)(r.rb,{children:[(0,M.jsx)(r.b7,{children:(0,M.jsx)("h3",{id:"".concat(Ze?"heading-dark":""),className:"pb-2",children:"Departments Staff"})}),(0,M.jsx)(r.b7,{md:3,className:"float-end",children:(0,M.jsxs)("select",{size:"sm",className:" form-select ".concat(Ze?"select-dark":""),"aria-label":"Department",defaultValue:"Admins",onChange:function(e){var t=e.target.value;ne(t),"Admins"===t?void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&Se&&!ye?ue(Se):be&&Se&&ye&&he(ye):pe(be):le():"Users"===t&&(void 0!==be&&null!==be&&"Select Organization"!==be||void 0!==Se&&null!==Se&&"Select Facility"!==Se||void 0!==ye&&null!==ye&&"Select Department"!==ye?!be||Se||ye?be&&Se&&!ye?function(e){ve(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}(Se):be&&Se&&ye&&function(e){ge(e,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}})}(ye):xe(be,{onSuccess:function(e){h(),D(e.data)},onError:function(e){h()}}):O("",{onSuccess:function(e){D(e.data),h()},onError:function(e){}}))},children:[(0,M.jsx)("option",{children:"Select Role"}),(0,M.jsx)("option",{children:"Admins"}),(0,M.jsx)("option",{children:"Users"})]})}),(0,M.jsx)(r.b7,{children:(0,M.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),B(null),V(!0)},children:"Add Department Staff"})})]}),E?(0,M.jsx)(z.Z,{columns:H,data:E,openEditModal:function(e){J(!1),B(e),V(!0)},OnDeleteItem:function(e){f(),q.mutate(e,{onSuccess:function(){x((function(){return{show:!0,title:"Success",content:"Department Staff deleted Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?le():ue(localStorage.getItem("facilityId")),h()},onError:function(e){x((function(){return{show:!0,title:"Error",content:e.response.data.error}})),h()}}),h()},deldepstaffId:$}):(0,M.jsx)(c.Z,{})]})]})}},7297:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),s=n(93001),c=n(52036),l=n(18043),d=n(57689),u=n(96062),m=n(4942),p=n(1413),f=n(24846),h=n(51843),v=n(99412),x=n(31397),g=n(99579),j=n(80184),b=function(e){var t,n=e.closeModal,o=e.saveHandler,s=e.data,c=(0,l.U)().dispatch,b=((0,d.s0)(),(0,u.V6)().data),S=(0,i.useState)(!1),y=(0,a.Z)(S,2),k=y[0],Z=y[1],I=(0,i.useState)(),N=(0,a.Z)(I,2),w=(N[0],N[1],(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",deviceid:0,is_admin:!0})),A=(0,a.Z)(w,2),C=A[0],E=A[1];(0,i.useEffect)((function(){s&&E((function(){return{firstname:s.users.firstname,lastname:s.users.lastname,email:s.users.email,address:s.users.address,phonenumber:s.users.phonenumber,deviceid:s.users.deviceid,is_admin:!0,userid:s.userid}}))}),[s]);var D=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;"deviceid"===n&&(o=parseInt(a,10)||0),E((0,p.Z)((0,p.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:o)))},F=(0,g.X)(),O=F.darkMode;F.setDarkMode;return(0,j.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:k,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),Z(!0),!0===t.checkValidity()&&(c({type:"SHOW_LOADER"}),o(C),console.log(C),n())},children:[(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationDeviceSelection",children:"Equipment Selection*"}),(0,j.jsxs)(r.LX,{className:" form-select ".concat(O?"select-dark":""),"aria-describedby":"validationCustom04Feedback",name:"deviceid",value:C.deviceid,feedbackInvalid:"Please select a valid Device Selection",id:"validationDeviceSelection",onChange:D,required:!0,children:[(0,j.jsx)("option",{children:"Select Equipment"}),null===b||void 0===b||null===(t=b.data)||void 0===t?void 0:t.map((function(e){return(0,j.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})]}),(0,j.jsxs)(r.b7,{md:6,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationFirstname",children:"First Name"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{}),(0,j.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"firstname",value:C.firstname,onChange:D,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:6,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationLastname",children:"Last Name"}),(0,j.jsxs)(r.YR,{className:"has-validation",children:[(0,j.jsx)(r.wV,{}),(0,j.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"lastname",value:C.lastname,onChange:D,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,j.jsxs)(r.YR,{className:"has-validation",children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(f.Z,{icon:h.p,alt:"Email"})}),(0,j.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"email",value:C.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;E((0,p.Z)((0,p.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);Z(s)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(f.Z,{icon:v.i,alt:"Address"})}),(0,j.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"address",value:C.address,onChange:D,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,j.jsxs)(r.b7,{md:12,children:[(0,j.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,j.jsxs)(r.YR,{children:[(0,j.jsx)(r.wV,{children:(0,j.jsx)(f.Z,{icon:x.d,alt:"phonenumber"})}),(0,j.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"phonenumber",value:C.phonenumber,onChange:D,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,j.jsx)(r.b7,{xs:12,children:(0,j.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(O?"button-dark":""),type:"submit",children:s?"Edit Device Staff ":"Add Device Staff "})})]})},S=n(74165),y=n(15861),k=n(52178),Z=n(80491),I=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(){var t,n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/find-admins?name=DeviceAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.post("user/create/deviceAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.patch("user/staff/updateDeviceStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.delete("user/staff/deleteDeviceStaff?userid=".concat(t.userid,"&deviceid=").concat(t.deviceid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(){var t,n;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/find-user-staff?name=DeviceUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/user-staff-by-depId/".concat(t,"?name=DeviceUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-depId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-orgId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("user/admins-by-facId/".concat(t,"?name=DeviceAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(66757),_=n(77868),z=[{key:"users.firstname",label:"Name"},{key:"users.email",label:"Email"},{key:"users.phonenumber",label:"Contact Number"},{key:"users.address",label:"Address"},{key:"devices.devicename",label:"Device"}],H=function(){var e=(0,l.U)().dispatch,t=localStorage.getItem("OrganizationId"),n=localStorage.getItem("facilityId"),m=localStorage.getItem("departmentId"),p=function(){return e({type:"SHOW_LOADER"})},f=function(){return e({type:"HIDE_LOADER"})},h=(0,g.X)(),v=h.setShowToast,x=h.devicesData,S=(h.setDevicesData,(0,i.useState)(!1)),y=(0,a.Z)(S,2),k=y[0],Z=y[1],H=(0,i.useState)(),L=(0,a.Z)(H,2),R=L[0],T=L[1],V=(0,i.useState)(!1),q=(0,a.Z)(V,2),U=q[0],P=q[1],X=(0,d.s0)(),B=(0,i.useState)([]),W=(0,a.Z)(B,2),Y=W[0],G=W[1],J=(0,o.useMutation)(I).mutate,Q=((0,o.useMutation)(C).mutate,(0,o.useMutation)(N).mutate),K=(0,o.useMutation)(w).mutate,$=(0,o.useMutation)(A),ee=(0,i.useState)(!0),te=(0,a.Z)(ee,2),ne=te[0],ae=(te[1],(0,i.useState)("Select Role")),re=(0,a.Z)(ae,2),ie=(re[0],re[1],JSON.parse(localStorage.getItem("permissions"))),oe=(0,M.Z_)(ie,M.BA,M.H2),se=(0,M.Z_)(ie,M.vw,M.H2),ce=(0,M.Z_)(ie,M.JK,M.H2),le=(0,M.Z_)(ie,M.iH,M.H2),de=function(){Z(!1)};(0,o.useMutation)(u.oy).mutate;function ue(){J("",{onSuccess:function(e){G(e.data),f()},onError:function(e){}})}var me=(0,o.useMutation)(D).mutate;function pe(e){me(e,{onSuccess:function(e){f(),G(e.data)},onError:function(e){f()}})}var fe=(0,o.useMutation)(F).mutate;function he(e){fe(e,{onSuccess:function(e){f(),G(e.data)},onError:function(e){f()}})}var ve=(0,o.useMutation)(O).mutate;function xe(e){ve(e,{onSuccess:function(e){f(),G(e.data)},onError:function(e){f()}})}(0,o.useMutation)(E).mutate;function ge(e){p(),setTimeout((function(){U?Q(e,{onSuccess:function(){f(),v((function(){return{show:!0,title:"Success",content:"Device Staff Created Successfully"}})),void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?xe(n):t&&n&&m&&pe(m):he(t):ue()},onError:function(e){f(),v((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):K({handler:e,editData:R},{onSuccess:function(){f(),v((function(){return{show:!0,title:"Success",content:"Device Staff Edited Successfully"}})),void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?xe(n):t&&n&&m&&pe(m):he(t):ue()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),X("/login")),f(),v((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){oe?void 0!==t&&null!==t&&"Select Organization"!==t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?!t||void 0!==n&&null!==n&&"Select Facility"!==n||void 0!==m&&null!==m&&"Select Department"!==m?t&&n&&(void 0===m||null===m||"Select Department"===m)?xe(n):t&&n&&m&&pe(m):he(t):ue():se?n&&"Select Facility"!==n||m&&"Select Department"!==m?m&&n&&"Select Department"!==m?pe(m):(m&&n&&"Select Department"==m||n)&&xe(n):ue():ce?m&&"Select Department"!==m?pe(m):ue():le&&ue()}),[oe,se,ce,le,t,n,m]);var je=(0,g.X)(),be=je.darkMode;je.setDarkMode;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.$,{title:U?"Add Equipment Staff":"Edit Equipment Staff",content:U?(0,j.jsx)(b,{closeModal:de,saveHandler:ge}):(0,j.jsx)(b,{closeModal:de,saveHandler:ge,data:R}),isOpen:k,onClose:de}),(0,j.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(be?"table_container_dark":""),children:[(0,j.jsxs)(r.rb,{children:[(0,j.jsx)(r.b7,{children:(0,j.jsx)("h3",{className:"pb-2",id:"".concat(be?"heading-dark":""),children:"Equipment Staff"})}),(0,j.jsx)(r.b7,{children:(0,j.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){P(!0),T(null),Z(!0)},children:"Add Equipment Staff"})})]}),x?(0,j.jsx)(_.Z,{columns:z,data:Y,OnDeleteItem:function(e){p(),$.mutate(e,{onSuccess:function(){v((function(){return{show:!0,title:"Success",content:"Device Staff deleted Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?ue():ue(localStorage.getItem("departmentId")),f()},onError:function(e){v((function(){return{show:!0,title:"Error",content:e.response.data.error}})),f()}}),f()},openEditModal:function(e){P(!1),T(e),Z(!0)},deldevstaffId:ne}):(0,j.jsx)(s.Z,{})]})]})}},41401:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),s=n(52036),c=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(74165),p=n(15861),f=n(52178),h=n(80491),v=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(){var t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/find-admins?name=FacilityAdmin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/admins-by-orgId/".concat(t,"?name=FacilityAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/admins-by-facId/".concat(t,"?name=FacilityAdmin"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.post("user/create/facilityAdmin",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.patch("user/staff/updateFacilityStaff",t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.delete("user/staff/deleteFacilityStaff?userid=".concat(t.userid,"&facilityid=").concat(t.facilityid));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(){var t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/find-user-staff?name=FacilityUser");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/user-staff-by-orgId/".concat(t,"?name=FacilityUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,p.Z)((0,m.Z)().mark((function e(t){var n,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.A)(localStorage.getItem("token")),e.next=3,h.b.get("user/user-staff-by-facId/".concat(t,"?name=FacilityUser"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=n(66757),N=n(4942),w=n(1413),A=n(24846),C=n(51843),E=n(99412),D=n(31397),F=n(45013),O=n(80184),M=function(e){var t=e.closeModal,n=e.saveHandler,o=e.data,s=(0,c.U)().dispatch,m=((0,u.s0)(),(0,i.useState)([])),p=(0,a.Z)(m,2),f=p[0],h=p[1],v=(0,l.useMutation)(F.WH).mutate,x=(0,i.useState)(!1),g=(0,a.Z)(x,2),j=g[0],b=g[1],S=(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",facilityid:"",is_admin:!1}),y=(0,a.Z)(S,2),k=y[0],Z=y[1];(0,i.useEffect)((function(){o&&Z((function(){return{firstname:o.users.firstname,lastname:o.users.lastname,email:o.users.email,address:o.users.address,phonenumber:o.users.phonenumber,facilityid:o.facilityid,is_admin:!0,userid:o.userid}}))}),[o]);var I=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;"facilityid"===n&&(o=parseInt(a,10)||0),Z((0,w.Z)((0,w.Z)({},k),{},(0,N.Z)({},n,"checkbox"===r?i:o)))};var M=(0,d.X)(),_=M.darkMode;M.setDarkMode;return(0,i.useEffect)((function(){v("",{onSuccess:function(e){h(e.data)},onError:function(e){}})}),[]),(0,O.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:j,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),b(!0),!0===a.checkValidity()&&(s({type:"SHOW_LOADER"}),n(k),console.log(k),t())},children:[(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility*"}),(0,O.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacility",className:" form-select ".concat(_?"select-dark":""),value:k.facilityid,onChange:I,required:!0,children:[(0,O.jsx)("option",{children:"Select Facility"}),null===f||void 0===f?void 0:f.map((function(e){return(0,O.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),(0,O.jsxs)(r.b7,{md:6,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationFirstName",children:"First Name"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{}),(0,O.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"firstname",value:k.firstname,onChange:I,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:6,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationLastName",children:"Last Name"}),(0,O.jsxs)(r.YR,{className:"has-validation",children:[(0,O.jsx)(r.wV,{}),(0,O.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"lastname",value:k.lastname,onChange:I,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,O.jsxs)(r.YR,{className:"has-validation",children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:C.p,alt:"Email"})}),(0,O.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(_?"input-dark":""),name:"email",value:k.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;Z((0,w.Z)((0,w.Z)({},k),{},(0,N.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);b(s)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0,disabled:!!o})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:E.i,alt:"Address"})}),(0,O.jsx)(r.jO,{className:"input-light pt-0 ".concat(_?"input-dark":""),type:"text",name:"address",value:k.address,onChange:I,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationCustomPhoneNumber",children:"Conatct Number"}),(0,O.jsxs)(r.YR,{children:[(0,O.jsx)(r.wV,{children:(0,O.jsx)(A.Z,{icon:D.d,alt:"ContactNumber"})}),(0,O.jsx)(r.jO,{className:"input-light pt-0 ".concat(_?"input-dark":""),type:"text",name:"phonenumber",value:k.phonenumber,onChange:I,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Contact Number is required",id:"validationCustom05",required:!0})]})]}),(0,O.jsxs)(r.b7,{md:12,children:[(0,O.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationFacilityName",children:"Is Admin"}),(0,O.jsx)(r.EC,{id:"flexCheckDefault",label:" ",checked:k.is_admin,onChange:function(e){Z((0,w.Z)((0,w.Z)({},k),{},{is_admin:e.target.checked}))}})]}),(0,O.jsx)(r.b7,{xs:12,children:(0,O.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(_?"button-dark":""),type:"submit",children:o?"Edit Facility Staff ":"Add Facility Staff "})})]})},_=n(77868),z=[{key:"users.firstname",label:"Name"},{key:"users.email",label:"Email"},{key:"users.phonenumber",label:"Contact Number"},{key:"users.address",label:"Address"},{key:"facilities.name",label:"Facility"}],H=function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),n=(0,c.U)().dispatch,m=function(){return n({type:"SHOW_LOADER"})},p=function(){return n({type:"HIDE_LOADER"})},f=(0,l.useMutation)(j).mutate,h=JSON.parse(localStorage.getItem("permissions")),N=(0,I.Z_)(h,I.BA,I.H2),w=(0,I.Z_)(h,I.vw,I.H2),A=((0,I.Z_)(h,I.JK,I.H2),(0,I.Z_)(h,I.iH,I.H2),(0,l.useMutation)(b).mutate),C=(0,i.useState)([]),E=(0,a.Z)(C,2),D=E[0],F=E[1],H=(0,l.useMutation)(v).mutate,L=(0,l.useMutation)(y).mutate,R=(0,i.useState)(!1),T=(0,a.Z)(R,2),V=T[0],q=T[1],U=(0,i.useState)(),P=(0,a.Z)(U,2),X=P[0],B=P[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,d.X)().setShowToast,K=(0,l.useMutation)(S),$=(0,i.useState)(!0),ee=(0,a.Z)($,2),te=ee[0],ne=(ee[1],(0,i.useState)("Select Role")),ae=(0,a.Z)(ne,2),re=(ae[0],ae[1]),ie=(0,d.X)(),oe=ie.darkMode,se=(ie.setDarkMode,(0,l.useMutation)(x).mutate),ce=(0,l.useMutation)(k).mutate,le=(0,l.useMutation)(g).mutate,de=(0,l.useMutation)(Z).mutate;function ue(e){se(e,{onSuccess:function(e){p(),F(e.data)},onError:function(e){p()}})}function me(e){le(e,{onSuccess:function(e){p(),F(e.data)},onError:function(e){p()}})}var pe=(0,u.s0)(),fe=function(){q(!1)};function he(){H("",{onSuccess:function(e){p(),F(e.data)},onError:function(e){}})}function ve(e){m(),setTimeout((function(){G?f(e,{onSuccess:function(){p(),Q((function(){return{show:!0,title:"Success",content:"Facility Staff Created Successfully"}})),he()},onError:function(e){p(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):A({handler:e,editData:X},{onSuccess:function(){p(),Q((function(){return{show:!0,title:"Success",content:"Facility Staff Edited Successfully"}})),he()},onError:function(e){p(),Q((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}return(0,i.useEffect)((function(){N?void 0!==e&&null!==e&&"Select Organization"!==e||void 0!==t&&null!==t&&"Select Facility"!==t?e&&t&&"Select Facility"!==t?me(t):(e&&t&&"Select Facility"===t||e)&&ue(e):he():w&&(t&&"Select Facility"!==t?me(t):he())}),[e,t]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.$,{title:G?"Add Facility Staff":"Edit Facility Staff",content:G?(0,O.jsx)(M,{closeModal:fe,saveHandler:ve}):(0,O.jsx)(M,{closeModal:fe,saveHandler:ve,data:X}),isOpen:V,onClose:fe}),(0,O.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(oe?"table_container_dark":""),children:[(0,O.jsxs)(r.rb,{children:[(0,O.jsx)(r.b7,{children:(0,O.jsx)("h3",{className:"pb-2",id:"".concat(oe?"heading-dark":""),children:"Facility Staff"})}),(0,O.jsx)(r.b7,{md:3,className:"float-end",children:(0,O.jsxs)("select",{size:"sm",className:" form-select ".concat(oe?"select-dark":""),"aria-label":"Department",defaultValue:"Admins",onChange:function(n){var a=n.target.value;if(re(a),"Admins"===a)void 0!==e&&null!==e&&"Select Organization"!==e||void 0!==t&&null!==t&&"Select Facility"!==t?e&&t?me(t):e&&ue(e):he();else if("Users"===a){var r=localStorage.getItem("OrganizationId"),i=localStorage.getItem("facilityId");void 0!==r&&null!==r&&"Select Organization"!==r||void 0!==i&&null!==i&&"Select Facility"!==i?r&&i?de(i,{onSuccess:function(e){p(),F(e.data)},onError:function(e){p()}}):r&&function(e){ce(e,{onSuccess:function(e){p(),F(e.data)},onError:function(e){p()}})}(r):(p(),L("",{onSuccess:function(e){F(e.data)},onError:function(e){}}))}},children:[(0,O.jsx)("option",{children:"Select Role"}),(0,O.jsx)("option",{children:"Admins"}),(0,O.jsx)("option",{children:"Users"})]})}),(0,O.jsx)(r.b7,{children:(0,O.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),B(null),q(!0)},children:"Add Facility Staff"})})]}),D?(0,O.jsx)(_.Z,{columns:z,OnDeleteItem:function(e){m(),K.mutate(e,{onSuccess:function(){Q((function(){return{show:!0,title:"Success",content:"Facility Staff deleted Successfully"}})),he(),p()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),pe("/login")),Q((function(){return{show:!0,title:"Error",content:e.response.data.error}})),p()}}),p()},data:D,openEditModal:function(e){J(!1),B(e),q(!0)},delfacstaffId:te}):(0,O.jsx)(o.Z,{})]})]})}},73853:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),s=n(52036),c=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(77868),p=n(18393),f=n(4942),h=n(1413),v=n(24846),x=n(51843),g=n(99412),j=n(31397),b=n(66757),S=n(10781),y=n(80184),k=function(e){var t,n=e.closeModal,o=e.saveHandler,s=e.data,l=JSON.parse(localStorage.getItem("permissions")),u=(0,b.Z_)(l,b.BA,b.H2),m=(0,c.U)().dispatch,p=(0,S.Z)((function(e){return e.data})),k=(0,i.useState)(!1),Z=(0,a.Z)(k,2),I=Z[0],N=Z[1],w=(0,i.useState)({firstname:"",lastname:"",email:"",address:"",phonenumber:"",customerid:"",isSuperAdmin:!1}),A=(0,a.Z)(w,2),C=A[0],E=A[1];(0,i.useEffect)((function(){s&&E((function(){return{customerid:s.customerid,firstname:s.firstname,lastname:s.lastname,email:s.email,address:s.address,phonenumber:s.phonenumber}}))}),[s]);var D=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;"customerid"===n&&(o=parseInt(a,10)||0),E((0,h.Z)((0,h.Z)({},C),{},(0,f.Z)({},n,"checkbox"===r?i:o)))},F=(0,d.X)(),O=F.darkMode;F.setDarkMode;return(0,i.useEffect)((function(){}),[O]),(0,y.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:I,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),N(!0),!0===t.checkValidity()&&(m({type:"SHOW_LOADER"}),o(C),console.log(C),n())},children:[u&&(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,y.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(O?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:C.customerid,onChange:D,required:!0,disabled:!!s,children:[(0,y.jsx)("option",{children:"Select Organization"}),null===(t=p[0])||void 0===t?void 0:t.map((function(e){return(0,y.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,y.jsxs)(r.b7,{md:6,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationFirstname",children:"First Name"}),(0,y.jsxs)(r.YR,{children:[(0,y.jsx)(r.wV,{}),(0,y.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"firstname",value:C.firstname,onChange:D,feedbackInvalid:"First Name is required",id:"validationCustom01",required:!0})]})]}),(0,y.jsxs)(r.b7,{md:6,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationLastname",children:"Last Name"}),(0,y.jsxs)(r.YR,{className:"has-validation",children:[(0,y.jsx)(r.wV,{}),(0,y.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"lastname",value:C.lastname,onChange:D,feedbackInvalid:"Last name is required",id:"validationCustom02",required:!0})]})]}),(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationEmail",children:"Email"}),(0,y.jsxs)(r.YR,{className:"has-validation",children:[(0,y.jsx)(r.wV,{children:(0,y.jsx)(v.Z,{icon:x.p,alt:"Email"})}),(0,y.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(O?"input-dark":""),name:"email",value:C.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;E((0,h.Z)((0,h.Z)({},C),{},(0,f.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);N(s)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Email is required",id:"validationEmail",required:!0})]})]}),(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,y.jsxs)(r.YR,{children:[(0,y.jsx)(r.wV,{children:(0,y.jsx)(v.Z,{icon:g.i,alt:"Address"})}),(0,y.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"address",value:C.address,onChange:D,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(O?"heading-dark":""),htmlFor:"validationCustomPhonenumber",children:"Phone Number"}),(0,y.jsxs)(r.YR,{children:[(0,y.jsx)(r.wV,{children:(0,y.jsx)(v.Z,{icon:j.d,alt:"Phonenumber"})}),(0,y.jsx)(r.jO,{className:"input-light pt-0 ".concat(O?"input-dark":""),type:"text",name:"phonenumber",value:C.phonenumber,onChange:D,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Phone Number is required",id:"validationCustom05",required:!0})]})]}),(0,y.jsx)(r.b7,{xs:12,children:(0,y.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(O?"button-dark":""),type:"submit",children:s?"Edit User ":"Add User "})})]})},Z=n(17834),I=n(46522),N=n(96062),w=n(45013),A=function(e){var t,n,o,s=e.closeModal,u=e.assignHandler,m=e.data,p=e.selectedRole,v=e.UnAssignHandler,x=JSON.parse(localStorage.getItem("permissions")),g=(0,i.useState)(!1),j=(0,a.Z)(g,2),S=j[0],k=j[1],A=(0,i.useState)(),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,i.useState)(),O=(0,a.Z)(F,2),M=O[0],_=O[1],z=(0,i.useState)(),H=(0,a.Z)(z,2),L=H[0],R=H[1],T=(0,i.useState)(!1),V=(0,a.Z)(T,2),q=V[0],U=V[1],P=(0,c.U)().dispatch,X=(0,l.useMutation)(w.WH).mutate,B=(0,l.useMutation)(I.pF).mutate,W=((0,b.Z_)(x,b.BA,b.H2),(0,b.Z_)(x,b.vw,b.H2),(0,b.Z_)(x,b.JK,b.H2),(0,i.useState)({userid:m.userid,is_admin:q})),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1];(0,l.useMutation)(Z.iU).mutate;(0,l.useMutation)(Z.XH).mutate;var Q=function(e){console.log(e.target.value);var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;console.log(e.target.value);var o="deviceid"!==n&&"facilityid"!==n&&"departmentid"!==n||a==="Selected ".concat(n.charAt(0).toUpperCase()+n.slice(1))?a:parseInt(a,10);J((0,h.Z)((0,h.Z)({},G),{},(0,f.Z)({},n,"checkbox"===r?i:o)))};var K=(0,l.useMutation)(N.Xo).mutate;var $=(0,d.X)(),ee=$.darkMode;$.setDarkMode;return(0,i.useEffect)((function(){X("",{onSuccess:function(e){D(e)},onError:function(e){}}),B("",{onSuccess:function(e){_(e)},onError:function(e){}}),K("",{onSuccess:function(e){R(e)},onError:function(e){}})}),[]),(0,y.jsx)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:S,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&e.stopPropagation(),k(!0),J((0,h.Z)((0,h.Z)({},G),{},{is_admin:q})),!0===t.checkValidity()&&(console.log(G),P({type:"SHOW_LOADER"}),u(G),s())},children:"Assigned"===p?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("h4",{className:"ms-3 pt-2",id:"".concat(ee?"heading-dark":""),children:["Are you sure you want to UnAssign this User ?"," "]}),(0,y.jsx)(r.b7,{xs:11,className:"modal-light ".concat(ee?"modal-dark":""),children:(0,y.jsx)(r.u5,{color:"danger",className:"float-end ms-2",onClick:function(){v(m)},children:"UnAssign"})})]}):(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(ee?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Facility*"}),(0,y.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacilities",className:" form-select ".concat(ee?"select-dark":""),value:G.facilityid,onChange:Q,disabled:G.departmentid||G.deviceid,children:[(0,y.jsx)("option",{children:"Facilities"}),null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.map((function(e){return(0,y.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(ee?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Department Selection*"}),(0,y.jsxs)(r.LX,{name:"departmentid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationDepartment",value:G.departmentid,onChange:Q,className:" form-select ".concat(ee?"select-dark":""),disabled:G.facilityid||G.deviceid,children:[(0,y.jsx)("option",{children:"Departments"}),null===M||void 0===M||null===(n=M.data)||void 0===n?void 0:n.map((function(e){return(0,y.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})]}),(0,y.jsxs)(r.b7,{md:12,children:[(0,y.jsx)(r.L8,{id:"".concat(ee?"heading-dark":""),htmlFor:"validationFacilityName",children:"Devices"}),(0,y.jsxs)(r.LX,{name:"deviceid",className:" form-select ".concat(ee?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Device.",value:G.deviceid,onChange:Q,disabled:G.facilityid||G.departmentid,children:[(0,y.jsx)("option",{children:"Devices"}),null===L||void 0===L||null===(o=L.data)||void 0===o?void 0:o.map((function(e){return(0,y.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})]}),(0,y.jsx)(r.b7,{xs:12,children:(0,y.jsxs)("div",{className:"form-check",children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input",id:"isAdminCheckbox",checked:q,onChange:function(e){U(e.target.checked)},style:{width:"20px",height:"20px"}}),(0,y.jsx)("label",{className:"form-check-label",htmlFor:"isAdminCheckbox",children:"Admin"})]})}),(0,y.jsx)(r.b7,{xs:12,children:(0,y.jsx)(r.u5,{color:"primary",type:"submit",children:"Assign"})})]})})},C=[{key:"rolename",label:"Role"},{key:"name",label:"Assigned To"},{key:"firstname",label:"Name"},{key:"email",label:"Email"},{key:"phonenumber",label:"Contact Number"},{key:"address",label:"Address"}],E=function(){var e=(0,c.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},f=(0,l.useMutation)(p.cn).mutate,h=(0,l.useMutation)(p.Xk).mutate,v=(0,i.useState)([]),x=(0,a.Z)(v,2),g=x[0],j=x[1],b=(0,i.useState)("UnAssigned"),S=(0,a.Z)(b,2),Z=S[0],I=S[1],N=(0,l.useMutation)(p.Z$).mutate,w=(0,l.useMutation)(p.M6).mutate,E=(0,l.useMutation)(p.vx).mutate,D=(0,l.useMutation)(p.jm).mutate,F=(0,l.useMutation)(p.Lg).mutate,O=(0,l.useMutation)(p.Rp).mutate,M=(0,l.useMutation)(p.dk).mutate,_=(0,l.useMutation)(p.XZ).mutate,z=(0,l.useMutation)(p.lI).mutate,H=(0,l.useMutation)(p.Jd).mutate,L=(0,i.useState)(!1),R=(0,a.Z)(L,2),T=R[0],V=R[1],q=(0,i.useState)(),U=(0,a.Z)(q,2),P=U[0],X=U[1],B=(0,i.useState)(!1),W=(0,a.Z)(B,2),Y=W[0],G=W[1],J=(0,d.X)().setShowToast,Q=(0,l.useMutation)(p.Vt),K=(0,i.useState)(!0),$=(0,a.Z)(K,2),ee=$[0],te=($[1],(0,i.useState)(!1)),ne=(0,a.Z)(te,2),ae=ne[0],re=ne[1],ie=(0,u.s0)(),oe=function(){V(!1)},se=function(){re(!1)},ce=(0,i.useState)([]),le=(0,a.Z)(ce,2),de=le[0],ue=le[1];function me(){N("",{onSuccess:function(e){j(e.data),n()},onError:function(e){}})}function pe(e){w(e,{onSuccess:function(e){j(e.data),n()},onError:function(e){}})}function fe(e){t(),setTimeout((function(){Y?f(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User Created Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):h({handler:e,editData:P},{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User Edited Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e?pe(e):me()}),[]);var he=function(e){var t=localStorage.getItem("OrganizationId");switch(e){case"Assigned":t?(I("Assigned"),function(e){D(e,{onSuccess:function(e){j(e.data),n()},onError:function(e){}})}(t)):(I("Assigned"),E("",{onSuccess:function(e){j(e.data),n()},onError:function(e){}}));break;case"UnAssigned":t?(I("UnAssigned"),pe(t)):(I("UnAssigned"),me())}},ve=(0,d.X)(),xe=ve.darkMode;ve.setDarkMode;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.$,{title:Y?"Add User":"Edit User",content:Y?(0,y.jsx)(k,{closeModal:oe,saveHandler:fe}):(0,y.jsx)(k,{closeModal:oe,saveHandler:fe,data:P}),isOpen:T,onClose:oe}),(0,y.jsx)(s.$,{title:"Assigned"===Z?"UnAssign User":"Assign User",content:(0,y.jsx)(A,{closeModal:oe,assignHandler:function(e){n(),e.facilityid?F(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User Assigned to Facility Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):e.departmentid?O(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User Assigned to Department Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):e.deviceid&&M(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User Assigned to Device Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}),se()},data:de,selectedRole:Z,UnAssignHandler:function(e){var t=e.facilityid,a=e.departmentid,r=e.deviceid;t?_(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User UnAssigned From Facility Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):a?z(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User UnAssigned From Department Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):r&&H(e,{onSuccess:function(){n(),J((function(){return{show:!0,title:"Success",content:"User UnAssigned From Device Successfully"}})),me()},onError:function(e){n(),J((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}),se()}}),isOpen:ae,onClose:se}),(0,y.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(xe?"table_container_dark":""),children:[(0,y.jsxs)(r.rb,{children:[(0,y.jsx)(r.b7,{children:(0,y.jsx)("h3",{className:"pb-2",id:"".concat(xe?"heading-dark":""),children:"Users"})}),(0,y.jsx)(r.b7,{md:3,className:"float-end",children:(0,y.jsxs)("select",{size:"sm",className:" form-select ".concat(xe?"select-dark":""),"aria-label":"Department",defaultValue:"Admins",onChange:function(e){return he(e.target.value)},children:[(0,y.jsx)("option",{value:"UnAssigned",children:"UnAssigned"}),(0,y.jsx)("option",{value:"Assigned",children:"Assigned"})]})}),(0,y.jsx)(r.b7,{children:(0,y.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){G(!0),X(null),V(!0)},children:"Add Users"})})]}),g?(0,y.jsx)(m.Z,{columns:C.filter((function(e){return!("unassigned"===Z.toLowerCase()&&("rolename"===e.key||"name"===e.key))})).map((function(e){return e})),OnDeleteItem:function(e){t(),Q.mutate(e.userid,{onSuccess:function(){J((function(){return{show:!0,title:"Success",content:"User deleted Successfully"}})),me(),n()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),ie("/login")),J((function(){return{show:!0,title:"Error",content:e.response.data.error}})),n()}}),n()},selectedRole:Z,data:g,openEditModal:function(e){G(!1),X(e),V(!0)},delUserId:ee,openAssignModal:function(e){ue(e),re(!0)}}):(0,y.jsx)(o.Z,{})]})]})}},99175:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),s=n(57689),c=n(93001),l=n(52036),d=n(99579),u=n(18043),m=n(17834),p=n(46522),f=n(66757),h=n(4942),v=n(1413),x=n(24846),g=n(1278),j=n(25244),b=n(10781),S=n(18393),y=n(45013),k=n(80184),Z=function(e){var t,n,s,c=e.closeModal,l=e.saveHandler,p=e.data,Z=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),I=localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId"),N=(0,b.Z)((function(e){return e.data})),w=(0,u.U)().dispatch,A=(0,i.useState)(),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,i.useState)(!1),O=(0,a.Z)(F,2),M=O[0],_=O[1],z=JSON.parse(localStorage.getItem("permissions")),H=(0,o.useMutation)(y.WH).mutate,L=(0,o.useMutation)(S.Z$).mutate,R=(0,f.Z_)(z,f.BA,f.H2),T=(0,f.Z_)(z,f.vw,f.H2),V=((0,f.Z_)(z,f.JK,f.H2),(0,i.useState)({departmentname:"",description:"",customerid:Z?Number(localStorage.getItem("OrganizationId")):0,facilityid:I?Number(localStorage.getItem("facilityId")):0,userid:0})),q=(0,a.Z)(V,2),U=q[0],P=q[1];(0,i.useEffect)((function(){p&&(J(null===p||void 0===p?void 0:p.customerid),P((function(){return{departmentname:null===p||void 0===p?void 0:p.departmentname,description:null===p||void 0===p?void 0:p.description,customerid:null===p||void 0===p?void 0:p.customerid,facilityid:null===p||void 0===p?void 0:p.facilityid,userid:null===p||void 0===p?void 0:p.userid}})))}),[p]);var X=(0,i.useState)([]),B=(0,a.Z)(X,2),W=B[0],Y=B[1],G=(0,o.useMutation)(m.iU).mutate;function J(e){null!==e&&G(e,{onSuccess:function(e){D(e)},onError:function(e){}})}var Q=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;console.log(e.target.value);var o="customerid"!==n&&"facilityid"!==n&&"userid"!==n||a==="Selected ".concat(n.charAt(0).toUpperCase()+n.slice(1))?a:parseInt(a,10);P((0,v.Z)((0,v.Z)({},U),{},(0,h.Z)({},n,"checkbox"===r?i:o))),"customerid"===n&&J(a)};(0,i.useEffect)((function(){L("",{onSuccess:function(e){Y(e)},onError:function(e){}}),T&&H("",{onSuccess:function(e){D(e)},onError:function(e){}})}),[T]);var K=(0,d.X)(),$=K.darkMode;K.setDarkMode;return(0,k.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:M,onSubmit:function(e){var t=e.currentTarget;U.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),_(!0),!0===t.checkValidity()&&(w({type:"SHOW_LOADER"}),l(U),e.preventDefault(),c())},children:[!Z&&R&&(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,k.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:U.customerid,onChange:Q,required:!0,disabled:!!p,children:[(0,k.jsx)("option",{children:"Select Organization"}),null===(t=N[0])||void 0===t?void 0:t.map((function(e){return(0,k.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),!I&&T&&(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility*"}),(0,k.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacility",className:" form-select ".concat($?"select-dark":""),value:U.facilityid,onChange:Q,required:!0,disabled:!!p,children:[(0,k.jsx)("option",{children:"Select Facility"}),null===E||void 0===E||null===(n=E.data)||void 0===n?void 0:n.map((function(e){return(0,k.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationDepartmentName",children:"Department Name*"}),(0,k.jsxs)(r.YR,{children:[(0,k.jsx)(r.wV,{children:(0,k.jsx)(x.Z,{icon:g.e,alt:"Name"})}),(0,k.jsx)(r.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"departmentname",value:U.departmentname,onChange:Q,feedbackInvalid:"Department Name is required",id:"validationDepartmentName",required:!0})]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,k.jsxs)(r.LX,{name:"userid",className:" form-select ".concat($?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:U.userid,onChange:Q,required:!0,disabled:!!p,children:[(0,k.jsx)("option",{children:"Select User"}),null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.map((function(e){return(0,k.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"description",children:"Description*"}),(0,k.jsxs)(r.YR,{children:[(0,k.jsx)(r.wV,{children:(0,k.jsx)(x.Z,{icon:j.f,alt:"description"})}),(0,k.jsx)(r.jO,{className:"input-light pt-0 ".concat($?"input-dark":""),type:"text",name:"description",value:U.description,onChange:Q,feedbackInvalid:"Description is required",id:"validationDescription",required:!0})]})]}),(0,k.jsxs)(r.b7,{md:12,children:[(0,k.jsx)(r.L8,{id:"".concat($?"heading-dark":""),htmlFor:"validationFacilityName",children:"Active"}),(0,k.jsx)(r.EC,{id:"flexCheckDefault",label:" "})]}),(0,k.jsx)(r.b7,{xs:12,children:(0,k.jsx)(r.u5,{color:"primary",type:"submit",children:p?"Edit Department":"Add Department"})})]})},I=n(77868),N=[{key:"departmentname",label:"Department Name"},{key:"email",label:"Contact Email"},{key:"description",label:"Description"}],w=function(){var e=(0,u.U)().dispatch,t=(0,o.useMutation)(p.BZ).mutate,n=(0,o.useMutation)(p.q3).mutate,h=function(){return e({type:"SHOW_LOADER"})},v=function(){return e({type:"HIDE_LOADER"})},x=(0,d.X)(),g=x.setShowToast,j=x.departmentsData,b=x.setDepartmentsData,S=(0,o.useMutation)(p.pF).mutate,y=(0,i.useState)(!1),w=(0,a.Z)(y,2),A=w[0],C=w[1],E=(0,o.useMutation)(p.If),D=(0,i.useState)(),F=(0,a.Z)(D,2),O=F[0],M=F[1],_=(0,i.useState)(!1),z=(0,a.Z)(_,2),H=z[0],L=z[1],R=(0,i.useState)(!0),T=(0,a.Z)(R,2),V=T[0],q=(T[1],(0,s.s0)()),U=JSON.parse(localStorage.getItem("permissions")),P=((0,f.Z_)(U,f.BA,f.H2),(0,f.Z_)(U,f.vw,f.H2)),X=((0,f.Z_)(U,f.JK,f.H2),(0,f.Z_)(U,f.iH,f.H2),function(){C(!1)});function B(){S("",{onSuccess:function(e){b(e.data)},onError:function(e){}})}var W=(0,o.useMutation)(m.XH).mutate;function Y(e){h(),W(e,{onSuccess:function(e){v(),b(e.data)},onError:function(e){v()}})}var G=(0,o.useMutation)(m.HH).mutate;function J(e){h(),setTimeout((function(){H?t(e,{onSuccess:function(){v(),g((function(){return{show:!0,title:"Success",content:"Department Created Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?B():Y(localStorage.getItem("facilityId"))},onError:function(e){v(),g((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):n({handler:e,editData:O},{onSuccess:function(){v(),g((function(){return{show:!0,title:"Success",content:"Department Edited Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?B():Y(localStorage.getItem("facilityId"))},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),q("/login")),v(),g((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId");if(void 0!==e&&"Select Organization"!==e&&null!==e||void 0!==t&&null!==t)if(P&&"Select Facility"===t)B();else{if("Select Facility"!==t)return;G(e,{onSuccess:function(e){v(),b(e.data)},onError:function(e){v()}})}else B()}),[localStorage.getItem("facilityId"),localStorage.getItem("OrganizationId")]);var Q=(0,d.X)(),K=Q.darkMode;Q.setDarkMode;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.$,{title:H?"Add Department":"Edit Department",content:H?(0,k.jsx)(Z,{closeModal:X,saveHandler:J}):(0,k.jsx)(Z,{closeModal:X,saveHandler:J,data:O}),isOpen:A,onClose:X}),(0,k.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(K?"table_container_dark":""),children:[(0,k.jsxs)(r.rb,{children:[(0,k.jsx)(r.b7,{children:(0,k.jsx)("h3",{id:"".concat(K?"heading-dark":""),className:"pb-2",children:"Departments"})}),(0,k.jsx)(r.b7,{children:(0,k.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){L(!0),M(null),C(!0)},children:"Add Department"})})]}),j?(0,k.jsx)(I.Z,{columns:N,data:j,openEditModal:function(e){L(!1),M(e),C(!0)},OnDeleteItem:function(e){h(),E.mutate(e,{onSuccess:function(){g((function(){return{show:!0,title:"Success",content:"Department deleted Successfully"}})),null===localStorage.getItem("facilityId")||void 0===localStorage.getItem("facilityId")?B():Y(localStorage.getItem("facilityId")),v()},onError:function(e){g((function(){return{show:!0,title:"Error",content:e.response.data}})),v()}}),v()},deldepId:V}):(0,k.jsx)(c.Z,{})]})]})}},37295:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var a=n(29439),r=n(78983),i=n(72791),o=n(91933),s=n(93001),c=n(52036),l=n(18043),d=n(57689),u=n(96062),m=n(4942),p=n(1413),f=n(24846),h=n(1278),v=n(94170),x=n(10781),g=n(17834),j=n(46522),b=n(99579),S=n(66757),y=n(45013),k=n(18393),Z=n(80184),I=function(e){var t,n,s,c,d=e.closeModal,u=e.saveHandler,I=e.data,N=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),w=localStorage.getItem("facilityId")&&"Select Facility"!==localStorage.getItem("facilityId"),A=localStorage.getItem("departmentId")&&"Select Department"!==localStorage.getItem("departmentId"),C=(0,x.Z)((function(e){return e.data})),E=JSON.parse(localStorage.getItem("permissions")),D=(0,i.useState)(!1),F=(0,a.Z)(D,2),O=F[0],M=F[1],_=(0,i.useState)(),z=(0,a.Z)(_,2),H=z[0],L=z[1],R=(0,i.useState)(),T=(0,a.Z)(R,2),V=T[0],q=T[1],U=(0,i.useState)([]),P=(0,a.Z)(U,2),X=P[0],B=P[1],W=(0,l.U)().dispatch,Y=(0,o.useMutation)(y.WH).mutate,G=(0,o.useMutation)(j.pF).mutate,J=(0,o.useMutation)(k.Z$).mutate,Q=(0,S.Z_)(E,S.BA,S.H2),K=(0,S.Z_)(E,S.vw,S.H2),$=(0,S.Z_)(E,S.JK,S.H2),ee=(0,i.useState)({devicename:"",manufacturer:"",facilityid:N?Number(localStorage.getItem("facilityId")):0,departmentid:N?Number(localStorage.getItem("departmentId")):0,customerid:N?Number(localStorage.getItem("OrganizationId")):0,delaytime:0,userid:0}),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1];(0,i.useEffect)((function(){I&&ae((function(){return{devicename:null===I||void 0===I?void 0:I.devicename,manufacturer:null===I||void 0===I?void 0:I.manufacturer,facilityid:null===I||void 0===I?void 0:I.facilityid,departmentid:null===I||void 0===I?void 0:I.departmentid,customerid:null===I||void 0===I?void 0:I.customerid,delaytime:null===I||void 0===I?void 0:I.delaytime,userid:null===I||void 0===I?void 0:I.userid}}))}),[I]);var re=(0,o.useMutation)(g.iU).mutate;var ie=(0,o.useMutation)(g.XH).mutate;var oe=function(e){console.log(e.target.value);var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;console.log(e.target.value);var o,s="delaytime"!==n&&"customerid"!==n&&"facilityid"!==n&&"departmentid"!==n&&"userid"!==n||a==="Selected ".concat(n.charAt(0).toUpperCase()+n.slice(1))?a:parseInt(a,10);ae((0,p.Z)((0,p.Z)({},ne),{},(0,m.Z)({},n,"checkbox"===r?i:s))),"customerid"===n?null!==(o=a)&&re(o,{onSuccess:function(e){L(e)},onError:function(e){}}):"facilityid"===n&&function(e){ie(e,{onSuccess:function(e){q(e)},onError:function(e){}})}(a)};(0,i.useEffect)((function(){J("",{onSuccess:function(e){B(e)},onError:function(e){}}),K?Y("",{onSuccess:function(e){L(e)},onError:function(e){}}):$&&G("",{onSuccess:function(e){q(e)},onError:function(e){}})}),[K]);var se=(0,b.X)(),ce=se.darkMode;se.setDarkMode;return(0,Z.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:O,onSubmit:function(e){var t=e.currentTarget;ne.organizationContact;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),M(!0),!0===t.checkValidity()&&(W({type:"SHOW_LOADER"}),u(ne),e.preventDefault(),d())},children:[!N&&Q&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,Z.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(ce?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:ne.customerid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Organization"}),null===(t=C[0])||void 0===t?void 0:t.map((function(e){return(0,Z.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),!w&&K&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Facility*"}),(0,Z.jsxs)(r.LX,{name:"facilityid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationFacilities",className:" form-select ".concat(ce?"select-dark":""),value:ne.facilityid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Facility"}),null===H||void 0===H||null===(n=H.data)||void 0===n?void 0:n.map((function(e){return(0,Z.jsx)("option",{value:e.facilityid,children:e.name},e.facilityid)}))]})]}),!A&&$&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Department Selection*"}),(0,Z.jsxs)(r.LX,{name:"departmentid","aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility.",id:"validationDepartment",value:ne.departmentid,onChange:oe,className:" form-select ".concat(ce?"select-dark":""),required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select Department"}),null===V||void 0===V||null===(s=V.data)||void 0===s?void 0:s.map((function(e){return(0,Z.jsx)("option",{value:e.departmentid,children:e.departmentname},e.departmentid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,Z.jsxs)(r.LX,{name:"userid",className:" form-select ".concat(ce?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:ne.userid,onChange:oe,required:!0,disabled:!!I,children:[(0,Z.jsx)("option",{children:"Select User"}),null===X||void 0===X||null===(c=X.data)||void 0===c?void 0:c.map((function(e){return(0,Z.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationDevicesName",children:"Equipment Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(f.Z,{icon:h.e,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(ce?"input-dark":""),type:"text",name:"devicename",value:ne.devicename,onChange:oe,feedbackInvalid:"Device Name is required",id:"validationDeviceName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationManufacturerName",children:"Manufacturer Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(f.Z,{icon:v.F,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(ce?"input-dark":""),type:"text",name:"manufacturer",value:ne.manufacturer,onChange:oe,feedbackInvalid:"Manufacturer Name is required",id:"validationManufacturerName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(ce?"heading-dark":""),htmlFor:"validationDevicesName",children:"Time Delay in Minutes"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(f.Z,{icon:h.e,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(ce?"input-dark":""),type:"number",name:"delaytime",value:ne.delaytime,onChange:oe,feedbackInvalid:"Time Delay is required",id:"validationDeviceName",required:!0})]})]}),(0,Z.jsx)(r.b7,{xs:12,children:(0,Z.jsx)(r.u5,{color:"primary",type:"submit",children:I?"Edit Device":"Add Device"})})]})},N=n(77868),w=[{key:"devicename",label:"Equipment Name"},{key:"manufacturer",label:"Manufacturer"}],A=function(){var e=(0,l.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},m=(0,b.X)(),p=m.setShowToast,f=m.devicesData,h=m.setDevicesData,v=(0,i.useState)(!1),x=(0,a.Z)(v,2),g=x[0],j=x[1],S=(0,i.useState)(),y=(0,a.Z)(S,2),k=y[0],A=y[1],C=(0,i.useState)(!1),E=(0,a.Z)(C,2),D=E[0],F=E[1],O=(0,d.s0)(),M=(0,o.useMutation)(u.Xo).mutate,_=(0,o.useMutation)(u.S6).mutate,z=(0,o.useMutation)(u.kr).mutate,H=(0,o.useMutation)(u.n1),L=(0,i.useState)(!0),R=(0,a.Z)(L,2),T=R[0],V=(R[1],function(){j(!1)}),q=(0,o.useMutation)(u.oy).mutate;function U(e){q(e,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}})}var P=(0,o.useMutation)(u.a8).mutate;var X=(0,o.useMutation)(u.hd).mutate;function B(){M("",{onSuccess:function(e){h(e.data)},onError:function(e){}})}function W(e){t(),setTimeout((function(){D?_(e,{onSuccess:function(){n(),p((function(){return{show:!0,title:"Success",content:"Device Created Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?B():U(localStorage.getItem("departmentId"))},onError:function(e){n(),p((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):z({handler:e,editData:k},{onSuccess:function(){n(),p((function(){return{show:!0,title:"Success",content:"Device Edited Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?B():U(localStorage.getItem("departmentId"))},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),O("/login")),n(),p((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId"),t=localStorage.getItem("facilityId"),a=localStorage.getItem("departmentId");a&&"Select Department"!==a?U(a):t&&"Select Facility"!==t?X(t,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}}):e&&"Select Organization"!==e?function(e){P(e,{onSuccess:function(e){n(),h(e.data)},onError:function(e){n()}})}(e):B()}),[localStorage.getItem("OrganizationId"),localStorage.getItem("facilityId"),localStorage.getItem("departmentId")]);var Y=(0,b.X)(),G=Y.darkMode;Y.setDarkMode;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.$,{title:D?"Add Equipment":"Edit Equipment",content:D?(0,Z.jsx)(I,{closeModal:V,saveHandler:W}):(0,Z.jsx)(I,{closeModal:V,saveHandler:W,data:k}),isOpen:g,onClose:V}),(0,Z.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(G?"table_container_dark":""),children:[(0,Z.jsxs)(r.rb,{children:[(0,Z.jsx)(r.b7,{children:(0,Z.jsx)("h3",{className:"pb-2",id:"".concat(G?"heading-dark":""),children:"Equipment"})}),(0,Z.jsx)(r.b7,{children:(0,Z.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){F(!0),A(null),j(!0)},children:"Add Equipment"})})]}),f?(0,Z.jsx)(N.Z,{columns:w,data:f,OnDeleteItem:function(e){t(),H.mutate(e,{onSuccess:function(){p((function(){return{show:!0,title:"Success",content:"Device deleted Successfully"}})),null===localStorage.getItem("departmentId")||void 0===localStorage.getItem("departmentId")?B():U(localStorage.getItem("departmentId")),n()},onError:function(e){p((function(){return{show:!0,title:"Error",content:e.response.data}})),n()}}),n()},openEditModal:function(e){F(!1),A(e),j(!0)},deldevId:T}):(0,Z.jsx)(s.Z,{})]})]})}},2646:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),s=n(52036),c=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(45013),p=n(4942),f=n(1413),h=n(24846),v=n(38861),x=n(54546),g=n(31397),j=n(1278),b=n(25244),S=n(10781),y=n(18393),k=n(66757),Z=n(80184),I=function(e){var t,n,o=e.closeModal,s=e.saveHandler,u=e.data,m=localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId"),I=(0,S.Z)((function(e){return e.data})),N=(0,c.U)().dispatch,w=(0,i.useState)(!1),A=(0,a.Z)(w,2),C=A[0],E=A[1],D=JSON.parse(localStorage.getItem("permissions")),F=(0,l.useMutation)(y.Z$).mutate,O=(0,i.useState)([]),M=(0,a.Z)(O,2),_=M[0],z=M[1],H=(0,k.Z_)(D,k.BA,k.H2),L=((0,k.Z_)(D,k.vw,k.H2),(0,k.Z_)(D,k.JK,k.H2),(0,i.useState)({name:"",facility_type:"",customerid:m?Number(localStorage.getItem("OrganizationId")):0,timezone:"",currency:"",contactname:"",contactphonenumber:"",address:"",city:"",street:"",postcode:0,latitude:0,longitude:0,isfacilityadmin:!0,userid:0})),R=(0,a.Z)(L,2),T=R[0],V=R[1];(0,i.useEffect)((function(){F("",{onSuccess:function(e){z(e)},onError:function(e){}}),u&&V((function(){return{name:null===u||void 0===u?void 0:u.name,facility_type:null===u||void 0===u?void 0:u.facility_type,customerid:Number(null===u||void 0===u?void 0:u.customerid),timezone:null===u||void 0===u?void 0:u.timezone,currency:null===u||void 0===u?void 0:u.currency,contactname:null===u||void 0===u?void 0:u.contactname,contactphonenumber:null===u||void 0===u?void 0:u.contactphonenumber,address:null===u||void 0===u?void 0:u.address,city:null===u||void 0===u?void 0:u.city,street:null===u||void 0===u?void 0:u.street,postcode:+(null===u||void 0===u?void 0:u.postcode),latitude:+(null===u||void 0===u?void 0:u.latitude),longitude:+(null===u||void 0===u?void 0:u.longitude),isfacilityadmin:!0,userid:null===u||void 0===u?void 0:u.userid}}))}),[u]);var q=function(e){var t=e.target,n=t.name,a=t.value,r=t.type;t.checked;if(""!==a){var i="latitude"!==n&&"longitude"!==n||"checkbox"===r?a:parseFloat(a),o="postcode"===n&&"checkbox"!==r?parseInt(a,10):a;isNaN(i)&&"latitude"===n&&"longitude"===n||isNaN(o)&&"postcode"===n||V((function(e){return(0,f.Z)((0,f.Z)({},e),{},(0,p.Z)({},n,"postcode"===n?o:i))}))}else V((0,f.Z)((0,f.Z)({},T),{},(0,p.Z)({},n,a)))};var U=(0,d.X)(),P=U.darkMode;U.setDarkMode;return(0,Z.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:C,onSubmit:function(e){var t=e.currentTarget;T.organizationContact;if(e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),E(!0),!0===t.checkValidity()){var n=(0,f.Z)((0,f.Z)({},T),{},{userid:Number(T.userid)});N({type:"SHOW_LOADER"}),s(n),e.preventDefault(),o()}},children:[!m&&H&&(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,Z.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(P?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:T.customerid,onChange:q,required:!0,disabled:!!u,children:[(0,Z.jsx)("option",{children:"Select Organization"}),null===(t=I[0])||void 0===t?void 0:t.map((function(e){return(0,Z.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility Name*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:v.H,alt:"Name"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"text",name:"name",value:T.name,onChange:q,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Facility Type*"}),(0,Z.jsxs)(r.LX,{name:"facility_type",className:" form-select ".concat(P?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid facility type.",id:"validationFacilityType",value:T.facility_type,onChange:q,required:!0,children:[(0,Z.jsx)("option",{children:"Select Facility Type"}),(0,Z.jsx)("option",{value:"Mixed Dashboard",children:"Mixed Dashboard"}),(0,Z.jsx)("option",{value:"Energy Dashboard",children:"Energy Dashboard"}),(0,Z.jsx)("option",{value:"Condition Dashboard",children:"Condition Dashboard"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Time Zone*"}),(0,Z.jsxs)(r.LX,{name:"timezone",className:" form-select ".concat(P?"select-dark":""),value:T.timezone,onChange:q,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid time zone.",id:"validationTimeZone",required:!0,children:[(0,Z.jsx)("option",{children:"Select Timezone"}),(0,Z.jsx)("option",{value:"Asia/Colombo",children:"Asia/Colombo"}),(0,Z.jsx)("option",{value:"Asia/Dhaka",children:"Asia/Dhaka"}),(0,Z.jsx)("option",{value:"Asia/Dubai",children:"Asia/Dubai"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Currency*"}),(0,Z.jsxs)(r.LX,{name:"currency",className:" form-select ".concat(P?"select-dark":""),value:T.currency,onChange:q,"aria-describedby":"validationCurrency",feedbackInvalid:"Please select a valid currency.",id:"validationCurrency",required:!0,children:[(0,Z.jsx)("option",{children:"Select Currency"}),(0,Z.jsx)("option",{value:"USD",children:"USD"}),(0,Z.jsx)("option",{value:"EUR",children:"EUR"}),(0,Z.jsx)("option",{value:"ZAR",children:"ZAR"})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomCity",children:"Site Manager"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:x.V,alt:"contactname"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"text",name:"contactname",value:T.contactname,onChange:q,"aria-describedby":"validationSiteManager",feedbackInvalid:"Site Manager required.",id:"validationSiteManager",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomStreet",children:"Contact Number*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:g.d,alt:"Contact"})}),(0,Z.jsx)(r.jO,{type:"tel",className:"input-light pt-0 ".concat(P?"input-dark":""),name:"contactphonenumber",placeholder:"+92xxxx",value:T.contactphonenumber,onChange:q,"aria-describedby":"validationContactNumber",feedbackInvalid:"Phone Number is required.",id:"validationContactNumber",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationFacilityName",children:"Select User"}),(0,Z.jsxs)(r.LX,{name:"userid",className:" form-select ".concat(P?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid User.",value:T.userid,onChange:q,required:!0,disabled:!!u,children:[(0,Z.jsx)("option",{children:"Select User"}),null===_||void 0===_||null===(n=_.data)||void 0===n?void 0:n.map((function(e){return(0,Z.jsxs)("option",{value:e.userid,children:[e.firstname,e.lastname]},e.userid)}))]})]}),(0,Z.jsxs)(r.b7,{md:12,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:j.e,alt:"Address"})}),(0,Z.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(P?"input-dark":""),name:"address",value:T.address,onChange:q,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationAddress",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomCity",children:"Street*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:x.V,alt:"Street"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"text",name:"street",value:T.street,onChange:q,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Street is required.",id:"validationStreet",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:6,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomStreet",children:"City*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{children:(0,Z.jsx)(h.Z,{icon:b.f,alt:"City"})}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"text",name:"city",value:T.city,onChange:q,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"City is required.",id:"validationCity",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Postcode"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"number",name:"postcode",value:T.postcode,onChange:q,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Postcode is required",id:"validationPostcode",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Latitude*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(P?"input-dark":""),name:"latitude",value:T.latitude,onChange:q,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"latitude is required",id:"validationLatitude",required:!0})]})]}),(0,Z.jsxs)(r.b7,{md:4,children:[(0,Z.jsx)(r.L8,{id:"".concat(P?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Longitude*"}),(0,Z.jsxs)(r.YR,{children:[(0,Z.jsx)(r.wV,{}),(0,Z.jsx)(r.jO,{className:"input-light pt-0 ".concat(P?"input-dark":""),type:"number",name:"longitude",value:T.longitude,onChange:q,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"longitude is required",id:"validationLongitude",required:!0})]})]}),(0,Z.jsx)(r.b7,{xs:12,children:(0,Z.jsx)(r.u5,{color:"primary",type:"submit",children:u?"Edit Facility":"Add Facility"})})]})},N=n(77868),w=n(17834),A=[{key:"name",label:"Facility Name"},{key:"facility_type",label:"Facility Type"},{key:"email",label:"Contact Email"},{key:"contactphonenumber",label:"Contact Number"},{key:"address",label:"Address"},{key:"street",label:"Street"},{key:"city",label:"City"},{key:"postcode",label:"Postcode"}],C=function(){var e=(0,c.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},p=(0,l.useMutation)(m.sB).mutate,f=(0,l.useMutation)(m.nO).mutate,h=(0,d.X)(),v=h.facilityData,x=h.setFacilityData,g=(0,l.useMutation)(m.WH).mutate,j=(0,i.useState)(!1),b=(0,a.Z)(j,2),S=b[0],y=b[1],k=(0,i.useState)(),C=(0,a.Z)(k,2),E=C[0],D=C[1],F=(0,i.useState)(!1),O=(0,a.Z)(F,2),M=O[0],_=O[1],z=(0,d.X)().setShowToast,H=(0,l.useMutation)(m.dL),L=(0,i.useState)(!0),R=(0,a.Z)(L,2),T=R[0],V=(R[1],(0,u.s0)()),q=function(){y(!1)};function U(){g("",{onSuccess:function(e){x(e.data)},onError:function(e){}})}var P=(0,l.useMutation)(w.iU).mutate;function X(e){P(e,{onSuccess:function(e){n(),x(e.data)},onError:function(e){n()}})}function B(e){t(),setTimeout((function(){M?p(e,{onSuccess:function(){n(),z((function(){return{show:!0,title:"Success",content:"Facility Created Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?U():X(localStorage.getItem("OrganizationId"))},onError:function(e){n(),z((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):f({handler:e,editData:E},{onSuccess:function(){n(),z((function(){return{show:!0,title:"Success",content:"Facility Edited Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?U():X(localStorage.getItem("OrganizationId"))},onError:function(e){n(),z((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){void 0!==localStorage.getItem("OrganizationId")&&"Select Organization"!==localStorage.getItem("OrganizationId")&&null!==localStorage.getItem("OrganizationId")||U()}),[localStorage.getItem("OrganizationId")]);var W=(0,d.X)(),Y=W.darkMode;W.setDarkMode;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(s.$,{title:M?"Add Facility":"Edit Facility",content:M?(0,Z.jsx)(I,{closeModal:q,saveHandler:B}):(0,Z.jsx)(I,{closeModal:q,saveHandler:B,data:E}),isOpen:S,onClose:q}),(0,Z.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Y?"table_container_dark":""),children:[(0,Z.jsxs)(r.rb,{children:[(0,Z.jsx)(r.b7,{children:(0,Z.jsx)("h3",{className:"pb-2",id:"".concat(Y?"heading-dark":""),children:"Facilities"})}),(0,Z.jsx)(r.b7,{children:(0,Z.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){_(!0),D(null),y(!0)},children:"Add Facilities"})})]}),v?(0,Z.jsx)(N.Z,{columns:A,OnDeleteItem:function(e){t(),H.mutate(e,{onSuccess:function(){z((function(){return{show:!0,title:"Success",content:"Facility deleted Successfully"}})),null===localStorage.getItem("OrganizationId")||void 0===localStorage.getItem("OrganizationId")?U():X(localStorage.getItem("OrganizationId")),n()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),V("/login")),z((function(){return{show:!0,title:"Error",content:e.response.data.error}})),n()}}),n()},data:v,openEditModal:function(e){_(!1),D(e),y(!0)},delfacId:T}):(0,Z.jsx)(o.Z,{})]})]})}},80464:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),s=n(52036),c=n(18043),l=n(91933),d=n(99579),u=n(57689),m=n(4942),p=n(1413),f=n(24846),h=n(38861),v=n(61698),x=n(10781),g=n(80184),j=function(e){var t,n=e.closeModal,o=e.saveHandler,s=e.data,l=(0,c.U)().dispatch,u=(0,x.Z)((function(e){return e.data})),j=(0,i.useState)(!1),b=(0,a.Z)(j,2),S=b[0],y=b[1],k=(0,i.useState)({gateway_id:"",gateway_note:"",customerid:Number(localStorage.getItem("OrganizationId")),location:"",carrier:""}),Z=(0,a.Z)(k,2),I=Z[0],N=Z[1];(0,i.useEffect)((function(){s&&N((function(){return{gateway_id:s.gateway_id,gateway_note:s.gateway_note,customerid:s.customerid,location:s.location,carrier:s.carrier}}))}),[s]);var w=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o="customerid"===n?parseInt(a,10):a;N((0,p.Z)((0,p.Z)({},I),{},(0,m.Z)({},n,"checkbox"===r?i:o)))},A=(0,d.X)(),C=A.darkMode;A.setDarkMode;return(0,g.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:S,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),y(!0),!0===t.checkValidity()&&(l({type:"SHOW_LOADER"}),o(I),console.log(I),n())},children:[(0,g.jsxs)(r.b7,{md:12,children:[(0,g.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Organization"}),(0,g.jsxs)(r.LX,{name:"customerid",className:" form-select ".concat(C?"select-dark":""),"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid Organization.",value:I.customerid,onChange:w,required:!0,disabled:!!s,children:[(0,g.jsx)("option",{children:"Select Organization"}),null===(t=u[0])||void 0===t?void 0:t.map((function(e){return(0,g.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,g.jsxs)(r.b7,{md:12,children:[(0,g.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Gateway ID*"}),(0,g.jsxs)(r.YR,{children:[(0,g.jsx)(r.wV,{children:(0,g.jsx)(f.Z,{icon:h.H,alt:"Name"})}),(0,g.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_id",value:I.gateway_id,onChange:w,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0,disabled:!!s})]})]}),(0,g.jsxs)(r.b7,{md:12,children:[(0,g.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Notes*"}),(0,g.jsxs)(r.YR,{children:[(0,g.jsx)(r.wV,{children:(0,g.jsx)(f.Z,{icon:v.E,alt:"Notes"})}),(0,g.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.gateway_note,onChange:w,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,g.jsxs)(r.b7,{md:12,children:[(0,g.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Carrier*"}),(0,g.jsxs)(r.YR,{children:[(0,g.jsx)(r.wV,{children:(0,g.jsx)(f.Z,{icon:v.E,alt:"Notes"})}),(0,g.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.carrier,onChange:w,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,g.jsxs)(r.b7,{md:12,children:[(0,g.jsx)(r.L8,{id:"".concat(C?"heading-dark":""),htmlFor:"validationFacilityName",children:"Location*"}),(0,g.jsxs)(r.YR,{children:[(0,g.jsx)(r.wV,{children:(0,g.jsx)(f.Z,{icon:v.E,alt:"Notes"})}),(0,g.jsx)(r.jO,{className:"input-light pt-0 ".concat(C?"input-dark":""),type:"text",name:"gateway_note",value:I.location,onChange:w,feedbackInvalid:"Facility Name is required",id:"validationFacilityName",required:!0})]})]}),(0,g.jsx)(r.b7,{xs:12,children:(0,g.jsx)(r.u5,{color:"primary",type:"submit",children:s?"Edit Facility":"Add GateWay"})})]})},b=n(77868),S=(n(84254),n(74165)),y=n(15861),k=n(52178),Z=n(80491),I=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("gateway/get-all-gateways/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.get("gateway/get-all-gateways");case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.post("gateway/assign-to-organization",t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.patch("/gateway/update-gateway/".concat(t.editData.gatewayid),t.handler);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,y.Z)((0,S.Z)().mark((function e(t){var n,a;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.A)(localStorage.getItem("token")),e.next=3,Z.b.delete("gateway/delete-gateway/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=[{key:"gateway_id",label:"Gateway ID"},{key:"gateway_note",label:"Gateway Notes"},{key:"carrier",label:"Carrier"},{key:"location",label:"Location"}],D=function(){var e=(0,c.U)().dispatch,t=function(){return e({type:"SHOW_LOADER"})},n=function(){return e({type:"HIDE_LOADER"})},m=(0,l.useMutation)(w).mutate,p=(0,l.useMutation)(A).mutate,f=(0,l.useMutation)(I).mutate,h=(0,l.useMutation)(N).mutate,v=(0,i.useState)(!1),x=(0,a.Z)(v,2),S=x[0],y=x[1],k=(0,i.useState)([]),Z=(0,a.Z)(k,2),D=Z[0],F=Z[1],O=(0,i.useState)(),M=(0,a.Z)(O,2),_=M[0],z=M[1],H=(0,i.useState)(!1),L=(0,a.Z)(H,2),R=L[0],T=L[1],V=(0,d.X)().setShowToast,q=(0,l.useMutation)(C),U=(0,i.useState)(!0),P=(0,a.Z)(U,2),X=P[0],B=(P[1],(0,u.s0)()),W=function(){y(!1)};function Y(e){f(e,{onSuccess:function(e){n(),F(e.data)},onError:function(e){}})}function G(e){t(),setTimeout((function(){R?m(e,{onSuccess:function(){n(),V((function(){return{show:!0,title:"Success",content:"GateWay Created Successfully"}})),Y(localStorage.getItem("OrganizationId"))},onError:function(e){n(),V((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error,color:"#FF0000"}}))}}):p({handler:e,editData:_},{onSuccess:function(){n(),V((function(){return{show:!0,title:"Success",content:"GateWay Edited Successfully"}})),Y(localStorage.getItem("OrganizationId"))},onError:function(e){n(),V((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&"Select Organization"!==e?Y(e):h("",{onSuccess:function(e){n(),F(e.data)},onError:function(e){}})}),[localStorage.getItem("OrganizationId")]);var J=(0,d.X)(),Q=J.darkMode;J.setDarkMode;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.$,{title:R?"Add GateWay":"Edit GateWay",content:R?(0,g.jsx)(j,{closeModal:W,saveHandler:G}):(0,g.jsx)(j,{closeModal:W,saveHandler:G,data:_}),isOpen:S,onClose:W}),(0,g.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(Q?"table_container_dark":""),children:[(0,g.jsxs)(r.rb,{children:[(0,g.jsx)(r.b7,{children:(0,g.jsx)("h3",{className:"pb-2",id:"".concat(Q?"heading-dark":""),children:"GateWay"})}),(0,g.jsxs)(r.b7,{className:"d-flex gap-5 justify-content-end",children:[(0,g.jsx)("div",{children:(0,g.jsx)(r.u5,{color:"primary",className:"float-end mr-3",onClick:function(){T(!0),z(null),y(!0)},children:"Add GateWay"})}),(0,g.jsxs)("div",{className:"d-flex gap-2",children:[(0,g.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Day"}),(0,g.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Week"}),(0,g.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Month"}),(0,g.jsx)(r.u5,{color:"primary",className:"float-end mr-3",children:"Hour"})]})]})]}),D?(0,g.jsx)(b.Z,{columns:E,data:D,OnDeleteItem:function(e){t(),q.mutate(e,{onSuccess:function(){V((function(){return{show:!0,title:"Success",content:"GateWay deleted Successfully"}})),Y(localStorage.getItem("OrganizationId")),n()},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),B("/login")),V((function(){return{show:!0,title:"Error",content:e.response.data.error}})),n()}}),n()},openEditModal:function(e){T(!1),z(e),y(!0)},delgatewayId:X}):(0,g.jsx)(o.Z,{})]})]})}},36167:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(29439),r=n(78983),i=n(72791),o=n(52036),s=n(10781),c=(n(2635),n(80184)),l=n(77868),d=(n(2646),n(4942)),u=n(1413),m=n(24846),p=n(1278),f=n(31517),h=n(31397),v=n(51843),x=n(74479),g=n(99412),j=n(54546),b=n(25244),S=n(46599),y=n(18043),k=n(57689),Z=n(99579),I=function(e){var t=e.closeModal,n=e.saveHandler,o=e.data,s=(0,y.U)().dispatch,l=((0,k.s0)(),(0,i.useState)(!1)),I=(0,a.Z)(l,2),N=I[0],w=I[1],A=(0,i.useState)({customername:"",contactperson:"",email:"",address:"",city:"",street:"",postcode:"",phone:"",interval1:null,interval2:null,interval3:null,interval4:null}),C=(0,a.Z)(A,2),E=C[0],D=C[1];(0,i.useEffect)((function(){o&&D((function(){return{customername:o.customername,contactperson:o.contactperson,email:o.email,address:o.address,city:o.city,street:o.street,postcode:o.postcode,phone:o.phone,interval1:o.interval1,interval2:o.interval2,interval3:o.interval3,interval4:o.interval4}}))}),[o]);var F=function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked,o=a;("postcode"===n||"interval1"===n||"interval2"===n||"interval3"===n||"interval4"===n&&"checkbox"!==r)&&0===(o=parseInt(a,10)||0)&&(o=null),D((0,u.Z)((0,u.Z)({},E),{},(0,d.Z)({},n,"checkbox"===r?i:o)))},O=(0,Z.X)(),M=O.darkMode;O.setDarkMode;return(0,c.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:N,onSubmit:function(e){var a=e.currentTarget;e.preventDefault(),!1===a.checkValidity()&&e.stopPropagation(),w(!0),!0===a.checkValidity()&&(s({type:"SHOW_LOADER"}),n(E),t())},children:[(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationName",children:"Organization Name"}),(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:p.e,alt:"Name"})}),(0,c.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"customername",value:E.customername,onChange:F,feedbackInvalid:"Organization Name is required",id:"validationCustom01",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationContact",children:"Contact Person"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:f.g,alt:"Contact"})}),(0,c.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"contactperson",value:E.contactperson,onChange:F,feedbackInvalid:"Please enter a valid phone number",id:"validationCustom02",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationContact",children:"Phone"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:h.d,alt:"Contact"})}),(0,c.jsx)(r.jO,{type:"text",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"phone",value:E.phone,onChange:F,feedbackInvalid:"Please enter a valid phone number",id:"validationCustom02",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Organization Email"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:v.p,alt:"Email"})}),(0,c.jsx)(r.jO,{type:"email",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"email",value:E.email,onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;D((0,u.Z)((0,u.Z)({},E),{},(0,d.Z)({},n,"checkbox"===r?i:a)));var o=e.target.value,s=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o);w(s)},"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:"Organization Email is required",id:"validationCustomorganizationEmail",required:!0})]})]}),(0,c.jsx)(r.b7,{md:12,children:"Set CheckPoint Intervals"}),(0,c.jsxs)(r.b7,{md:3,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 1"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:x.$,alt:"Email"})}),(0,c.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval1",value:E.interval1,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,c.jsxs)(r.b7,{md:3,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 2"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:x.$,alt:"Email"})}),(0,c.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval2",value:E.interval2,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,c.jsxs)(r.b7,{md:3,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 3"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:x.$,alt:"Email"})}),(0,c.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval3",value:E.interval3,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,c.jsxs)(r.b7,{md:3,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomorganizationEmail",children:"Interval 4"}),(0,c.jsxs)(r.YR,{className:"has-validation",children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:x.$,alt:"Email"})}),(0,c.jsx)(r.jO,{type:"number",className:"input-light pt-0 ".concat(M?"input-dark":""),name:"interval4",value:E.interval4,onChange:F,"aria-describedby":"inputGroupPrependFeedback"})]})]}),(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomAddress",children:"Address"}),(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:g.i,alt:"Address"})}),(0,c.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"address",value:E.address,onChange:F,"aria-describedby":"validationCustom03Feedback",feedbackInvalid:"Address is required.",id:"validationCustom03",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:6,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomCity",children:"City"}),(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:j.V,alt:"City"})}),(0,c.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"city",value:E.city,onChange:F,"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"City is required.",id:"validationCustom04",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:6,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomStreet",children:"Street"}),(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:b.f,alt:"Street"})}),(0,c.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"street",value:E.street,onChange:F,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Street is required.",id:"validationCustom05",required:!0})]})]}),(0,c.jsxs)(r.b7,{md:12,children:[(0,c.jsx)(r.L8,{id:"".concat(M?"heading-dark":""),htmlFor:"validationCustomPostcode",children:"Postcode"}),(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.wV,{children:(0,c.jsx)(m.Z,{icon:S.y,alt:"Postcode"})}),(0,c.jsx)(r.jO,{className:"input-light pt-0 ".concat(M?"input-dark":""),type:"text",name:"postcode",value:E.postcode,onChange:F,"aria-describedby":"validationCustom05Feedback",feedbackInvalid:"Postcode is required",id:"validationCustom05",required:!0})]})]}),(0,c.jsx)(r.b7,{xs:12,children:(0,c.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(M?"button-dark":""),type:"submit",children:o?"Edit Organization":"Add Organization"})})]})},N=n(91933),w=n(17834),A=[{key:"customername",label:"Organization Name"},{key:"contactperson",label:"Organization Contact"},{key:"email",label:"Contact Email"},{key:"calibration_date",label:"Calibration Date"},{key:"address",label:"Address"},{key:"street",label:"Street"},{key:"city",label:"City"},{key:"postcode",label:"Postcode"}],C=function(){var e=(0,s.Z)((function(e){return e.addData})),t=(0,N.useMutation)(w.Fi).mutate,n=(0,N.useMutation)(w.D2).mutate,d=(0,N.useMutation)(w.I8).mutate,u=(0,s.Z)((function(e){return e.data})),m=(0,i.useState)(!1),p=(0,a.Z)(m,2),f=p[0],h=p[1],v=(0,i.useState)(),x=(0,a.Z)(v,2),g=x[0],j=x[1],b=(0,i.useState)(!1),S=(0,a.Z)(b,2),C=S[0],E=S[1],D=(0,Z.X)().setShowToast,F=(0,i.useState)(!0),O=(0,a.Z)(F,2),M=O[0],_=(O[1],function(){h(!1)}),z=(0,y.U)().dispatch,H=(0,k.s0)(),L=function(){return z({type:"SHOW_LOADER"})},R=function(){return z({type:"HIDE_LOADER"})},T=(0,N.useMutation)(w.Mz);function V(a){L(),setTimeout((function(){C?t(a,{onSuccess:function(){R(),D((function(){return{show:!0,title:"Success",content:"Organization Created Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}})},onError:function(e){"ERR_BAD_REQUEST"===e.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),H("/login")),R(),D((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}}):d({handler:a,editData:g},{onSuccess:function(){R(),D((function(){return{show:!0,title:"Success",content:"Organization Edited Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}})},onError:function(e){R(),D((function(){return{show:!0,title:"Error",content:e.response.data.error,color:"#FF0000"}}))}})}),0)}var q=(0,Z.X)(),U=q.darkMode;q.setDarkMode;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.$,{title:C?"Add Organization":"Edit Organization",content:C?(0,c.jsx)(I,{closeModal:_,saveHandler:V}):(0,c.jsx)(I,{closeModal:_,saveHandler:V,data:g}),isOpen:f,onClose:_}),(0,c.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(U?"table_container_dark":""),children:[(0,c.jsxs)(r.rb,{children:[(0,c.jsx)(r.b7,{children:(0,c.jsx)("h3",{id:"".concat(U?"heading-dark":""),className:"pb-2",children:"Organizations"})}),(0,c.jsx)(r.b7,{children:(0,c.jsx)(r.u5,{color:"primary",className:"float-end",id:"".concat(U?"button-dark":""),onClick:function(){E(!0),j(null),h(!0)},children:"Add Organization"})})]}),(0,c.jsx)(l.Z,{columns:A,data:u[0],openEditModal:function(e){E(!1),j(e),h(!0)},OnDeleteItem:function(t){L(),T.mutate(t,{onSuccess:function(){D((function(){return{show:!0,title:"Success",content:"Organization deleted Successfully"}})),n("",{onSuccess:function(t){e(t.data)},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}}))}}),R()},onError:function(e){D((function(){return{show:!0,title:"Error",content:e.response.data}})),R()}}),R()},delorgId:M})]})]})}},18186:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(93433),r=n(4942),i=n(1413),o=n(29439),s=n(72791),c=n(78983),l=n(1278),d=n(19069),u=n(69959),m=n(24846),p=(n(93001),n(99579)),f=n(52036),h=n(18043),v=n(91933),x=n(57689),g=(n(10781),n(74165)),j=n(15861),b=n(52178),S=n(80491),y=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(t){var n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.A)(localStorage.getItem("token")),e.next=3,S.b.get("notificationsetup/".concat(t,"?type=email"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(t){var n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.A)(localStorage.getItem("token")),e.next=3,S.b.get("notificationsetup/".concat(t,"?type=phone"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(t){var n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.A)(localStorage.getItem("token")),e.next=3,S.b.get("notificationsetup/selected-users/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=localStorage.getItem("OrganizationId"),N=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(t){var n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.A)(localStorage.getItem("token")),e.next=3,S.b.post("notificationsetup/create/".concat(I),t);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(t){var n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.A)(localStorage.getItem("token")),e.next=3,S.b.get("organization/credit/".concat(t));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=(n(36167),n(80184)),C=function(e){var t=e.closeModal,n=e.saveHandler,r=(e.data,(0,s.useState)([])),i=(0,o.Z)(r,2),l=i[0],d=i[1],u=(0,h.U)().dispatch,m=function(){return u({type:"HIDE_LOADER"})},f=(0,v.useMutation)(y).mutate,x=(0,p.X)(),g=x.darkMode;x.setDarkMode;var j=(0,s.useState)([]),b=(0,o.Z)(j,2),S=b[0],k=b[1],Z=(0,s.useState)(!1),I=(0,o.Z)(Z,2),N=I[0],w=I[1];return(0,s.useEffect)((function(){var e;e=localStorage.getItem("OrganizationId"),f(e,{onSuccess:function(e){m(),d(e.data)},onError:function(e){m()}})}),[localStorage.getItem("OrganizationId")]),(0,s.useEffect)((function(){var e=l.map((function(e,t){return e.is_email?t:null})).filter((function(e){return null!==e}));k(e)}),[l]),(0,A.jsxs)("div",{children:[(0,A.jsxs)(c.Sx,{children:[(0,A.jsx)(c.V,{children:(0,A.jsxs)(c.T6,{children:[(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:"Name"}),(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:"Email Address"}),(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:(0,A.jsx)(c.EC,{id:"defaultCheckAllNone",label:"All/None",checked:N,onChange:function(){w((function(e){var t=e?[]:Array.from({length:l.length},(function(e,t){return t}));return k(t),!e}))}})})]})}),(0,A.jsx)(c.NR,{children:l.map((function(e,t){return(0,A.jsxs)(c.T6,{children:[(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:e.name}),(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:e.email}),(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:(0,A.jsx)(c.EC,{id:"defaultCheck".concat(t+1),onChange:function(){return function(e){var t=S.includes(e),n=(0,a.Z)(S);t?n.splice(n.indexOf(e),1):n.push(e),k(n)}(t)},checked:S.includes(t)})})]},t)}))})]}),(0,A.jsx)("button",{onClick:function(){var e=S.map((function(e){return l[e]}));console.log("Checked Items:",e),n(e),t()},children:"Save"})]})},E=function(e){var t=e.closeModal,n=e.saveHandler,r=(e.data,(0,s.useState)([])),i=(0,o.Z)(r,2),l=i[0],d=i[1],u=(0,h.U)().dispatch,m=function(){return u({type:"HIDE_LOADER"})},f=(0,v.useMutation)(k).mutate,x=(0,p.X)(),g=x.darkMode;x.setDarkMode;var j=(0,s.useState)([]),b=(0,o.Z)(j,2),S=b[0],y=b[1],Z=(0,s.useState)(!1),I=(0,o.Z)(Z,2),N=I[0],w=I[1];return(0,s.useEffect)((function(){var e;e=localStorage.getItem("OrganizationId"),f(e,{onSuccess:function(e){m(),d(e.data)},onError:function(e){m()}})}),[localStorage.getItem("OrganizationId")]),(0,s.useEffect)((function(){var e=l.map((function(e,t){return e.is_email?t:null})).filter((function(e){return null!==e}));y(e)}),[l]),(0,A.jsxs)("div",{children:[(0,A.jsxs)(c.Sx,{children:[(0,A.jsx)(c.V,{children:(0,A.jsxs)(c.T6,{children:[(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:"Name"}),(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:"Phone Number"}),(0,A.jsx)(c.is,{scope:"col",className:"table-data-light ".concat(g?"table-data-dark":""),children:(0,A.jsx)(c.EC,{id:"defaultCheckAllNone",label:"All/None",checked:N,onChange:function(){w((function(e){var t=e?[]:Array.from({length:l.length},(function(e,t){return t}));return y(t),!e}))}})})]})}),(0,A.jsx)(c.NR,{children:l.map((function(e,t){return(0,A.jsxs)(c.T6,{children:[(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:e.name}),(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:e.phonenumber}),(0,A.jsx)(c.NN,{className:"table-data-light ".concat(g?"table-data-dark":""),children:(0,A.jsx)(c.EC,{id:"defaultCheck".concat(t+1),onChange:function(){return function(e){var t=S.includes(e),n=(0,a.Z)(S);t?n.splice(n.indexOf(e),1):n.push(e),y(n)}(t)},checked:S.includes(t)})})]},t)}))})]}),(0,A.jsx)("button",{onClick:function(){var e=S.map((function(e){return l[e]}));console.log("Checked Items:",e),n(e),t()},children:"Save"})]})},D=function(){var e=(0,s.useState)([]),t=(0,o.Z)(e,2),n=(t[0],t[1],(0,h.U)().dispatch),g=function(){return n({type:"HIDE_LOADER"})},j=(0,v.useMutation)(Z).mutate,b=(0,v.useMutation)(w).mutate,S=(0,v.useMutation)(N).mutate;function y(e){j(e,{onSuccess:function(e){g(),be(e.data),Ze(e.data)},onError:function(e){g()}})}var k=(0,s.useState)([]),I=(0,o.Z)(k,2),D=I[0],F=I[1];(0,s.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&"Select Organization"!==e?e&&"Select Organization"!==e&&(y(e),b(e,{onSuccess:function(e){g(),F(e.data)},onError:function(e){g()}})):te({show:!0,title:"Error",content:"Please select an organization first.",color:"#FF0000"})}),[localStorage.getItem("OrganizationId")]);var O=(0,s.useState)(!1),M=(0,o.Z)(O,2),_=M[0],z=M[1],H=(0,s.useState)(null),L=(0,o.Z)(H,2),R=L[0],T=L[1],V=(0,s.useState)(!1),q=(0,o.Z)(V,2),U=q[0],P=q[1],X=(0,s.useState)(!1),B=(0,o.Z)(X,2),W=B[0],Y=B[1],G=(0,s.useState)(!0),J=(0,o.Z)(G,2),Q=J[0],K=J[1],$=(0,s.useState)(!1),ee=(0,o.Z)($,2),te=(ee[0],ee[1],(0,p.X)().setShowToast),ne=((0,x.s0)(),function(){P(!1)}),ae=function(){Y(!1)},re=(0,s.useState)([]),ie=(0,o.Z)(re,2),oe=ie[0],se=(ie[1],(0,s.useState)(!1)),ce=(0,o.Z)(se,2),le=ce[0],de=ce[1],ue=(0,s.useState)({email:"",textemailaddress:"",smsnumber:"",texttospeechnumber:""}),me=(0,o.Z)(ue,2),pe=me[0],fe=me[1];(0,s.useEffect)((function(){oe&&fe((function(){return{email:oe.email,textemailaddress:oe.textemailaddress,smsnumber:oe.smsnumber,texttospeechnumber:oe.texttospeechnumber}}))}),[oe]);var he=function(e){var t=e.target,n=t.name,a=t.value,o=t.type,s=t.checked;fe((0,i.Z)((0,i.Z)({},pe),{},(0,r.Z)({},n,"checkbox"===o?s:a)))},ve=function(e){var t=e.target,n=t.name,a=t.value,o=t.type,s=t.checked;fe((0,i.Z)((0,i.Z)({},pe),{},(0,r.Z)({},n,"checkbox"===o?s:a)));var c=e.target.value,l=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(c);de(l)},xe=(0,s.useState)([]),ge=(0,o.Z)(xe,2),je=ge[0],be=ge[1],Se=(0,s.useState)([]),ye=(0,o.Z)(Se,2),ke=ye[0],Ze=ye[1];function Ie(e){var t=[].concat((0,a.Z)(je),(0,a.Z)(ke));e.preventDefault(),S(t,{onSuccess:function(){g(),y(localStorage.getItem("OrganizationId"))},onError:function(e){g(),y(localStorage.getItem("OrganizationId"))}})}var Ne=(0,p.X)(),we=Ne.darkMode;Ne.setDarkMode;return(0,A.jsxs)(A.Fragment,{children:[!Q&&U&&(0,A.jsx)(f.$,{title:_?"Select User":"Edit SMS Number",content:(0,A.jsx)(E,{closeModal:ne,saveHandler:function(e){Ze(e)},data:R}),isOpen:U,onClose:ne}),!Q&&W&&(0,A.jsx)(f.$,{title:_?"Select User":"Edit Alarm Notification",content:(0,A.jsx)(C,{closeModal:ae,saveHandler:function(e){be(e)},data:R}),isOpen:W,onClose:ae}),(0,A.jsx)("div",{children:(0,A.jsx)("h3",{className:"pb-2",id:"".concat(we?"heading-dark":""),children:"Alarm Notification"})}),(0,A.jsx)("div",{children:(0,A.jsxs)(c.uz,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,activeItemKey:2,children:[(0,A.jsxs)(c.Ob,{className:" ".concat(we?"table_container_dark":"table_container_light"),itemKey:1,children:[(0,A.jsx)(c.Lv,{className:" ".concat(we?"table_container_dark":"table_container_light heading-dark"),style:{fontSize:"50px",fontFamily:"sans-serif"},children:"Notification Setup"}),(0,A.jsx)(c.qI,{className:" ".concat(we?"table_container_dark":"table_container_light"),children:(0,A.jsxs)("left",{className:"pb-2",id:"".concat(we?"heading-dark":""),children:["plugin adds the appropriate classes that we use to style each element. These classes are very useful for the necessory implementation of the work and also the esuresance of task control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with"," ","Alaram Setup custom CSS or overriding our default","User setup, though the transition does limit overflow."]})})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(c.Ob,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,itemKey:2,children:[(0,A.jsx)(c.Lv,{style:{fontSize:"50px",fontFamily:"sans-serif"},className:"pb-2",id:"".concat(we?"heading-dark":""),children:"SMS Credits"}),(0,A.jsxs)(c.qI,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:[(0,A.jsx)("p",{className:"pb-2",id:"".concat(we?"heading-dark":""),children:"* It is hidden by default, until the collapse plugin adds the appropriate classes that we use to to be aware of something is necessary"}),(0,A.jsx)("br",{}),(0,A.jsx)(c.Sx,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,bordered:!0,children:(0,A.jsxs)(c.NR,{children:[(0,A.jsxs)(c.T6,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:[(0,A.jsx)(c.NN,{style:{width:"800px"},className:"pb-2 ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,id:"".concat(we?"heading-dark":"heading-light"),children:"Organization Credit"}),(0,A.jsx)(c.NN,{className:"pb-2 ".concat(we?"table_container_dark":"table_container_light"),id:"".concat(we?"heading-dark":""),children:D||"0"})]}),(0,A.jsxs)(c.T6,{className:" ".concat(we?"table_container_dark":"table_container_light"),children:[(0,A.jsx)(c.NN,{className:"pb-2 ".concat(we?"table_container_dark":"table_container_light"),id:"".concat(we?"heading-dark":""),children:"Facility Credit"}),(0,A.jsx)(c.NN,{className:"pb-2 ".concat(we?"table_container_dark":"table_container_light"),id:"".concat(we?"heading-dark":""),children:"0"})]})]})})]})]}),(0,A.jsx)("br",{}),(0,A.jsxs)(c.Ob,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,itemKey:3,children:[(0,A.jsx)(c.Lv,{className:"pb-2",id:"".concat(we?"heading-dark":""),style:{fontSize:"50px",fontFamily:"sans-serif"},children:"Alarms"}),(0,A.jsx)(c.qI,{className:" ".concat(we?"table_container_dark":"table_container_light"),alwaysOpen:!0,children:(0,A.jsxs)(c.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:le,onSubmit:Ie,style:{marginBottom:"26px"},children:[(0,A.jsxs)(c.b7,{md:6,children:[(0,A.jsx)(c.L8,{id:"".concat(we?"heading-dark":""),htmlFor:"validationFirstName",children:"Email Address"}),(0,A.jsxs)(c.YR,{style:{height:"90px"},children:[(0,A.jsx)(c.wV,{children:(0,A.jsx)(m.Z,{icon:l.e,alt:"Name"})}),(0,A.jsx)("textarea",{className:"form-control ".concat(we?"input-dark":"input-light"),name:"email",value:je.map((function(e){return e.email})).join("\n"),onChange:he,readOnly:!0,onClick:function(){z(!0),T(null),Y(!0),K(!1)},placeholder:"Enter your email...",required:!0})]})]}),(0,A.jsxs)(c.b7,{md:6,children:[(0,A.jsx)(c.L8,{id:"".concat(we?"heading-dark":""),htmlFor:"validationLastName",children:"Plain text email Address"}),(0,A.jsxs)(c.YR,{className:"has-validation",style:{height:"90px"},children:[(0,A.jsx)(c.wV,{children:(0,A.jsx)(m.Z,{icon:d.m,alt:"text to email"})}),(0,A.jsx)(c.jO,{type:"text",className:"input-light pt-0 ".concat(we?"input-dark":""),name:"textemailaddress",value:pe.textemailaddress,onChange:he,feedbackInvalid:"Plain Text Email Address is required",id:"validationCustom02",required:!0})]})]}),(0,A.jsxs)(c.b7,{md:6,children:[(0,A.jsx)(c.L8,{id:"".concat(we?"heading-dark":""),htmlFor:"validationEmail",children:"SMS Number"}),(0,A.jsxs)(c.YR,{className:"has-validation",style:{height:"90px"},children:[(0,A.jsx)(c.wV,{children:(0,A.jsx)(m.Z,{icon:u.i,alt:"sms number"})}),(0,A.jsx)("textarea",{type:"text",className:"form-control ".concat(we?"input-dark":"input-light"),name:"smsnumber",value:ke.map((function(e){return e.phonenumber})).join("\n"),onChange:ve,onClick:function(){z(!0),T(null),P(!0),K(!1)},"aria-describedby":"inputGroupPrependFeedback",id:"validationEmail",required:!0})]})]}),(0,A.jsxs)(c.b7,{md:6,children:[(0,A.jsx)(c.L8,{id:"".concat(we?"heading-dark":""),htmlFor:"validationEmail",children:"Text to Speech Number"}),(0,A.jsxs)(c.YR,{className:"has-validation",style:{height:"90px"},children:[(0,A.jsx)(c.wV,{children:(0,A.jsx)(m.Z,{icon:u.i,alt:"text "})}),(0,A.jsx)(c.jO,{type:"number",className:"input-light pt-0 ".concat(we?"input-dark":""),name:"texttospeechnumber",value:pe.texttospeechnumber,onChange:ve,"aria-describedby":"inputGroupPrependFeedback",feedbackInvalid:" Text is required",id:"validationText",required:!0})]})]}),(0,A.jsx)(c.b7,{xs:12,children:(0,A.jsx)(c.u5,{color:"primary",className:"float-end",id:"".concat(we?"button-dark":""),type:"submit",children:oe?"Save ":"Add  Details"})})]})})]})]})})]})}},83001:function(e,t,n){n.r(t);n(72791);var a=n(78983),r=n(24846),i=n(18534),o=n(80184);t.default=function(){return(0,o.jsx)("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:(0,o.jsx)(a.KB,{children:(0,o.jsx)(a.rb,{className:"justify-content-center",children:(0,o.jsxs)(a.b7,{md:6,children:[(0,o.jsxs)("div",{className:"clearfix",children:[(0,o.jsx)("h1",{className:"float-start display-3 me-4",children:"404"}),(0,o.jsxs)("h4",{className:"pt-3",children:["Oops! You","'","re lost."]}),(0,o.jsx)("p",{className:"text-medium-emphasis float-start",children:"The page you are looking for was not found."})]}),(0,o.jsxs)(a.YR,{className:"input-prepend",children:[(0,o.jsx)(a.wV,{children:(0,o.jsx)(r.Z,{icon:i.M})}),(0,o.jsx)(a.jO,{type:"text",placeholder:"What are you looking for?"}),(0,o.jsx)(a.u5,{color:"info",children:"Search"})]})]})})})})}},80242:function(e,t,n){n.r(t);var a=n(29439),r=n(78983),i=n(72791),o=n(91933),s=(n(93001),n(52036)),c=n(99579),l=n(18043),d=n(96062),u=n(56019),m=n(84254),p=n(39593),f=n(77868),h=(n(92999),n(66757)),v=n(80184),x=[{key:"aws_sensorid",label:"Sensor ID"},{key:"sensorname",label:"Sensor Name"},{key:"devices.departments.departmentname",label:"Department Name"},{key:"devices.devicename",label:"Device Name"}];t.default=function(){var e,t=(0,l.U)().dispatch,n=function(){return t({type:"SHOW_LOADER"})},g=function(){return t({type:"HIDE_LOADER"})},j=JSON.parse(localStorage.getItem("permissions")),b=(0,h.Z_)(j,h.BA,h.H2),S=(0,h.Z_)(j,h.vw,h.H2),y=(0,h.Z_)(j,h.JK,h.H2),k=(0,h.Z_)(j,h.iH,h.H2),Z=(0,o.useMutation)(u.LP).mutate,I=(0,o.useMutation)(d.Xo).mutate;var N=(0,o.useMutation)(u.Zo).mutate,w=(0,o.useMutation)(u.I$).mutate,A=(0,i.useState)(!1),C=(0,a.Z)(A,2),E=C[0],D=C[1],F=(0,i.useState)(),O=(0,a.Z)(F,2),M=O[0],_=O[1],z=(0,i.useState)(!1),H=(0,a.Z)(z,2),L=(H[0],H[1]),R=(0,i.useState)(!1),T=(0,a.Z)(R,2),V=T[0],q=T[1],U=(0,i.useState)(),P=(0,a.Z)(U,2),X=P[0],B=P[1],W=(0,i.useState)(!1),Y=(0,a.Z)(W,2),G=Y[0],J=Y[1],Q=(0,c.X)().setShowToast,K=(0,o.useMutation)(u.Tn),$=(0,i.useState)(!1),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ae=(0,i.useState)(""),re=(0,a.Z)(ae,2),ie=re[0],oe=re[1],se=(0,i.useState)(""),ce=(0,a.Z)(se,2),le=ce[0],de=ce[1],ue=(0,i.useState)(!0),me=(0,a.Z)(ue,2),pe=me[0],fe=(me[1],(0,i.useState)([])),he=(0,a.Z)(fe,2),ve=he[0],xe=he[1],ge=function(){D(!1)};var je=(0,i.useState)([]),be=(0,a.Z)(je,2),Se=be[0],ye=be[1],ke=(0,o.useMutation)(d.oy).mutate;var Ze=(0,o.useMutation)(u.IN).mutate;var Ie=(0,o.useMutation)(u.Qc).mutate;function Ne(e){Ie(e,{onSuccess:function(e){xe(e)},onError:function(){}})}var we=(0,o.useMutation)(u.zs).mutate;function Ae(e){we(e,{onSuccess:function(e){xe(e)},onError:function(){}})}var Ce=(0,o.useMutation)(u.fb).mutate;var Ee=localStorage.getItem("OrganizationId"),De=localStorage.getItem("facilityId"),Fe=localStorage.getItem("departmentId");function Oe(e){n(),setTimeout((function(){G?Z(e,{onSuccess:function(e){localStorage.setItem("sensorId",e.id),localStorage.setItem("deviceid",e.deviceId),g(),Q((function(){return{show:!0,title:"Success",content:"Device Sensor Created Successfully"}}))},onError:function(e){g(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}}):N({handler:e,editData:X},{onSuccess:function(){g(),Q((function(){return{show:!0,title:"Success",content:"Device Edited Successfully"}}))},onError:function(e){g(),Q((function(){var t;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){b?Ee&&De&&Fe?Ae(Fe):Ee&&De?Ne(De):Ee&&Ze(Ee,{onSuccess:function(e){xe(e)},onError:function(){}}):S?De?Ne(De):De&&Fe&&Ae(Fe):y&&De&&Fe&&Ae(Fe),b||S||y?function(e){ke(e,{onSuccess:function(e){g(),ye(e)},onError:function(e){g()}})}(localStorage.getItem("departmentId")):k&&I("",{onSuccess:function(e){g(),ye(e)},onError:function(e){g()}})}),[Ee,De,Fe]);var Me=(0,c.X)(),_e=Me.darkMode;Me.setDarkMode;return(0,v.jsx)(v.Fragment,{children:te?(0,v.jsx)(p.Z,{closeModal:ge,saveHandler:Oe,data:ie,sensorData:le}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.$,{title:G?"Add Equipment sensor":"Edit Equipment sensor",content:G?(0,v.jsx)(m.Z,{closeModal:ge,saveHandler:Oe,openAddSensorConfigurationModal:function(){q(!0)},AddsensorConfiguration:V,setisModalSensorOpen:L}):(0,v.jsx)(m.Z,{closeModal:ge,saveHandler:Oe,data:X}),isOpen:E,onClose:ge}),(0,v.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(_e?"table_container_dark":""),children:[(0,v.jsxs)(r.rb,{children:[(0,v.jsx)(r.b7,{md:6,children:(0,v.jsx)("h3",{className:"pb-2",id:"".concat(_e?"heading-dark":""),children:"Equipment Sensors"})}),(0,v.jsx)(r.b7,{md:3,className:"float-end",children:(0,v.jsxs)("select",{size:"sm",className:" form-select ".concat(_e?"select-dark":""),"aria-label":"Department",onChange:function(e){var t=e.target.value;"Select Device"!==t&&(_(t),Ce(t,{onSuccess:function(e){xe(e)},onError:function(){}}))},value:M,children:[(0,v.jsx)("option",{children:"Select Equipment"}),null===Se||void 0===Se||null===(e=Se.data)||void 0===e?void 0:e.map((function(e){return(0,v.jsx)("option",{value:e.deviceid,children:e.devicename},e.deviceid)}))]})}),(0,v.jsx)(r.b7,{md:3,children:(0,v.jsx)(r.u5,{color:"primary",className:"float-end",onClick:function(){J(!0),B(null),D(!0)},children:"Add Equipment Sensor"})})]}),(0,v.jsx)(f.Z,{columns:x,data:null===ve||void 0===ve?void 0:ve.data,OnDeleteItem:function(e){n(),K.mutate(e,{onSuccess:function(){Q((function(){return{show:!0,title:"Success",content:"Device Sensor deleted Successfully"}})),g()},onError:function(e){Q((function(){var t;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data}})),g()}}),g()},openEditModal:function(e){J(!1),B(e),D(!0)},viewConfig:function(e){localStorage.setItem("sensorId",e.sensorid),de(e),w(e.sensorid,{onSuccess:function(e){g(),oe(e.data),ne(!0)},onError:function(e){g(),Q((function(){var t,n;return{show:!0,title:"Error",content:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.title,color:"#FF0000"}}))}})},Deldevdsensor:pe})]})]})})}},81882:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a=n(29439),r=n(78983),i=n(72791),o=n(93001),s=n(52036),c=n(99579),l=n(18043),d=n(57689),u=n(25741),m=(n(56019),n(4942)),p=n(1413),f=n(10781),h=n(91933),v=(n(24846),n(80184)),x=function(e){var t,n,o=e.closeModal,s=e.saveHandler,d=e.data,x=(0,l.U)().dispatch,g=(0,i.useState)(!1),j=(0,a.Z)(g,2),b=j[0],S=j[1],y=(0,f.Z)((function(e){return e.data})),k=(0,i.useState)(),Z=(0,a.Z)(k,2),I=Z[0],N=Z[1],w=(0,i.useState)({customerid:I,aws_sensorid:""}),A=(0,a.Z)(w,2),C=A[0],E=A[1];(0,i.useEffect)((function(){d&&E({aws_sensorid:d.aws_sensorid,id:Number(d.sensorid),customerid:Number(d.customerid)})}),[d]);var D=(0,h.useMutation)(u.aI),F=D.mutate,O=D.data;(0,i.useEffect)((function(){F("",{onSuccess:function(e){},onError:function(e){console.log(e)}})}),[]);var M=(0,c.X)(),_=M.darkMode;M.setDarkMode;return(0,v.jsxs)(r.lx,{className:"row mt-2 g-3 needs-validation",noValidate:!0,validated:b,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),S(!0),!0===t.checkValidity()&&(x({type:"SHOW_LOADER"}),s(C),e.preventDefault(),o())},children:[d?null:(0,v.jsxs)(r.b7,{md:12,children:[(0,v.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationSensorId",children:"Sensor Id*"}),(0,v.jsxs)(r.LX,{"aria-describedby":"validationCustom04Feedback",feedbackInvalid:"Please select a valid sensor id",name:"aws_sensorid",className:" form-select ".concat(_?"select-dark":""),value:C.aws_sensorid,id:"validationSensorId",onChange:function(e){var t=e.target,n=t.name,a=t.value,r=t.type,i=t.checked;E((0,p.Z)((0,p.Z)({},C),{},(0,m.Z)({},n,"checkbox"===r?i:a)))},children:[(0,v.jsx)("option",{children:"Select Sensors"}),null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.map((function(e,t){return(0,v.jsx)("option",{value:e,children:e},t)}))]})]}),(0,v.jsxs)(r.b7,{md:12,children:[(0,v.jsx)(r.L8,{id:"".concat(_?"heading-dark":""),htmlFor:"validationOrganization",children:"Organization*"}),(0,v.jsxs)(r.LX,{"aria-describedby":"validationCustom04Feedback",className:" form-select ".concat(_?"select-dark":""),name:"organization",value:C.customerid,feedbackInvalid:"Please select a valid Organization",id:"validationOrganization",onChange:function(e){var t=parseInt(e.target.value,10)||0;E((0,p.Z)((0,p.Z)({},C),{},{customerid:t})),N(t)},required:!0,children:[(0,v.jsx)("option",{children:"Select Organization"}),null===(n=y[0])||void 0===n?void 0:n.map((function(e){return(0,v.jsx)("option",{value:e.customerid,children:e.customername},e.customerid)}))]})]}),(0,v.jsx)(r.b7,{xs:12,children:(0,v.jsx)(r.u5,{color:"primary",type:"submit",children:d?"Edit Organization Sensor":"Add Organization Sensor"})})]})},g=n(77868),j=[{key:"aws_sensorid",label:"AWS Sensor ID"},{key:"customers.customername",label:"Assigned Organization"}],b=function(){var e=(0,d.s0)(),t=(0,i.useState)([]),n=(0,a.Z)(t,2),m=n[0],p=n[1],f=(0,h.useMutation)(u.fY).mutate;var b=(0,h.useMutation)(u.S9).mutate;var S=(0,h.useMutation)(u.iR).mutate,y=(0,h.useMutation)(u.zw).mutate,k=(0,i.useState)(!1),Z=(0,a.Z)(k,2),I=Z[0],N=Z[1],w=(0,i.useState)(),A=(0,a.Z)(w,2),C=A[0],E=A[1],D=(0,i.useState)(!1),F=(0,a.Z)(D,2),O=F[0],M=F[1],_=(0,l.U)().dispatch,z=function(){return _({type:"SHOW_LOADER"})},H=function(){return _({type:"HIDE_LOADER"})},L=(0,c.X)().setShowToast,R=(0,h.useMutation)(u.Kj),T=(0,i.useState)(!0),V=(0,a.Z)(T,2),q=V[0],U=(V[1],localStorage.getItem("OrganizationId"),function(){N(!1)});function P(t){z(),setTimeout((function(){O?S(t,{onSuccess:function(){H(),L((function(){return{show:!0,title:"Success",content:"Organization Sensor Created Successfully"}}))},onError:function(t){"ERR_BAD_REQUEST"===t.code&&(localStorage.removeItem("token"),localStorage.removeItem("OrganizationId"),localStorage.removeItem("facilityId"),localStorage.removeItem("departmentId"),e("/login")),H(),L((function(){var e,n;return{show:!0,title:"Error",content:null===t||void 0===t||null===(e=t.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,color:"#FF0000"}}))}}):y({handler:t,editData:C},{onSuccess:function(){H(),L((function(){return{show:!0,title:"Success",content:"Organization Sensor Edited Successfully"}}))},onError:function(e){H(),L((function(){return{show:!0,title:"Error",content:e.response.data,color:"#FF0000"}}))}})}),0)}(0,i.useEffect)((function(){var e=localStorage.getItem("OrganizationId");e&&void 0!==e&&"Select Organization"!==e?b(e,{onSuccess:function(e){p(e.data)},onError:function(e){H()}}):f("",{onSuccess:function(e){p(e)},onError:function(e){H()}})}),[localStorage.getItem("OrganizationId")]);var X=(0,c.X)(),B=X.darkMode;X.setDarkMode;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.$,{title:O?"Add Organization sensor":"Edit Organization sensor",content:O?(0,v.jsx)(x,{closeModal:U,saveHandler:P}):(0,v.jsx)(x,{closeModal:U,saveHandler:P,data:C}),isOpen:I,onClose:U}),(0,v.jsxs)(r.xH,{className:"table_container_light p-4 ".concat(B?"table_container_dark":""),children:[(0,v.jsxs)(r.rb,{children:[(0,v.jsx)(r.b7,{children:(0,v.jsx)("h3",{className:"pb-2",id:"".concat(B?"heading-dark":""),children:"Organization Sensors"})}),(0,v.jsx)(r.b7,{children:(0,v.jsx)(r.u5,{color:"primary",id:"".concat(B?"button-dark":""),className:"float-end",onClick:function(){M(!0),E(null),N(!0)},children:"Add Organization Sensor"})})]}),m?(0,v.jsx)(g.Z,{columns:j,data:m,OnDeleteItem:function(e){z(),R.mutate(e,{onSuccess:function(){L((function(){return{show:!0,title:"Success",content:"Organization Sensor deleted Successfully"}})),H()},onError:function(e){L((function(){return{show:!0,title:"Error",content:e.response.data}})),H()}}),H()},openEditModal:function(e){M(!1),E(e),N(!0)},delOrgsSensorId:q}):(0,v.jsx)(o.Z,{})]})]})}},77868:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(29439),r=n(72791),i=n(78983),o=n(24846),s=n(93400),c=n(10982),l=n(98240),d=n(17256),u=n(99579),m=n(80184),p=function(e){var t=e.title,n=e.content,a=e.onClose,r=e.isOpen,o=e.OnDeleteClick,s=e.id,c=(0,u.X)(),l=c.darkMode;c.setDarkMode;return(0,m.jsxs)(i.Tk,{id:"delete_modal",visible:r,onClose:a,children:[(0,m.jsx)(i.p0,{closeButton:!0,className:"modal-light ".concat(l?"modal-dark":""),children:(0,m.jsx)(i.fl,{id:"".concat(l?"heading-dark":""),children:t})}),(0,m.jsxs)(i.sD,{className:"modal-light pt-0 ".concat(l?"modal-dark":""),children:[n,(0,m.jsxs)("h4",{className:"ms-3 pt-2",id:"".concat(l?"heading-dark":""),children:["Are you sure you want to delete?"," "]}),(0,m.jsxs)(i.b7,{xs:11,className:"modal-light ".concat(l?"modal-dark":""),children:[(0,m.jsx)(i.u5,{color:"danger",className:"float-end ms-2",onClick:function(){o(s),a()},children:"Delete"}),(0,m.jsx)(i.u5,{color:"primary",className:"float-end",onClick:function(){a()},children:"Cancel"})]})]})]})},f=function(e){var t=e.columns,n=void 0===t?[]:t,f=e.data,h=void 0===f?[]:f,v=e.openEditModal,x=e.OnDeleteItem,g=e.viewConfig,j=e.deldevId,b=e.deldepId,S=e.delfacId,y=e.delorgId,k=e.deldevsSensorId,Z=e.delfacstaffId,I=e.delUserId,N=e.deldevstaffId,w=e.deldepstaffId,A=e.delgatewayId,C=e.Deldevdsensor,E=e.delOrgsSensorId,D=e.selectedRole,F=e.openAssignModal,O=function(e,t){return t.split(".").reduce((function(e,t){return null===e||void 0===e?void 0:e[t]}),e)},M=(0,r.useState)(""),_=(0,a.Z)(M,2),z=_[0],H=_[1],L=(0,r.useState)(!1),R=(0,a.Z)(L,2),T=R[0],V=R[1],q=(0,u.X)(),U=q.darkMode;q.setDarkMode;return(0,m.jsxs)("div",{className:"table-responsive-x",children:[(0,m.jsx)(p,{title:"Delete",content:"",OnDeleteClick:x,isOpen:T,onClose:function(){V(!1)},id:z}),(0,m.jsxs)(i.Sx,{hover:!0,className:"custom-table",children:[(0,m.jsx)(i.V,{children:(0,m.jsxs)(i.T6,{children:[n.map((function(e){return(0,m.jsx)(i.is,{className:"table-data-light ".concat(U?"table-data-dark":""),children:e.label},e.key)})),g?(0,m.jsx)(i.is,{className:"table-data-light ".concat(U?"table-data-dark":""),children:"View Config"},"viewConfig"):null,(0,m.jsx)(i.is,{className:"table-data-light ".concat(U?"table-data-dark":""),children:"Actions"},"actions")]})}),(0,m.jsxs)(i.NR,{children:[(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h?void 0:h.map((function(e,t){return(0,m.jsxs)(i.T6,{children:[n.map((function(t){return(0,m.jsx)("td",{className:"table-data-light ".concat(U?"table-data-dark":""),children:t.key.includes(".")?O(e,t.key):e[t.key]},t.key)})),g?(0,m.jsx)("td",{className:"table-data-light ".concat(U?"table-data-dark":""),children:(0,m.jsx)(o.Z,{style:{cursor:"pointer",width:"25px",height:"22px"},color:"secondary",icon:s.j,onClick:function(){return g(e)}})},"viewConfig"):null,(0,m.jsx)("td",{className:"table-data-light ".concat(U?"table-data-dark":""),children:(0,m.jsxs)(i.w5,{children:[(0,m.jsx)(i.SQ,{color:"secondary",children:(0,m.jsx)(o.Z,{icon:c.M})}),(0,m.jsxs)(i.$H,{className:" pt-0 ".concat(U?"dropdown-dark":""),children:[D?(0,m.jsxs)(i.$f,{onClick:function(){return F(e)},children:[(0,m.jsx)(o.Z,{icon:l.l,className:"me-2"}),"Assigned"===D?"UnAssign":"Assign"]}):null,(0,m.jsxs)(i.$f,{onClick:function(){return v(e)},children:[(0,m.jsx)(o.Z,{icon:l.l,className:"me-2"}),"Edit"]}),(0,m.jsxs)(i.$f,{onClick:function(){y?H(e.customerid):S?H(e.facilityid):b?H(e.departmentid):j?H(e.deviceid):k?H(e.sensorid):Z||w||N||I?H(e):A?H(e.gatewayid):(C||E)&&H(e.sensorid),V(!0)},children:[(0,m.jsx)(o.Z,{icon:d.N,className:"me-2"}),"Delete"]})]})]})},"actions")]},t)}))),0===(null===h||void 0===h?void 0:h.length)&&(0,m.jsx)(i.T6,{children:(0,m.jsx)("td",{colSpan:n.length+1,className:"text-center",children:(0,m.jsx)("b",{children:"No data found"})})},"noData")]})]})]})}},53469:function(e,t,n){e.exports=n.p+"static/media/Logo-removebg-preview.668a457580bccc800296.png"}}]);
//# sourceMappingURL=637.84dfbd05.chunk.js.map